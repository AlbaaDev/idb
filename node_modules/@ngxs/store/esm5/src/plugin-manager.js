/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Inject, Injectable, Optional, SkipSelf } from '@angular/core';
import { NGXS_PLUGINS } from './symbols';
var PluginManager = /** @class */ (function () {
    function PluginManager(_parentManager, _pluginHandlers) {
        this._parentManager = _parentManager;
        this._pluginHandlers = _pluginHandlers;
        this.plugins = [];
        this.registerHandlers();
    }
    Object.defineProperty(PluginManager.prototype, "rootPlugins", {
        get: /**
         * @private
         * @return {?}
         */
        function () {
            return (this._parentManager && this._parentManager.plugins) || this.plugins;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @private
     * @return {?}
     */
    PluginManager.prototype.registerHandlers = /**
     * @private
     * @return {?}
     */
    function () {
        var _a;
        /** @type {?} */
        var pluginHandlers = this.getPluginHandlers();
        (_a = this.rootPlugins).push.apply(_a, tslib_1.__spread(pluginHandlers));
    };
    /**
     * @private
     * @return {?}
     */
    PluginManager.prototype.getPluginHandlers = /**
     * @private
     * @return {?}
     */
    function () {
        /** @type {?} */
        var handlers = this._pluginHandlers || [];
        return handlers.map((/**
         * @param {?} plugin
         * @return {?}
         */
        function (plugin) { return (/** @type {?} */ ((plugin.handle ? plugin.handle.bind(plugin) : plugin))); }));
    };
    PluginManager.decorators = [
        { type: Injectable }
    ];
    /** @nocollapse */
    PluginManager.ctorParameters = function () { return [
        { type: PluginManager, decorators: [{ type: Optional }, { type: SkipSelf }] },
        { type: Array, decorators: [{ type: Inject, args: [NGXS_PLUGINS,] }, { type: Optional }] }
    ]; };
    return PluginManager;
}());
export { PluginManager };
if (false) {
    /** @type {?} */
    PluginManager.prototype.plugins;
    /**
     * @type {?}
     * @private
     */
    PluginManager.prototype._parentManager;
    /**
     * @type {?}
     * @private
     */
    PluginManager.prototype._pluginHandlers;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGx1Z2luLW1hbmFnZXIuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9Abmd4cy9zdG9yZS8iLCJzb3VyY2VzIjpbInNyYy9wbHVnaW4tbWFuYWdlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDdkUsT0FBTyxFQUFFLFlBQVksRUFBNEIsTUFBTSxXQUFXLENBQUM7QUFFbkU7SUFJRSx1QkFHVSxjQUE2QixFQUc3QixlQUE2QjtRQUg3QixtQkFBYyxHQUFkLGNBQWMsQ0FBZTtRQUc3QixvQkFBZSxHQUFmLGVBQWUsQ0FBYztRQVJoQyxZQUFPLEdBQW1CLEVBQUUsQ0FBQztRQVVsQyxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztJQUMxQixDQUFDO0lBRUQsc0JBQVksc0NBQVc7Ozs7O1FBQXZCO1lBQ0UsT0FBTyxDQUFDLElBQUksQ0FBQyxjQUFjLElBQUksSUFBSSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDO1FBQzlFLENBQUM7OztPQUFBOzs7OztJQUVPLHdDQUFnQjs7OztJQUF4Qjs7O1lBQ1EsY0FBYyxHQUFtQixJQUFJLENBQUMsaUJBQWlCLEVBQUU7UUFDL0QsQ0FBQSxLQUFBLElBQUksQ0FBQyxXQUFXLENBQUEsQ0FBQyxJQUFJLDRCQUFJLGNBQWMsR0FBRTtJQUMzQyxDQUFDOzs7OztJQUVPLHlDQUFpQjs7OztJQUF6Qjs7WUFDUSxRQUFRLEdBQWlCLElBQUksQ0FBQyxlQUFlLElBQUksRUFBRTtRQUN6RCxPQUFPLFFBQVEsQ0FBQyxHQUFHOzs7O1FBQ2pCLFVBQUMsTUFBa0IsV0FDakIsbUJBQUEsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLEVBQWdCLEdBQUEsRUFDeEUsQ0FBQztJQUNKLENBQUM7O2dCQTlCRixVQUFVOzs7O2dCQU9pQixhQUFhLHVCQUZwQyxRQUFRLFlBQ1IsUUFBUTs0Q0FFUixNQUFNLFNBQUMsWUFBWSxjQUNuQixRQUFROztJQXNCYixvQkFBQztDQUFBLEFBL0JELElBK0JDO1NBOUJZLGFBQWE7OztJQUN4QixnQ0FBb0M7Ozs7O0lBR2xDLHVDQUVxQzs7Ozs7SUFDckMsd0NBRXFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0LCBJbmplY3RhYmxlLCBPcHRpb25hbCwgU2tpcFNlbGYgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE5HWFNfUExVR0lOUywgTmd4c1BsdWdpbiwgTmd4c1BsdWdpbkZuIH0gZnJvbSAnLi9zeW1ib2xzJztcblxuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIFBsdWdpbk1hbmFnZXIge1xuICBwdWJsaWMgcGx1Z2luczogTmd4c1BsdWdpbkZuW10gPSBbXTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBAT3B0aW9uYWwoKVxuICAgIEBTa2lwU2VsZigpXG4gICAgcHJpdmF0ZSBfcGFyZW50TWFuYWdlcjogUGx1Z2luTWFuYWdlcixcbiAgICBASW5qZWN0KE5HWFNfUExVR0lOUylcbiAgICBAT3B0aW9uYWwoKVxuICAgIHByaXZhdGUgX3BsdWdpbkhhbmRsZXJzOiBOZ3hzUGx1Z2luW11cbiAgKSB7XG4gICAgdGhpcy5yZWdpc3RlckhhbmRsZXJzKCk7XG4gIH1cblxuICBwcml2YXRlIGdldCByb290UGx1Z2lucygpOiBOZ3hzUGx1Z2luRm5bXSB7XG4gICAgcmV0dXJuICh0aGlzLl9wYXJlbnRNYW5hZ2VyICYmIHRoaXMuX3BhcmVudE1hbmFnZXIucGx1Z2lucykgfHwgdGhpcy5wbHVnaW5zO1xuICB9XG5cbiAgcHJpdmF0ZSByZWdpc3RlckhhbmRsZXJzKCk6IHZvaWQge1xuICAgIGNvbnN0IHBsdWdpbkhhbmRsZXJzOiBOZ3hzUGx1Z2luRm5bXSA9IHRoaXMuZ2V0UGx1Z2luSGFuZGxlcnMoKTtcbiAgICB0aGlzLnJvb3RQbHVnaW5zLnB1c2goLi4ucGx1Z2luSGFuZGxlcnMpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRQbHVnaW5IYW5kbGVycygpOiBOZ3hzUGx1Z2luRm5bXSB7XG4gICAgY29uc3QgaGFuZGxlcnM6IE5neHNQbHVnaW5bXSA9IHRoaXMuX3BsdWdpbkhhbmRsZXJzIHx8IFtdO1xuICAgIHJldHVybiBoYW5kbGVycy5tYXAoXG4gICAgICAocGx1Z2luOiBOZ3hzUGx1Z2luKSA9PlxuICAgICAgICAocGx1Z2luLmhhbmRsZSA/IHBsdWdpbi5oYW5kbGUuYmluZChwbHVnaW4pIDogcGx1Z2luKSBhcyBOZ3hzUGx1Z2luRm5cbiAgICApO1xuICB9XG59XG4iXX0=