{"version":3,"file":"ngxs-store.js","sources":["ng://@ngxs/store/src/configs/messages.config.ts","ng://@ngxs/store/src/execution/dispatch-outside-zone-ngxs-execution-strategy.ts","ng://@ngxs/store/src/symbols.ts","ng://@ngxs/store/src/execution/symbols.ts","ng://@ngxs/store/src/utils/utils.ts","ng://@ngxs/store/src/internal/internals.ts","ng://@ngxs/store/src/operators/of-action.ts","ng://@ngxs/store/src/operators/leave-ngxs.ts","ng://@ngxs/store/src/execution/internal-ngxs-execution-strategy.ts","ng://@ngxs/store/src/actions-stream.ts","ng://@ngxs/store/src/utils/compose.ts","ng://@ngxs/store/src/internal/state-stream.ts","ng://@ngxs/store/src/plugin-manager.ts","ng://@ngxs/store/src/internal/dispatcher.ts","ng://@ngxs/store/src/utils/freeze.ts","ng://@ngxs/store/src/internal/state-operations.ts","ng://@ngxs/store/src/internal/state-operators.ts","ng://@ngxs/store/src/internal/state-context-factory.ts","ng://@ngxs/store/src/utils/store-validators.ts","ng://@ngxs/store/src/internal/state-factory.ts","ng://@ngxs/store/src/internal/lifecycle-state-manager.ts","ng://@ngxs/store/src/utils/selector-utils.ts","ng://@ngxs/store/src/store.ts","ng://@ngxs/store/src/decorators/select/select-factory.ts","ng://@ngxs/store/src/actions/actions.ts","ng://@ngxs/store/src/modules/ngxs-root.module.ts","ng://@ngxs/store/src/modules/ngxs-feature.module.ts","ng://@ngxs/store/src/module.ts","ng://@ngxs/store/src/decorators/action.ts","ng://@ngxs/store/src/ivy/ivy-enabled-in-dev-mode.ts","ng://@ngxs/store/src/decorators/state.ts","ng://@ngxs/store/src/decorators/select/symbols.ts","ng://@ngxs/store/src/decorators/select/select.ts","ng://@ngxs/store/src/decorators/selector-options.ts","ng://@ngxs/store/src/public_to_deprecate.ts","ng://@ngxs/store/src/decorators/selector/selector.ts","ng://@ngxs/store/src/execution/noop-ngxs-execution-strategy.ts","ng://@ngxs/store/src/state-token/state-token.ts"],"sourcesContent":["export function throwStateNameError(name: string): never {\n  throw new Error(\n    `${name} is not a valid state name. It needs to be a valid object property name.`\n  );\n}\n\nexport function throwStateNamePropertyError(): never {\n  throw new Error(`States must register a 'name' property.`);\n}\n\nexport function throwStateUniqueError(\n  current: string,\n  newName: string,\n  oldName: string\n): never {\n  throw new Error(`State name '${current}' from ${newName} already exists in ${oldName}.`);\n}\n\nexport function throwStateDecoratorError(name: string): never {\n  throw new Error(`States must be decorated with @State() decorator, but \"${name}\" isn't.`);\n}\n\nexport function throwActionDecoratorError(): never {\n  throw new Error('@Action() decorator cannot be used with static methods.');\n}\n\nexport function throwSelectorDecoratorError(): never {\n  throw new Error('Selectors only work on methods.');\n}\n\nexport function getZoneWarningMessage(): string {\n  return (\n    'Your application was bootstrapped with nooped zone and your execution strategy requires an actual NgZone!\\n' +\n    'Please set the value of the executionStrategy property to NoopNgxsExecutionStrategy.\\n' +\n    'NgxsModule.forRoot(states, { executionStrategy: NoopNgxsExecutionStrategy })'\n  );\n}\n\nexport function getUndecoratedStateInIvyWarningMessage(name: string): string {\n  return `'${name}' class should be decorated with @Injectable() right after the @State() decorator`;\n}\n\nexport function throwSelectFactoryNotConnectedError(): never {\n  throw new Error('You have forgotten to import the NGXS module!');\n}\n\nexport function throwPatchingArrayError(): never {\n  throw new Error('Patching arrays is not supported.');\n}\n\nexport function throwPatchingPrimitiveError(): never {\n  throw new Error('Patching primitives is not supported.');\n}\n","import { Inject, Injectable, NgZone, PLATFORM_ID } from '@angular/core';\nimport { isPlatformServer } from '@angular/common';\n\nimport { NgxsExecutionStrategy } from './symbols';\nimport { getZoneWarningMessage } from '../configs/messages.config';\n\n@Injectable()\nexport class DispatchOutsideZoneNgxsExecutionStrategy implements NgxsExecutionStrategy {\n  constructor(private _ngZone: NgZone, @Inject(PLATFORM_ID) private _platformId: string) {\n    // Caretaker note: we have still left the `typeof` condition in order to avoid\n    // creating a breaking change for projects that still use the View Engine.\n    if (typeof ngDevMode === 'undefined' || ngDevMode) {\n      verifyZoneIsNotNooped(_ngZone);\n    }\n  }\n\n  enter<T>(func: () => T): T {\n    if (isPlatformServer(this._platformId)) {\n      return this.runInsideAngular(func);\n    }\n    return this.runOutsideAngular(func);\n  }\n\n  leave<T>(func: () => T): T {\n    return this.runInsideAngular(func);\n  }\n\n  private runInsideAngular<T>(func: () => T): T {\n    if (NgZone.isInAngularZone()) {\n      return func();\n    }\n    return this._ngZone.run(func);\n  }\n\n  private runOutsideAngular<T>(func: () => T): T {\n    if (NgZone.isInAngularZone()) {\n      return this._ngZone.runOutsideAngular(func);\n    }\n    return func();\n  }\n}\n\n// Caretaker note: this should exist as a separate function and not a class method,\n// since class methods are not tree-shakable.\nfunction verifyZoneIsNotNooped(ngZone: NgZone): void {\n  // `NoopNgZone` is not exposed publicly as it doesn't expect\n  // to be used outside of the core Angular code, thus we just have\n  // to check if the zone doesn't extend or instanceof `NgZone`.\n  if (ngZone instanceof NgZone) {\n    return;\n  }\n\n  console.warn(getZoneWarningMessage());\n}\n","import { Injectable, InjectionToken, Type } from '@angular/core';\nimport { Observable } from 'rxjs';\n\nimport { PlainObject, StateClass } from '@ngxs/store/internals';\nimport { SharedSelectorOptions } from './internal/internals';\nimport { NgxsExecutionStrategy } from './execution/symbols';\nimport { DispatchOutsideZoneNgxsExecutionStrategy } from './execution/dispatch-outside-zone-ngxs-execution-strategy';\nimport { StateToken } from './state-token/state-token';\n\nexport const ROOT_STATE_TOKEN = new InjectionToken<any>('ROOT_STATE_TOKEN');\nexport const FEATURE_STATE_TOKEN = new InjectionToken<any>('FEATURE_STATE_TOKEN');\nexport const NGXS_PLUGINS = new InjectionToken('NGXS_PLUGINS');\n\nexport const META_KEY = 'NGXS_META';\nexport const META_OPTIONS_KEY = 'NGXS_OPTIONS_META';\nexport const SELECTOR_META_KEY = 'NGXS_SELECTOR_META';\n\nexport type NgxsLifeCycle = Partial<NgxsOnChanges> &\n  Partial<NgxsOnInit> &\n  Partial<NgxsAfterBootstrap>;\n\nexport type NgxsPluginFn = (state: any, mutation: any, next: NgxsNextPluginFn) => any;\n\n/**\n * The NGXS config settings.\n */\n@Injectable()\nexport class NgxsConfig {\n  /**\n   * Run in development mode. This will add additional debugging features:\n   * - Object.freeze on the state and actions to guarantee immutability\n   * (default: false)\n   */\n  developmentMode: boolean;\n  compatibility: {\n    /**\n     * Support a strict Content Security Policy.\n     * This will circumvent some optimisations that violate a strict CSP through the use of `new Function(...)`.\n     * (default: false)\n     */\n    strictContentSecurityPolicy: boolean;\n  };\n  /**\n   * Determines the execution context to perform async operations inside. An implementation can be\n   * provided to override the default behaviour where the async operations are run\n   * outside Angular's zone but all observable behaviours of NGXS are run back inside Angular's zone.\n   * These observable behaviours are from:\n   *   `@Select(...)`, `store.select(...)`, `actions.subscribe(...)` or `store.dispatch(...).subscribe(...)`\n   * Every `zone.run` causes Angular to run change detection on the whole tree (`app.tick()`) so of your\n   * application doesn't rely on zone.js running change detection then you can switch to the\n   * `NoopNgxsExecutionStrategy` that doesn't interact with zones.\n   * (default: null)\n   */\n  executionStrategy: Type<NgxsExecutionStrategy>;\n  /**\n   * Defining the default state before module initialization\n   * This is convenient if we need to create a define our own set of states.\n   * @deprecated will be removed after v4\n   * (default: {})\n   */\n  defaultsState: PlainObject = {};\n  /**\n   * Defining shared selector options\n   */\n  selectorOptions: SharedSelectorOptions = {\n    injectContainerState: true, // TODO: default is true in v3, will change in v4\n    suppressErrors: true // TODO: default is true in v3, will change in v4\n  };\n\n  constructor() {\n    this.compatibility = {\n      strictContentSecurityPolicy: false\n    };\n    this.executionStrategy = DispatchOutsideZoneNgxsExecutionStrategy;\n  }\n}\n\nexport type StateOperator<T> = (existing: Readonly<T>) => T;\n\n/**\n * State context provided to the actions in the state.\n */\nexport interface StateContext<T> {\n  /**\n   * Get the current state.\n   */\n  getState(): T;\n\n  /**\n   * Reset the state to a new value.\n   */\n  setState(val: T | StateOperator<T>): T;\n\n  /**\n   * Patch the existing state with the provided value.\n   */\n  patchState(val: Partial<T>): T;\n\n  /**\n   * Dispatch a new action and return the dispatched observable.\n   */\n  dispatch(actions: any | any[]): Observable<void>;\n}\n\nexport type NgxsNextPluginFn = (state: any, mutation: any) => any;\n\n/**\n * Plugin interface\n */\nexport interface NgxsPlugin {\n  /**\n   * Handle the state/action before its submitted to the state handlers.\n   */\n  handle(state: any, action: any, next: NgxsNextPluginFn): any;\n}\n\n/**\n * Options that can be provided to the store.\n */\nexport interface StoreOptions<T> {\n  /**\n   * Name of the state. Required.\n   */\n  name: string | StateToken<T>;\n\n  /**\n   * Default values for the state. If not provided, uses empty object.\n   */\n  defaults?: T;\n\n  /**\n   * Sub states for the given state.\n   */\n  children?: StateClass[];\n}\n\n/**\n * Represents a basic change from a previous to a new value for a single state instance.\n * Passed as a value in a NgxsSimpleChanges object to the ngxsOnChanges hook.\n */\nexport class NgxsSimpleChange<T = any> {\n  constructor(\n    public readonly previousValue: T,\n    public readonly currentValue: T,\n    public readonly firstChange: boolean\n  ) {}\n}\n\n/**\n * On init interface\n */\nexport interface NgxsOnInit {\n  ngxsOnInit(ctx?: StateContext<any>): void | any;\n}\n\n/**\n * On change interface\n */\nexport interface NgxsOnChanges {\n  ngxsOnChanges(change: NgxsSimpleChange): void;\n}\n\n/**\n * After bootstrap interface\n */\nexport interface NgxsAfterBootstrap {\n  ngxsAfterBootstrap(ctx?: StateContext<any>): void;\n}\n\nexport type NgxsModuleOptions = Partial<NgxsConfig>;\n\n/** @internal */\ndeclare global {\n  const ngDevMode: boolean;\n}\n","import { InjectionToken } from '@angular/core';\n\n/*\n * Internal execution strategy injection token\n */\nexport const NGXS_EXECUTION_STRATEGY = new InjectionToken<NgxsExecutionStrategy>(\n  'NGXS_EXECUTION_STRATEGY'\n);\n\n/*\n * Execution strategy interface\n */\nexport interface NgxsExecutionStrategy {\n  enter<T>(func: () => T): T;\n  leave<T>(func: () => T): T;\n}\n","/**\n * Returns the type from an action instance/class.\n * @ignore\n */\nexport function getActionTypeFromInstance(action: any): string | undefined {\n  if (action.constructor && action.constructor.type) {\n    return action.constructor.type;\n  } else {\n    return action.type;\n  }\n}\n\n/**\n * Matches a action\n * @ignore\n */\nexport function actionMatcher(action1: any) {\n  const type1 = getActionTypeFromInstance(action1);\n\n  return function(action2: any) {\n    return type1 === getActionTypeFromInstance(action2);\n  };\n}\n\n/**\n * Set a deeply nested value. Example:\n *\n *   setValue({ foo: { bar: { eat: false } } },\n *      'foo.bar.eat', true) //=> { foo: { bar: { eat: true } } }\n *\n * While it traverses it also creates new objects from top down.\n *\n * @ignore\n */\nexport const setValue = (obj: any, prop: string, val: any) => {\n  obj = { ...obj };\n\n  const split = prop.split('.');\n  const lastIndex = split.length - 1;\n\n  split.reduce((acc, part, index) => {\n    if (index === lastIndex) {\n      acc[part] = val;\n    } else {\n      acc[part] = Array.isArray(acc[part]) ? acc[part].slice() : { ...acc[part] };\n    }\n\n    return acc && acc[part];\n  }, obj);\n\n  return obj;\n};\n\n/**\n * Get a deeply nested value. Example:\n *\n *    getValue({ foo: bar: [] }, 'foo.bar') //=> []\n *\n * @ignore\n */\nexport const getValue = (obj: any, prop: string): any =>\n  prop.split('.').reduce((acc: any, part: string) => acc && acc[part], obj);\n\n/**\n * Simple object check.\n *\n *    isObject({a:1}) //=> true\n *    isObject(1) //=> false\n *\n * @ignore\n */\nexport const isObject = (item: any) => {\n  return item && typeof item === 'object' && !Array.isArray(item);\n};\n\n/**\n * Deep merge two objects.\n *\n *    mergeDeep({a:1, b:{x: 1, y:2}}, {b:{x: 3}, c:4}) //=> {a:1, b:{x:3, y:2}, c:4}\n *\n * @param base base object onto which `sources` will be applied\n */\nexport const mergeDeep = (base: any, ...sources: any[]): any => {\n  if (!sources.length) return base;\n  const source = sources.shift();\n\n  if (isObject(base) && isObject(source)) {\n    for (const key in source) {\n      if (isObject(source[key])) {\n        if (!base[key]) Object.assign(base, { [key]: {} });\n        mergeDeep(base[key], source[key]);\n      } else {\n        Object.assign(base, { [key]: source[key] });\n      }\n    }\n  }\n\n  return mergeDeep(base, ...sources);\n};\n","import { PlainObjectOf, StateClass } from '@ngxs/store/internals';\nimport { Observable } from 'rxjs';\n\nimport {\n  META_KEY,\n  META_OPTIONS_KEY,\n  NgxsConfig,\n  NgxsSimpleChange,\n  SELECTOR_META_KEY,\n  StoreOptions\n} from '../symbols';\nimport { ActionHandlerMetaData } from '../actions/symbols';\nimport { getValue } from '../utils/utils';\n\n// inspired from https://stackoverflow.com/a/43674389\nexport interface StateClassInternal<T = any, U = any> extends StateClass<T> {\n  [META_KEY]?: MetaDataModel;\n  [META_OPTIONS_KEY]?: StoreOptions<U>;\n}\n\nexport type StateKeyGraph = PlainObjectOf<string[]>;\nexport type StatesByName = PlainObjectOf<StateClassInternal>;\n\nexport interface StateOperations<T> {\n  getState(): T;\n\n  setState(val: T): T;\n\n  dispatch(actionOrActions: any | any[]): Observable<void>;\n}\n\nexport interface MetaDataModel {\n  name: string | null;\n  actions: PlainObjectOf<ActionHandlerMetaData[]>;\n  defaults: any;\n  path: string | null;\n  makeRootSelector: SelectorFactory | null;\n  children?: StateClassInternal[];\n}\n\nexport interface RuntimeSelectorContext {\n  getStateGetter(key: any): (state: any) => any;\n  getSelectorOptions(localOptions?: SharedSelectorOptions): SharedSelectorOptions;\n}\n\nexport type SelectFromRootState = (rootState: any) => any;\nexport type SelectorFactory = (runtimeContext: RuntimeSelectorContext) => SelectFromRootState;\n\nexport interface SharedSelectorOptions {\n  injectContainerState?: boolean;\n  suppressErrors?: boolean;\n}\n\nexport interface SelectorMetaDataModel {\n  makeRootSelector: SelectorFactory | null;\n  originalFn: Function | null;\n  containerClass: any;\n  selectorName: string | null;\n  getSelectorOptions: () => SharedSelectorOptions;\n}\n\nexport interface MappedStore {\n  name: string;\n  isInitialised: boolean;\n  actions: PlainObjectOf<ActionHandlerMetaData[]>;\n  defaults: any;\n  instance: any;\n  path: string;\n}\n\nexport interface StatesAndDefaults {\n  defaults: any;\n  states: MappedStore[];\n}\n\nexport interface RootStateDiff<T> {\n  currentAppState: T;\n  newAppState: T;\n}\n\n/**\n * Ensures metadata is attached to the class and returns it.\n *\n * @ignore\n */\nexport function ensureStoreMetadata(target: StateClassInternal): MetaDataModel {\n  if (!target.hasOwnProperty(META_KEY)) {\n    const defaultMetadata: MetaDataModel = {\n      name: null,\n      actions: {},\n      defaults: {},\n      path: null,\n      makeRootSelector(context: RuntimeSelectorContext) {\n        return context.getStateGetter(defaultMetadata.name);\n      },\n      children: []\n    };\n\n    Object.defineProperty(target, META_KEY, { value: defaultMetadata });\n  }\n  return getStoreMetadata(target);\n}\n\n/**\n * Get the metadata attached to the state class if it exists.\n *\n * @ignore\n */\nexport function getStoreMetadata(target: StateClassInternal): MetaDataModel {\n  return target[META_KEY]!;\n}\n\n/**\n * Ensures metadata is attached to the selector and returns it.\n *\n * @ignore\n */\nexport function ensureSelectorMetadata(target: Function): SelectorMetaDataModel {\n  if (!target.hasOwnProperty(SELECTOR_META_KEY)) {\n    const defaultMetadata: SelectorMetaDataModel = {\n      makeRootSelector: null,\n      originalFn: null,\n      containerClass: null,\n      selectorName: null,\n      getSelectorOptions: () => ({})\n    };\n\n    Object.defineProperty(target, SELECTOR_META_KEY, { value: defaultMetadata });\n  }\n\n  return getSelectorMetadata(target);\n}\n\n/**\n * Get the metadata attached to the selector if it exists.\n *\n * @ignore\n */\nexport function getSelectorMetadata(target: any): SelectorMetaDataModel {\n  return target[SELECTOR_META_KEY];\n}\n\n/**\n * Get a deeply nested value. Example:\n *\n *    getValue({ foo: bar: [] }, 'foo.bar') //=> []\n *\n * Note: This is not as fast as the `fastPropGetter` but is strict Content Security Policy compliant.\n * See perf hit: https://jsperf.com/fast-value-getter-given-path/1\n *\n * @ignore\n */\nfunction compliantPropGetter(paths: string[]): (x: any) => any {\n  const copyOfPaths = paths.slice();\n  return obj => copyOfPaths.reduce((acc: any, part: string) => acc && acc[part], obj);\n}\n\n/**\n * The generated function is faster than:\n * - pluck (Observable operator)\n * - memoize\n *\n * @ignore\n */\nfunction fastPropGetter(paths: string[]): (x: any) => any {\n  const segments = paths;\n  let seg = 'store.' + segments[0];\n  let i = 0;\n  const l = segments.length;\n\n  let expr = seg;\n  while (++i < l) {\n    expr = expr + ' && ' + (seg = seg + '.' + segments[i]);\n  }\n\n  const fn = new Function('store', 'return ' + expr + ';');\n\n  return <(x: any) => any>fn;\n}\n\n/**\n * Get a deeply nested value. Example:\n *\n *    getValue({ foo: bar: [] }, 'foo.bar') //=> []\n *\n * @ignore\n */\nexport function propGetter(paths: string[], config: NgxsConfig) {\n  if (config && config.compatibility && config.compatibility.strictContentSecurityPolicy) {\n    return compliantPropGetter(paths);\n  } else {\n    return fastPropGetter(paths);\n  }\n}\n\n/**\n * Given an array of states, it will return a object graph. Example:\n *    const states = [\n *      Cart,\n *      CartSaved,\n *      CartSavedItems\n *    ]\n *\n * would return:\n *\n *  const graph = {\n *    cart: ['saved'],\n *    saved: ['items'],\n *    items: []\n *  };\n *\n * @ignore\n */\nexport function buildGraph(stateClasses: StateClassInternal[]): StateKeyGraph {\n  const findName = (stateClass: StateClassInternal) => {\n    const meta = stateClasses.find(g => g === stateClass);\n\n    // Caretaker note: we have still left the `typeof` condition in order to avoid\n    // creating a breaking change for projects that still use the View Engine.\n    if ((typeof ngDevMode === 'undefined' || ngDevMode) && !meta) {\n      throw new Error(\n        `Child state not found: ${stateClass}. \\r\\nYou may have forgotten to add states to module`\n      );\n    }\n\n    return meta![META_KEY]!.name!;\n  };\n\n  return stateClasses.reduce<StateKeyGraph>(\n    (result: StateKeyGraph, stateClass: StateClassInternal) => {\n      const { name, children } = stateClass[META_KEY]!;\n      result[name!] = (children || []).map(findName);\n      return result;\n    },\n    {}\n  );\n}\n\n/**\n * Given a states array, returns object graph\n * returning the name and state metadata. Example:\n *\n *  const graph = {\n *    cart: { metadata }\n *  };\n *\n * @ignore\n */\nexport function nameToState(states: StateClassInternal[]): PlainObjectOf<StateClassInternal> {\n  return states.reduce<PlainObjectOf<StateClassInternal>>(\n    (result: PlainObjectOf<StateClassInternal>, stateClass: StateClassInternal) => {\n      const meta = stateClass[META_KEY]!;\n      result[meta.name!] = stateClass;\n      return result;\n    },\n    {}\n  );\n}\n\n/**\n * Given a object relationship graph will return the full path\n * for the child items. Example:\n *\n *  const graph = {\n *    cart: ['saved'],\n *    saved: ['items'],\n *    items: []\n *  };\n *\n * would return:\n *\n *  const r = {\n *    cart: 'cart',\n *    saved: 'cart.saved',\n *    items: 'cart.saved.items'\n *  };\n *\n * @ignore\n */\nexport function findFullParentPath(\n  obj: StateKeyGraph,\n  newObj: PlainObjectOf<string> = {}\n): PlainObjectOf<string> {\n  const visit = (child: StateKeyGraph, keyToFind: string): string | null => {\n    for (const key in child) {\n      if (child.hasOwnProperty(key) && child[key].indexOf(keyToFind) >= 0) {\n        const parent = visit(child, key);\n        return parent !== null ? `${parent}.${key}` : key;\n      }\n    }\n    return null;\n  };\n\n  for (const key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      const parent = visit(obj, key);\n      newObj[key] = parent ? `${parent}.${key}` : key;\n    }\n  }\n\n  return newObj;\n}\n\n/**\n * Given a object graph, it will return the items topologically sorted Example:\n *\n *  const graph = {\n *    cart: ['saved'],\n *    saved: ['items'],\n *    items: []\n *  };\n *\n * would return:\n *\n *  const results = [\n *    'items',\n *    'saved',\n *    'cart'\n *  ];\n *\n * @ignore\n */\nexport function topologicalSort(graph: StateKeyGraph): string[] {\n  const sorted: string[] = [];\n  const visited: PlainObjectOf<boolean> = {};\n\n  const visit = (name: string, ancestors: string[] = []) => {\n    if (!Array.isArray(ancestors)) {\n      ancestors = [];\n    }\n\n    ancestors.push(name);\n    visited[name] = true;\n\n    graph[name].forEach((dep: string) => {\n      // Caretaker note: we have still left the `typeof` condition in order to avoid\n      // creating a breaking change for projects that still use the View Engine.\n      if ((typeof ngDevMode === 'undefined' || ngDevMode) && ancestors.indexOf(dep) >= 0) {\n        throw new Error(\n          `Circular dependency '${dep}' is required by '${name}': ${ancestors.join(' -> ')}`\n        );\n      }\n\n      if (visited[dep]) {\n        return;\n      }\n\n      visit(dep, ancestors.slice(0));\n    });\n\n    if (sorted.indexOf(name) < 0) {\n      sorted.push(name);\n    }\n  };\n\n  Object.keys(graph).forEach(k => visit(k));\n\n  return sorted.reverse();\n}\n\n/**\n * Returns if the parameter is a object or not.\n *\n * @ignore\n */\nexport function isObject(obj: any) {\n  return (typeof obj === 'object' && obj !== null) || typeof obj === 'function';\n}\n\nexport function getStateDiffChanges<T>(\n  mappedStore: MappedStore,\n  diff: RootStateDiff<T>\n): NgxsSimpleChange {\n  const previousValue: T = getValue(diff.currentAppState, mappedStore.path);\n  const currentValue: T = getValue(diff.newAppState, mappedStore.path);\n  return new NgxsSimpleChange(previousValue, currentValue, !mappedStore.isInitialised);\n}\n","import { OperatorFunction, Observable } from 'rxjs';\nimport { map, filter } from 'rxjs/operators';\n\nimport { ActionType } from '../actions/symbols';\nimport { getActionTypeFromInstance } from '../utils/utils';\nimport { ActionContext, ActionStatus } from '../actions-stream';\n\nexport interface ActionCompletion<T = any, E = Error> {\n  action: T;\n  result: {\n    successful: boolean;\n    canceled: boolean;\n    error?: E;\n  };\n}\n\nexport function ofAction<T = any>(allowedType: ActionType): OperatorFunction<ActionContext, T>;\nexport function ofAction<T = any>(\n  ...allowedTypes: ActionType[]\n): OperatorFunction<ActionContext, T>;\n\n/**\n * RxJS operator for selecting out specific actions.\n *\n * This will grab actions that have just been dispatched as well as actions that have completed\n */\nexport function ofAction(...allowedTypes: ActionType[]): OperatorFunction<ActionContext, any> {\n  return ofActionOperator(allowedTypes);\n}\n\n/**\n * RxJS operator for selecting out specific actions.\n *\n * This will ONLY grab actions that have just been dispatched\n */\nexport function ofActionDispatched(\n  ...allowedTypes: ActionType[]\n): OperatorFunction<ActionContext, any> {\n  return ofActionOperator(allowedTypes, [ActionStatus.Dispatched]);\n}\n\n/**\n * RxJS operator for selecting out specific actions.\n *\n * This will ONLY grab actions that have just been successfully completed\n */\nexport function ofActionSuccessful(\n  ...allowedTypes: ActionType[]\n): OperatorFunction<ActionContext, any> {\n  return ofActionOperator(allowedTypes, [ActionStatus.Successful]);\n}\n\n/**\n * RxJS operator for selecting out specific actions.\n *\n * This will ONLY grab actions that have just been canceled\n */\nexport function ofActionCanceled(\n  ...allowedTypes: ActionType[]\n): OperatorFunction<ActionContext, any> {\n  return ofActionOperator(allowedTypes, [ActionStatus.Canceled]);\n}\n\n/**\n * RxJS operator for selecting out specific actions.\n *\n * This will ONLY grab actions that have just been completed\n */\nexport function ofActionCompleted(\n  ...allowedTypes: ActionType[]\n): OperatorFunction<ActionContext, ActionCompletion> {\n  const allowedStatuses = [\n    ActionStatus.Successful,\n    ActionStatus.Canceled,\n    ActionStatus.Errored\n  ];\n  return ofActionOperator(allowedTypes, allowedStatuses, mapActionResult);\n}\n\n/**\n * RxJS operator for selecting out specific actions.\n *\n * This will ONLY grab actions that have just thrown an error\n */\nexport function ofActionErrored(\n  ...allowedTypes: ActionType[]\n): OperatorFunction<ActionContext, any> {\n  return ofActionOperator(allowedTypes, [ActionStatus.Errored]);\n}\n\nfunction ofActionOperator(\n  allowedTypes: ActionType[],\n  statuses?: ActionStatus[],\n  // This actually could've been `OperatorFunction<ActionContext, ActionCompletion | any>`,\n  // since it maps either to `ctx.action` OR to `ActionCompletion`. But `ActionCompleteion | any`\n  // defaults to `any`, thus there is no sense from union type.\n  mapOperator: () => OperatorFunction<ActionContext, any> = mapAction\n): OperatorFunction<ActionContext, any> {\n  const allowedMap = createAllowedActionTypesMap(allowedTypes);\n  const allowedStatusMap = statuses && createAllowedStatusesMap(statuses);\n  return function(o: Observable<ActionContext>) {\n    return o.pipe(filterStatus(allowedMap, allowedStatusMap), mapOperator());\n  };\n}\n\nfunction filterStatus(allowedTypes: FilterMap, allowedStatuses?: FilterMap) {\n  return filter((ctx: ActionContext) => {\n    const actionType = getActionTypeFromInstance(ctx.action)!;\n    const typeMatch = allowedTypes[actionType];\n    const statusMatch = allowedStatuses ? allowedStatuses[ctx.status] : true;\n    return typeMatch && statusMatch;\n  });\n}\n\nfunction mapActionResult(): OperatorFunction<ActionContext, ActionCompletion> {\n  return map(({ action, status, error }: ActionContext) => {\n    return <ActionCompletion>{\n      action,\n      result: {\n        successful: ActionStatus.Successful === status,\n        canceled: ActionStatus.Canceled === status,\n        error\n      }\n    };\n  });\n}\n\nfunction mapAction<T = any>(): OperatorFunction<ActionContext, T> {\n  return map((ctx: ActionContext) => <T>ctx.action);\n}\n\ninterface FilterMap {\n  [key: string]: boolean;\n}\n\nfunction createAllowedActionTypesMap(types: ActionType[]): FilterMap {\n  return types.reduce((filterMap: FilterMap, klass: any) => {\n    filterMap[getActionTypeFromInstance(klass)!] = true;\n    return filterMap;\n  }, <FilterMap>{});\n}\n\nfunction createAllowedStatusesMap(statuses: ActionStatus[]): FilterMap {\n  return statuses.reduce((filterMap: FilterMap, status: ActionStatus) => {\n    filterMap[status] = true;\n    return filterMap;\n  }, <FilterMap>{});\n}\n","import { MonoTypeOperatorFunction, Observable, Observer } from 'rxjs';\nimport { NgxsExecutionStrategy } from '../execution/symbols';\n\n/**\n * Returns operator that will run\n * `subscribe` outside of the ngxs execution context\n */\nexport function leaveNgxs<T>(\n  ngxsExecutionStrategy: NgxsExecutionStrategy\n): MonoTypeOperatorFunction<T> {\n  return (source: Observable<T>) => {\n    return new Observable((sink: Observer<T>) => {\n      return source.subscribe({\n        next(value) {\n          ngxsExecutionStrategy.leave(() => sink.next(value));\n        },\n        error(error) {\n          ngxsExecutionStrategy.leave(() => sink.error(error));\n        },\n        complete() {\n          ngxsExecutionStrategy.leave(() => sink.complete());\n        }\n      });\n    });\n  };\n}\n","import { Injectable, Inject } from '@angular/core';\n\nimport { NgxsExecutionStrategy, NGXS_EXECUTION_STRATEGY } from './symbols';\n\n@Injectable()\nexport class InternalNgxsExecutionStrategy implements NgxsExecutionStrategy {\n  constructor(\n    @Inject(NGXS_EXECUTION_STRATEGY) private _executionStrategy: NgxsExecutionStrategy\n  ) {}\n\n  enter<T>(func: () => T): T {\n    return this._executionStrategy.enter(func);\n  }\n\n  leave<T>(func: () => T): T {\n    return this._executionStrategy.leave(func);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Subject, Observable } from 'rxjs';\n\nimport { leaveNgxs } from './operators/leave-ngxs';\nimport { InternalNgxsExecutionStrategy } from './execution/internal-ngxs-execution-strategy';\n\n/**\n * Status of a dispatched action\n */\nexport const enum ActionStatus {\n  Dispatched = 'DISPATCHED',\n  Successful = 'SUCCESSFUL',\n  Canceled = 'CANCELED',\n  Errored = 'ERRORED'\n}\n\nexport interface ActionContext<T = any> {\n  status: ActionStatus;\n  action: T;\n  error?: Error;\n}\n\n/**\n * Custom Subject that ensures that subscribers are notified of values in the order that they arrived.\n * A standard Subject does not have this guarantee.\n * For example, given the following code:\n * ```typescript\n *   const subject = new Subject<string>();\n     subject.subscribe(value => {\n       if (value === 'start') subject.next('end');\n     });\n     subject.subscribe(value => { });\n     subject.next('start');\n * ```\n * When `subject` is a standard `Subject<T>` the second subscriber would recieve `end` and then `start`.\n * When `subject` is a `OrderedSubject<T>` the second subscriber would recieve `start` and then `end`.\n */\nexport class OrderedSubject<T> extends Subject<T> {\n  private _itemQueue: T[] = [];\n  private _busyPushingNext = false;\n\n  next(value?: T): void {\n    if (this._busyPushingNext) {\n      this._itemQueue.unshift(value!);\n      return;\n    }\n    this._busyPushingNext = true;\n    super.next(value);\n    while (this._itemQueue.length > 0) {\n      const nextValue = this._itemQueue.pop();\n      super.next(nextValue);\n    }\n    this._busyPushingNext = false;\n  }\n}\n\n/**\n * Internal Action stream that is emitted anytime an action is dispatched.\n */\n@Injectable()\nexport class InternalActions extends OrderedSubject<ActionContext> {}\n\n/**\n * Action stream that is emitted anytime an action is dispatched.\n *\n * You can listen to this in services to react without stores.\n */\n@Injectable()\nexport class Actions extends Observable<ActionContext> {\n  constructor(\n    internalActions$: InternalActions,\n    internalExecutionStrategy: InternalNgxsExecutionStrategy\n  ) {\n    super(observer => {\n      const childSubscription = internalActions$\n        .pipe(leaveNgxs(internalExecutionStrategy))\n        .subscribe({\n          next: ctx => observer.next(ctx),\n          error: error => observer.error(error),\n          complete: () => observer.complete()\n        });\n\n      observer.add(childSubscription);\n    });\n  }\n}\n","export type StateFn = (...args: any[]) => any;\n\n/**\n * Composes a array of functions from left to right. Example:\n *\n *      compose([fn, final])(state, action);\n *\n * then the funcs have a signature like:\n *\n *      function fn (state, action, next) {\n *          console.log('here', state, action, next);\n *          return next(state, action);\n *      }\n *\n *      function final (state, action) {\n *          console.log('here', state, action);\n *          return state;\n *      }\n *\n * the last function should not call `next`.\n *\n * @ignore\n */\nexport const compose = (funcs: StateFn[]) => (...args: any[]) => {\n  const curr = funcs.shift()!;\n  return curr(...args, (...nextArgs: any[]) => compose(funcs)(...nextArgs));\n};\n","import { Injectable } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\n\nimport { PlainObject } from '@ngxs/store/internals';\n\n/**\n * BehaviorSubject of the entire state.\n * @ignore\n */\n@Injectable()\nexport class StateStream extends BehaviorSubject<PlainObject> {\n  constructor() {\n    super({});\n  }\n}\n","import { Inject, Injectable, Optional, SkipSelf } from '@angular/core';\nimport { NGXS_PLUGINS, NgxsPlugin, NgxsPluginFn } from './symbols';\n\n@Injectable()\nexport class PluginManager {\n  public plugins: NgxsPluginFn[] = [];\n\n  constructor(\n    @Optional()\n    @SkipSelf()\n    private _parentManager: PluginManager,\n    @Inject(NGXS_PLUGINS)\n    @Optional()\n    private _pluginHandlers: NgxsPlugin[]\n  ) {\n    this.registerHandlers();\n  }\n\n  private get rootPlugins(): NgxsPluginFn[] {\n    return (this._parentManager && this._parentManager.plugins) || this.plugins;\n  }\n\n  private registerHandlers(): void {\n    const pluginHandlers: NgxsPluginFn[] = this.getPluginHandlers();\n    this.rootPlugins.push(...pluginHandlers);\n  }\n\n  private getPluginHandlers(): NgxsPluginFn[] {\n    const handlers: NgxsPlugin[] = this._pluginHandlers || [];\n    return handlers.map(\n      (plugin: NgxsPlugin) =>\n        (plugin.handle ? plugin.handle.bind(plugin) : plugin) as NgxsPluginFn\n    );\n  }\n}\n","import { ErrorHandler, Injectable, Injector } from '@angular/core';\nimport { EMPTY, forkJoin, Observable, of, Subject, throwError } from 'rxjs';\nimport { exhaustMap, filter, shareReplay, take } from 'rxjs/operators';\n\nimport { compose } from '../utils/compose';\nimport { ActionContext, ActionStatus, InternalActions } from '../actions-stream';\nimport { StateStream } from './state-stream';\nimport { PluginManager } from '../plugin-manager';\nimport { InternalNgxsExecutionStrategy } from '../execution/internal-ngxs-execution-strategy';\nimport { leaveNgxs } from '../operators/leave-ngxs';\nimport { getActionTypeFromInstance } from '../utils/utils';\n\n/**\n * Internal Action result stream that is emitted when an action is completed.\n * This is used as a method of returning the action result to the dispatcher\n * for the observable returned by the dispatch(...) call.\n * The dispatcher then asynchronously pushes the result from this stream onto the main action stream as a result.\n */\n@Injectable()\nexport class InternalDispatchedActionResults extends Subject<ActionContext> {}\n\n@Injectable()\nexport class InternalDispatcher {\n  private _errorHandler: ErrorHandler;\n\n  constructor(\n    private _injector: Injector,\n    private _actions: InternalActions,\n    private _actionResults: InternalDispatchedActionResults,\n    private _pluginManager: PluginManager,\n    private _stateStream: StateStream,\n    private _ngxsExecutionStrategy: InternalNgxsExecutionStrategy\n  ) {}\n\n  /**\n   * Dispatches event(s).\n   */\n  dispatch(actionOrActions: any | any[]): Observable<any> {\n    const result = this._ngxsExecutionStrategy.enter(() =>\n      this.dispatchByEvents(actionOrActions)\n    );\n\n    result.subscribe({\n      error: error =>\n        this._ngxsExecutionStrategy.leave(() => {\n          try {\n            // Retrieve lazily to avoid cyclic dependency exception\n            this._errorHandler = this._errorHandler || this._injector.get(ErrorHandler);\n            this._errorHandler.handleError(error);\n          } catch {}\n        })\n    });\n\n    return result.pipe(leaveNgxs(this._ngxsExecutionStrategy));\n  }\n\n  private dispatchByEvents(actionOrActions: any | any[]): Observable<any> {\n    if (Array.isArray(actionOrActions)) {\n      if (actionOrActions.length === 0) return of(this._stateStream.getValue());\n      return forkJoin(actionOrActions.map(action => this.dispatchSingle(action)));\n    } else {\n      return this.dispatchSingle(actionOrActions);\n    }\n  }\n\n  private dispatchSingle(action: any): Observable<any> {\n    const type: string | undefined = getActionTypeFromInstance(action);\n    if (!type) {\n      const error = new Error(\n        `This action doesn't have a type property: ${action.constructor.name}`\n      );\n      return throwError(error);\n    }\n\n    const prevState = this._stateStream.getValue();\n    const plugins = this._pluginManager.plugins;\n\n    return (compose([\n      ...plugins,\n      (nextState: any, nextAction: any) => {\n        if (nextState !== prevState) {\n          this._stateStream.next(nextState);\n        }\n        const actionResult$ = this.getActionResultStream(nextAction);\n        actionResult$.subscribe(ctx => this._actions.next(ctx));\n        this._actions.next({ action: nextAction, status: ActionStatus.Dispatched });\n        return this.createDispatchObservable(actionResult$);\n      }\n    ])(prevState, action) as Observable<any>).pipe(shareReplay());\n  }\n\n  private getActionResultStream(action: any): Observable<ActionContext> {\n    return this._actionResults.pipe(\n      filter(\n        (ctx: ActionContext) => ctx.action === action && ctx.status !== ActionStatus.Dispatched\n      ),\n      take(1),\n      shareReplay()\n    );\n  }\n\n  private createDispatchObservable(actionResult$: Observable<ActionContext>): Observable<any> {\n    return actionResult$\n      .pipe(\n        exhaustMap((ctx: ActionContext) => {\n          switch (ctx.status) {\n            case ActionStatus.Successful:\n              return of(this._stateStream.getValue());\n            case ActionStatus.Errored:\n              return throwError(ctx.error);\n            default:\n              return EMPTY;\n          }\n        })\n      )\n      .pipe(shareReplay());\n  }\n}\n","/**\n * Object freeze code\n * https://github.com/jsdf/deep-freeze\n */\nexport const deepFreeze = (o: any) => {\n  Object.freeze(o);\n\n  const oIsFunction = typeof o === 'function';\n  const hasOwnProp = Object.prototype.hasOwnProperty;\n\n  Object.getOwnPropertyNames(o).forEach(function(prop) {\n    if (\n      hasOwnProp.call(o, prop) &&\n      (oIsFunction ? prop !== 'caller' && prop !== 'callee' && prop !== 'arguments' : true) &&\n      o[prop] !== null &&\n      (typeof o[prop] === 'object' || typeof o[prop] === 'function') &&\n      !Object.isFrozen(o[prop])\n    ) {\n      deepFreeze(o[prop]);\n    }\n  });\n\n  return o;\n};\n","import { Injectable } from '@angular/core';\n\nimport { StateOperations, StatesAndDefaults } from '../internal/internals';\nimport { InternalDispatcher } from '../internal/dispatcher';\nimport { StateStream } from './state-stream';\nimport { NgxsConfig } from '../symbols';\nimport { deepFreeze } from '../utils/freeze';\n\n/**\n * State Context factory class\n * @ignore\n */\n@Injectable()\nexport class InternalStateOperations {\n  constructor(\n    private _stateStream: StateStream,\n    private _dispatcher: InternalDispatcher,\n    private _config: NgxsConfig\n  ) {}\n\n  /**\n   * Returns the root state operators.\n   */\n  getRootStateOperations(): StateOperations<any> {\n    const rootStateOperations = {\n      getState: () => this._stateStream.getValue(),\n      setState: (newState: any) => this._stateStream.next(newState),\n      dispatch: (actionOrActions: any | any[]) => this._dispatcher.dispatch(actionOrActions)\n    };\n\n    return this._config.developmentMode\n      ? ensureStateAndActionsAreImmutable(rootStateOperations)\n      : rootStateOperations;\n  }\n\n  setStateToTheCurrentWithNew(results: StatesAndDefaults): void {\n    const stateOperations: StateOperations<any> = this.getRootStateOperations();\n\n    // Get our current stream\n    const currentState = stateOperations.getState();\n    // Set the state to the current + new\n    stateOperations.setState({ ...currentState, ...results.defaults });\n  }\n}\n\n// We make it as a separate function and not the class method to tree-shake it in the future.\nfunction ensureStateAndActionsAreImmutable(root: StateOperations<any>): StateOperations<any> {\n  return {\n    getState: () => root.getState(),\n    setState: value => {\n      const frozenValue = deepFreeze(value);\n      return root.setState(frozenValue);\n    },\n    dispatch: actions => {\n      return root.dispatch(actions);\n    }\n  };\n}\n","import {\n  throwPatchingArrayError,\n  throwPatchingPrimitiveError\n} from '../configs/messages.config';\nimport { StateOperator } from '../symbols';\n\nexport function simplePatch<T>(val: Partial<T>): StateOperator<T> {\n  return (existingState: Readonly<T>) => {\n    if (Array.isArray(val)) {\n      throwPatchingArrayError();\n    } else if (typeof val !== 'object') {\n      throwPatchingPrimitiveError();\n    }\n\n    const newState: any = { ...(existingState as any) };\n    for (const key in val) {\n      // deep clone for patch compatibility\n      // noinspection JSUnfilteredForInLoop (IDE)\n      newState[key] = (val as any)[key];\n    }\n\n    return newState as T;\n  };\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\n\nimport { NgxsLifeCycle, NgxsSimpleChange, StateContext, StateOperator } from '../symbols';\nimport { getStateDiffChanges, MappedStore } from '../internal/internals';\nimport { setValue, getValue } from '../utils/utils';\nimport { InternalStateOperations } from '../internal/state-operations';\nimport { simplePatch } from './state-operators';\n\n/**\n * State Context factory class\n * @ignore\n */\n@Injectable()\nexport class StateContextFactory {\n  constructor(private _internalStateOperations: InternalStateOperations) {}\n\n  /**\n   * Create the state context\n   */\n  createStateContext<T>(mappedStore: MappedStore): StateContext<T> {\n    const root = this._internalStateOperations.getRootStateOperations();\n\n    function getState(currentAppState: any): T {\n      return getValue(currentAppState, mappedStore.path);\n    }\n\n    function setStateValue(currentAppState: any, newValue: T): any {\n      const newAppState = setValue(currentAppState, mappedStore.path, newValue);\n      const instance: NgxsLifeCycle = mappedStore.instance;\n\n      if (instance.ngxsOnChanges) {\n        const change: NgxsSimpleChange = getStateDiffChanges<T>(mappedStore, {\n          currentAppState,\n          newAppState\n        });\n\n        instance.ngxsOnChanges(change);\n      }\n\n      root.setState(newAppState);\n      return newAppState;\n      // In doing this refactoring I noticed that there is a 'bug' where the\n      // application state is returned instead of this state slice.\n      // This has worked this way since the beginning see:\n      // https://github.com/ngxs/store/blame/324c667b4b7debd8eb979006c67ca0ae347d88cd/src/state-factory.ts\n      // This needs to be fixed, but is a 'breaking' change.\n      // I will do this fix in a subsequent PR and we can decide how to handle it.\n    }\n\n    function setStateFromOperator(currentAppState: any, stateOperator: StateOperator<T>) {\n      const local = getState(currentAppState);\n      const newValue = stateOperator(local);\n      return setStateValue(currentAppState, newValue);\n    }\n\n    function isStateOperator(value: T | StateOperator<T>): value is StateOperator<T> {\n      return typeof value === 'function';\n    }\n\n    return {\n      getState(): T {\n        const currentAppState = root.getState();\n        return getState(currentAppState);\n      },\n      patchState(val: Partial<T>): T {\n        const currentAppState = root.getState();\n        const patchOperator = simplePatch<T>(val);\n        return setStateFromOperator(currentAppState, patchOperator);\n      },\n      setState(val: T | StateOperator<T>): T {\n        const currentAppState = root.getState();\n        return isStateOperator(val)\n          ? setStateFromOperator(currentAppState, val)\n          : setStateValue(currentAppState, val);\n      },\n      dispatch(actions: any | any[]): Observable<void> {\n        return root.dispatch(actions);\n      }\n    };\n  }\n}\n","import { getStoreMetadata, StateClassInternal, StatesByName } from '../internal/internals';\nimport {\n  throwStateDecoratorError,\n  throwStateNameError,\n  throwStateNamePropertyError,\n  throwStateUniqueError\n} from '../configs/messages.config';\n\nexport abstract class StoreValidators {\n  private static stateNameRegex: RegExp = new RegExp('^[a-zA-Z0-9_]+$');\n\n  static checkThatStateIsNamedCorrectly(name: string | null): void | never {\n    if (!name) {\n      throwStateNamePropertyError();\n    } else if (!this.stateNameRegex.test(name)) {\n      throwStateNameError(name);\n    }\n  }\n\n  static checkThatStateNameIsUnique(\n    stateName: string,\n    state: StateClassInternal,\n    statesByName: StatesByName\n  ): void | never {\n    const existingState = statesByName[stateName];\n    if (existingState && existingState !== state) {\n      throwStateUniqueError(stateName, state.name, existingState.name);\n    }\n  }\n\n  static checkThatStateClassesHaveBeenDecorated(\n    stateClasses: StateClassInternal[]\n  ): void | never {\n    stateClasses.forEach((stateClass: StateClassInternal) => {\n      if (!getStoreMetadata(stateClass)) {\n        throwStateDecoratorError(stateClass.name);\n      }\n    });\n  }\n}\n","import { Injectable, Injector, Optional, SkipSelf, Inject, OnDestroy } from '@angular/core';\nimport { forkJoin, from, Observable, of, throwError, Subscription, Subject } from 'rxjs';\nimport {\n  catchError,\n  defaultIfEmpty,\n  filter,\n  map,\n  mergeMap,\n  shareReplay,\n  takeUntil\n} from 'rxjs/operators';\n\nimport { META_KEY, NgxsConfig } from '../symbols';\nimport {\n  buildGraph,\n  findFullParentPath,\n  isObject,\n  MappedStore,\n  MetaDataModel,\n  nameToState,\n  propGetter,\n  StateClassInternal,\n  StateKeyGraph,\n  StatesAndDefaults,\n  StatesByName,\n  topologicalSort,\n  RuntimeSelectorContext,\n  SharedSelectorOptions,\n  getStoreMetadata\n} from './internals';\nimport { getActionTypeFromInstance, getValue, setValue } from '../utils/utils';\nimport { ofActionDispatched } from '../operators/of-action';\nimport { ActionContext, ActionStatus, InternalActions } from '../actions-stream';\nimport { InternalDispatchedActionResults } from '../internal/dispatcher';\nimport { StateContextFactory } from '../internal/state-context-factory';\nimport { StoreValidators } from '../utils/store-validators';\nimport { INITIAL_STATE_TOKEN, PlainObjectOf, memoize } from '@ngxs/store/internals';\n\n/**\n * State factory class\n * @ignore\n */\n@Injectable()\nexport class StateFactory implements OnDestroy {\n  private _actionsSubscription: Subscription | null = null;\n\n  constructor(\n    private _injector: Injector,\n    private _config: NgxsConfig,\n    @Optional()\n    @SkipSelf()\n    private _parentFactory: StateFactory,\n    private _actions: InternalActions,\n    private _actionResults: InternalDispatchedActionResults,\n    private _stateContextFactory: StateContextFactory,\n    @Optional()\n    @Inject(INITIAL_STATE_TOKEN)\n    private _initialState: any\n  ) {}\n\n  private _states: MappedStore[] = [];\n\n  get states(): MappedStore[] {\n    return this._parentFactory ? this._parentFactory.states : this._states;\n  }\n\n  private _statesByName: StatesByName = {};\n\n  get statesByName(): StatesByName {\n    return this._parentFactory ? this._parentFactory.statesByName : this._statesByName;\n  }\n\n  private _statePaths: PlainObjectOf<string> = {};\n\n  private get statePaths(): PlainObjectOf<string> {\n    return this._parentFactory ? this._parentFactory.statePaths : this._statePaths;\n  }\n\n  getRuntimeSelectorContext = memoize(() => {\n    const stateFactory = this;\n\n    function resolveGetter(key: string) {\n      const path = stateFactory.statePaths[key];\n      return path ? propGetter(path.split('.'), stateFactory._config) : null;\n    }\n\n    const context: RuntimeSelectorContext = this._parentFactory\n      ? this._parentFactory.getRuntimeSelectorContext()\n      : {\n          getStateGetter(key: string) {\n            let getter = resolveGetter(key);\n            if (getter) {\n              return getter;\n            }\n            return (...args) => {\n              // Late loaded getter\n              if (!getter) {\n                getter = resolveGetter(key);\n              }\n              return getter ? getter(...args) : undefined;\n            };\n          },\n          getSelectorOptions(localOptions?: SharedSelectorOptions) {\n            const globalSelectorOptions = stateFactory._config.selectorOptions;\n            return {\n              ...globalSelectorOptions,\n              ...(localOptions || {})\n            };\n          }\n        };\n    return context;\n  });\n\n  private static cloneDefaults(defaults: any): any {\n    let value = {};\n\n    if (Array.isArray(defaults)) {\n      value = defaults.slice();\n    } else if (isObject(defaults)) {\n      value = { ...defaults };\n    } else if (defaults === undefined) {\n      value = {};\n    } else {\n      value = defaults;\n    }\n\n    return value;\n  }\n\n  ngOnDestroy(): void {\n    // I'm using non-null assertion here since `_actionsSubscrition` will\n    // be 100% defined. This is because `ngOnDestroy()` cannot be invoked\n    // on the `StateFactory` until its initialized :) An it's initialized\n    // for the first time along with the `NgxsRootModule`.\n    this._actionsSubscription!.unsubscribe();\n  }\n\n  /**\n   * Add a new state to the global defs.\n   */\n  add(stateClasses: StateClassInternal[]): MappedStore[] {\n    // Caretaker note: we have still left the `typeof` condition in order to avoid\n    // creating a breaking change for projects that still use the View Engine.\n    if (typeof ngDevMode === 'undefined' || ngDevMode) {\n      StoreValidators.checkThatStateClassesHaveBeenDecorated(stateClasses);\n    }\n\n    const { newStates } = this.addToStatesMap(stateClasses);\n    if (!newStates.length) return [];\n\n    const stateGraph: StateKeyGraph = buildGraph(newStates);\n    const sortedStates: string[] = topologicalSort(stateGraph);\n    const paths: PlainObjectOf<string> = findFullParentPath(stateGraph);\n    const nameGraph: PlainObjectOf<StateClassInternal> = nameToState(newStates);\n    const bootstrappedStores: MappedStore[] = [];\n\n    for (const name of sortedStates) {\n      const stateClass: StateClassInternal = nameGraph[name];\n      const path: string = paths[name];\n      const meta: MetaDataModel = stateClass[META_KEY]!;\n\n      this.addRuntimeInfoToMeta(meta, path);\n\n      const stateMap: MappedStore = {\n        name,\n        path,\n        isInitialised: false,\n        actions: meta.actions,\n        instance: this._injector.get(stateClass),\n        defaults: StateFactory.cloneDefaults(meta.defaults)\n      };\n\n      // ensure our store hasn't already been added\n      // but don't throw since it could be lazy\n      // loaded from different paths\n      if (!this.hasBeenMountedAndBootstrapped(name, path)) {\n        bootstrappedStores.push(stateMap);\n      }\n\n      this.states.push(stateMap);\n    }\n\n    return bootstrappedStores;\n  }\n\n  /**\n   * Add a set of states to the store and return the defaults\n   */\n  addAndReturnDefaults(stateClasses: StateClassInternal[]): StatesAndDefaults {\n    const classes: StateClassInternal[] = stateClasses || [];\n\n    const mappedStores: MappedStore[] = this.add(classes);\n    const defaults = mappedStores.reduce(\n      (result: any, mappedStore: MappedStore) =>\n        setValue(result, mappedStore.path, mappedStore.defaults),\n      {}\n    );\n    return { defaults, states: mappedStores };\n  }\n\n  /**\n   * Bind the actions to the handlers\n   */\n  connectActionHandlers() {\n    if (this._actionsSubscription !== null) return;\n    const dispatched$ = new Subject<ActionContext>();\n    this._actionsSubscription = this._actions\n      .pipe(\n        filter((ctx: ActionContext) => ctx.status === ActionStatus.Dispatched),\n        mergeMap(ctx => {\n          dispatched$.next(ctx);\n          const action = ctx.action;\n          return this.invokeActions(dispatched$, action!).pipe(\n            map(() => <ActionContext>{ action, status: ActionStatus.Successful }),\n            defaultIfEmpty(<ActionContext>{ action, status: ActionStatus.Canceled }),\n            catchError(error =>\n              of(<ActionContext>{ action, status: ActionStatus.Errored, error })\n            )\n          );\n        })\n      )\n      .subscribe(ctx => this._actionResults.next(ctx));\n  }\n\n  /**\n   * Invoke actions on the states.\n   */\n  invokeActions(dispatched$: Observable<ActionContext>, action: any) {\n    const type = getActionTypeFromInstance(action)!;\n    const results = [];\n\n    for (const metadata of this.states) {\n      const actionMetas = metadata.actions[type];\n\n      if (actionMetas) {\n        for (const actionMeta of actionMetas) {\n          const stateContext = this._stateContextFactory.createStateContext(metadata);\n          try {\n            let result = metadata.instance[actionMeta.fn](stateContext, action);\n\n            if (result instanceof Promise) {\n              result = from(result);\n            }\n\n            if (result instanceof Observable) {\n              // If this observable has been completed w/o emitting\n              // any value then we wouldn't want to complete the whole chain\n              // of actions. Since if any observable completes then\n              // action will be canceled.\n              // For instance if any action handler would've had such statement:\n              // `handler(ctx) { return EMPTY; }`\n              // then the action will be canceled.\n              // See https://github.com/ngxs/store/issues/1568\n              result = result.pipe(\n                mergeMap((value: any) => {\n                  if (value instanceof Promise) {\n                    return from(value);\n                  }\n                  if (value instanceof Observable) {\n                    return value;\n                  }\n                  return of(value);\n                }),\n                defaultIfEmpty({})\n              );\n\n              if (actionMeta.options.cancelUncompleted) {\n                // todo: ofActionDispatched should be used with action class\n                result = result.pipe(\n                  takeUntil(dispatched$.pipe(ofActionDispatched(action as any)))\n                );\n              }\n            } else {\n              result = of({}).pipe(shareReplay());\n            }\n\n            results.push(result);\n          } catch (e) {\n            results.push(throwError(e));\n          }\n        }\n      }\n    }\n\n    if (!results.length) {\n      results.push(of({}));\n    }\n\n    return forkJoin(results);\n  }\n\n  private addToStatesMap(\n    stateClasses: StateClassInternal[]\n  ): { newStates: StateClassInternal[] } {\n    const newStates: StateClassInternal[] = [];\n    const statesMap: StatesByName = this.statesByName;\n\n    for (const stateClass of stateClasses) {\n      const stateName = getStoreMetadata(stateClass).name!;\n      // Caretaker note: we have still left the `typeof` condition in order to avoid\n      // creating a breaking change for projects that still use the View Engine.\n      if (typeof ngDevMode === 'undefined' || ngDevMode) {\n        StoreValidators.checkThatStateNameIsUnique(stateName, stateClass, statesMap);\n      }\n      const unmountedState = !statesMap[stateName];\n      if (unmountedState) {\n        newStates.push(stateClass);\n        statesMap[stateName] = stateClass;\n      }\n    }\n\n    return { newStates };\n  }\n\n  private addRuntimeInfoToMeta(meta: MetaDataModel, path: string): void {\n    this.statePaths[meta.name!] = path;\n    // TODO: v4 - we plan to get rid of the path property because it is non-deterministic\n    // we can do this when we get rid of the incorrectly exposed getStoreMetadata\n    // We will need to come up with an alternative in v4 because this is used by many plugins\n    meta.path = path;\n  }\n\n  /**\n   * @description\n   * the method checks if the state has already been added to the tree\n   * and completed the life cycle\n   * @param name\n   * @param path\n   */\n  private hasBeenMountedAndBootstrapped(name: string, path: string): boolean {\n    const valueIsBootstrappedInInitialState: boolean =\n      getValue(this._initialState, path) !== undefined;\n    return this.statesByName[name] && valueIsBootstrappedInInitialState;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { NgxsBootstrapper, PlainObject } from '@ngxs/store/internals';\nimport { filter, mergeMap, tap } from 'rxjs/operators';\n\nimport { StateContextFactory } from './state-context-factory';\nimport { InternalStateOperations } from './state-operations';\nimport { getStateDiffChanges, MappedStore, StatesAndDefaults } from './internals';\nimport { NgxsLifeCycle, NgxsSimpleChange, StateContext } from '../symbols';\n\n@Injectable()\nexport class LifecycleStateManager {\n  constructor(\n    private internalStateOperations: InternalStateOperations,\n    private stateContextFactory: StateContextFactory,\n    private bootstrapper: NgxsBootstrapper\n  ) {}\n\n  ngxsBootstrap<T>(action: T, results: StatesAndDefaults | undefined): void {\n    this.internalStateOperations\n      .getRootStateOperations()\n      .dispatch(action)\n      .pipe(\n        filter(() => !!results),\n        tap(() => this.invokeInit(results!.states)),\n        mergeMap(() => this.bootstrapper.appBootstrapped$),\n        filter(appBootstrapped => !!appBootstrapped)\n      )\n      .subscribe(() => this.invokeBootstrap(results!.states));\n  }\n\n  /**\n   * Invoke the init function on the states.\n   */\n  invokeInit(mappedStores: MappedStore[]): void {\n    for (const mappedStore of mappedStores) {\n      const instance: NgxsLifeCycle = mappedStore.instance;\n\n      if (instance.ngxsOnChanges) {\n        const currentAppState: PlainObject = {};\n        const newAppState: PlainObject = this.internalStateOperations\n          .getRootStateOperations()\n          .getState();\n\n        const firstDiffChange: NgxsSimpleChange = getStateDiffChanges(mappedStore, {\n          currentAppState,\n          newAppState\n        });\n\n        instance.ngxsOnChanges(firstDiffChange);\n      }\n\n      if (instance.ngxsOnInit) {\n        instance.ngxsOnInit(this.getStateContext(mappedStore));\n      }\n\n      mappedStore.isInitialised = true;\n    }\n  }\n\n  /**\n   * Invoke the bootstrap function on the states.\n   */\n  invokeBootstrap(mappedStores: MappedStore[]) {\n    for (const mappedStore of mappedStores) {\n      const instance: NgxsLifeCycle = mappedStore.instance;\n      if (instance.ngxsAfterBootstrap) {\n        instance.ngxsAfterBootstrap(this.getStateContext(mappedStore));\n      }\n    }\n  }\n\n  private getStateContext(mappedStore: MappedStore): StateContext<any> {\n    return this.stateContextFactory.createStateContext(mappedStore);\n  }\n}\n","import { memoize } from '@ngxs/store/internals';\n\nimport {\n  ensureSelectorMetadata,\n  getSelectorMetadata,\n  getStoreMetadata,\n  SelectorMetaDataModel,\n  SharedSelectorOptions,\n  RuntimeSelectorContext,\n  SelectorFactory,\n  SelectFromRootState\n} from '../internal/internals';\n\nconst SELECTOR_OPTIONS_META_KEY = 'NGXS_SELECTOR_OPTIONS_META';\n\nexport const selectorOptionsMetaAccessor = {\n  getOptions: (target: any): SharedSelectorOptions => {\n    return (target && (<any>target)[SELECTOR_OPTIONS_META_KEY]) || {};\n  },\n  defineOptions: (target: any, options: SharedSelectorOptions) => {\n    if (!target) return;\n    (<any>target)[SELECTOR_OPTIONS_META_KEY] = options;\n  }\n};\n\ninterface CreationMetadata {\n  containerClass: any;\n  selectorName: string;\n  getSelectorOptions?: () => SharedSelectorOptions;\n}\n\ninterface RuntimeSelectorInfo {\n  selectorOptions: SharedSelectorOptions;\n  argumentSelectorFunctions: SelectFromRootState[];\n}\n\n/**\n * Function for creating a selector\n * @param selectors The selectors to use to create the arguments of this function\n * @param originalFn The original function being made into a selector\n * @param creationMetadata\n */\nexport function createSelector<T extends (...args: any[]) => any>(\n  selectors: any[] | undefined,\n  originalFn: T,\n  creationMetadata?: CreationMetadata\n) {\n  const containerClass = creationMetadata && creationMetadata.containerClass;\n  const wrappedFn = function wrappedSelectorFn(...args: any[]) {\n    const returnValue = originalFn.apply(containerClass, args);\n    if (returnValue instanceof Function) {\n      const innerMemoizedFn = memoize.apply(null, [returnValue]);\n      return innerMemoizedFn;\n    }\n    return returnValue;\n  } as T;\n  const memoizedFn = memoize(wrappedFn);\n  Object.setPrototypeOf(memoizedFn, originalFn);\n\n  const selectorMetaData = setupSelectorMetadata<T>(originalFn, creationMetadata);\n\n  const makeRootSelector: SelectorFactory = (context: RuntimeSelectorContext) => {\n    const { argumentSelectorFunctions, selectorOptions } = getRuntimeSelectorInfo(\n      context,\n      selectorMetaData,\n      selectors\n    );\n\n    return function selectFromRoot(rootState: any) {\n      // Determine arguments from the app state using the selectors\n      const results = argumentSelectorFunctions.map(argFn => argFn(rootState));\n\n      // if the lambda tries to access a something on the\n      // state that doesn't exist, it will throw a TypeError.\n      // since this is quite usual behaviour, we simply return undefined if so.\n      try {\n        return memoizedFn(...results);\n      } catch (ex) {\n        if (ex instanceof TypeError && selectorOptions.suppressErrors) {\n          return undefined;\n        }\n\n        throw ex;\n      }\n    };\n  };\n\n  selectorMetaData.makeRootSelector = makeRootSelector;\n\n  return memoizedFn;\n}\n\nfunction setupSelectorMetadata<T extends (...args: any[]) => any>(\n  originalFn: T,\n  creationMetadata: CreationMetadata | undefined\n) {\n  const selectorMetaData = ensureSelectorMetadata(originalFn);\n  selectorMetaData.originalFn = originalFn;\n  let getExplicitSelectorOptions = () => ({});\n  if (creationMetadata) {\n    selectorMetaData.containerClass = creationMetadata.containerClass;\n    selectorMetaData.selectorName = creationMetadata.selectorName;\n    getExplicitSelectorOptions =\n      creationMetadata.getSelectorOptions || getExplicitSelectorOptions;\n  }\n  const selectorMetaDataClone = { ...selectorMetaData };\n  selectorMetaData.getSelectorOptions = () =>\n    getLocalSelectorOptions(selectorMetaDataClone, getExplicitSelectorOptions());\n  return selectorMetaData;\n}\n\nfunction getRuntimeSelectorInfo(\n  context: RuntimeSelectorContext,\n  selectorMetaData: SelectorMetaDataModel,\n  selectors: any[] | undefined = []\n): RuntimeSelectorInfo {\n  const localSelectorOptions = selectorMetaData.getSelectorOptions();\n  const selectorOptions = context.getSelectorOptions(localSelectorOptions);\n  const selectorsToApply = getSelectorsToApply(\n    selectors,\n    selectorOptions,\n    selectorMetaData.containerClass\n  );\n\n  const argumentSelectorFunctions = selectorsToApply.map(selector => {\n    const factory = getRootSelectorFactory(selector);\n    return factory(context);\n  });\n  return {\n    selectorOptions,\n    argumentSelectorFunctions\n  };\n}\n\nfunction getLocalSelectorOptions(\n  selectorMetaData: SelectorMetaDataModel,\n  explicitOptions: SharedSelectorOptions\n): SharedSelectorOptions {\n  return {\n    ...(selectorOptionsMetaAccessor.getOptions(selectorMetaData.containerClass) || {}),\n    ...(selectorOptionsMetaAccessor.getOptions(selectorMetaData.originalFn) || {}),\n    ...(selectorMetaData.getSelectorOptions() || {}),\n    ...explicitOptions\n  };\n}\n\nfunction getSelectorsToApply(\n  selectors: any[] | undefined = [],\n  selectorOptions: SharedSelectorOptions,\n  containerClass: any\n) {\n  const selectorsToApply = [];\n  const canInjectContainerState =\n    selectors.length === 0 || selectorOptions.injectContainerState;\n  if (containerClass && canInjectContainerState) {\n    // If we are on a state class, add it as the first selector parameter\n    const metadata = getStoreMetadata(containerClass);\n    if (metadata) {\n      selectorsToApply.push(containerClass);\n    }\n  }\n  if (selectors) {\n    selectorsToApply.push(...selectors);\n  }\n  return selectorsToApply;\n}\n\n/**\n * This function gets the factory function to create the selector to get the selected slice from the app state\n * @ignore\n */\nexport function getRootSelectorFactory(selector: any): SelectorFactory {\n  const metadata = getSelectorMetadata(selector) || getStoreMetadata(selector);\n  return (metadata && metadata.makeRootSelector) || (() => selector);\n}\n","// tslint:disable:unified-signatures\nimport { Inject, Injectable, Optional, Type } from '@angular/core';\nimport { Observable, of, Subscription, throwError } from 'rxjs';\nimport { catchError, distinctUntilChanged, map, take } from 'rxjs/operators';\nimport { INITIAL_STATE_TOKEN, PlainObject } from '@ngxs/store/internals';\n\nimport { InternalNgxsExecutionStrategy } from './execution/internal-ngxs-execution-strategy';\nimport { InternalStateOperations } from './internal/state-operations';\nimport { getRootSelectorFactory } from './utils/selector-utils';\nimport { StateStream } from './internal/state-stream';\nimport { leaveNgxs } from './operators/leave-ngxs';\nimport { NgxsConfig } from './symbols';\nimport { StateToken } from './state-token/state-token';\nimport { StateFactory } from './internal/state-factory';\n\n@Injectable()\nexport class Store {\n  constructor(\n    private _stateStream: StateStream,\n    private _internalStateOperations: InternalStateOperations,\n    private _config: NgxsConfig,\n    private _internalExecutionStrategy: InternalNgxsExecutionStrategy,\n    private _stateFactory: StateFactory,\n    @Optional()\n    @Inject(INITIAL_STATE_TOKEN)\n    initialStateValue: any\n  ) {\n    this.initStateStream(initialStateValue);\n  }\n\n  /**\n   * Dispatches event(s).\n   */\n  dispatch(actionOrActions: any | any[]): Observable<any> {\n    return this._internalStateOperations.getRootStateOperations().dispatch(actionOrActions);\n  }\n\n  /**\n   * Selects a slice of data from the store.\n   */\n  select<T>(selector: (state: any, ...states: any[]) => T): Observable<T>;\n  select<T = any>(selector: string | Type<any>): Observable<T>;\n  select<T>(selector: StateToken<T>): Observable<T>;\n  select(selector: any): Observable<any> {\n    const selectorFn = this.getStoreBoundSelectorFn(selector);\n    return this._stateStream.pipe(\n      map(selectorFn),\n      catchError((err: Error): Observable<never> | Observable<undefined> => {\n        // if error is TypeError we swallow it to prevent usual errors with property access\n        const { suppressErrors } = this._config.selectorOptions;\n\n        if (err instanceof TypeError && suppressErrors) {\n          return of(undefined);\n        }\n\n        // rethrow other errors\n        return throwError(err);\n      }),\n      distinctUntilChanged(),\n      leaveNgxs(this._internalExecutionStrategy)\n    );\n  }\n\n  /**\n   * Select one slice of data from the store.\n   */\n\n  selectOnce<T>(selector: (state: any, ...states: any[]) => T): Observable<T>;\n  selectOnce<T = any>(selector: string | Type<any>): Observable<T>;\n  selectOnce<T>(selector: StateToken<T>): Observable<T>;\n  selectOnce(selector: any): Observable<any> {\n    return this.select(selector).pipe(take(1));\n  }\n\n  /**\n   * Select a snapshot from the state.\n   */\n  selectSnapshot<T>(selector: (state: any, ...states: any[]) => T): T;\n  selectSnapshot<T = any>(selector: string | Type<any>): T;\n  selectSnapshot<T>(selector: StateToken<T>): T;\n  selectSnapshot(selector: any): any {\n    const selectorFn = this.getStoreBoundSelectorFn(selector);\n    return selectorFn(this._stateStream.getValue());\n  }\n\n  /**\n   * Allow the user to subscribe to the root of the state\n   */\n  subscribe(fn?: (value: any) => void): Subscription {\n    return this._stateStream.pipe(leaveNgxs(this._internalExecutionStrategy)).subscribe(fn);\n  }\n\n  /**\n   * Return the raw value of the state.\n   */\n  snapshot(): any {\n    return this._internalStateOperations.getRootStateOperations().getState();\n  }\n\n  /**\n   * Reset the state to a specific point in time. This method is useful\n   * for plugin's who need to modify the state directly or unit testing.\n   */\n  reset(state: any) {\n    return this._internalStateOperations.getRootStateOperations().setState(state);\n  }\n\n  private getStoreBoundSelectorFn(selector: any) {\n    const makeSelectorFn = getRootSelectorFactory(selector);\n    const runtimeContext = this._stateFactory.getRuntimeSelectorContext();\n    return makeSelectorFn(runtimeContext);\n  }\n\n  private initStateStream(initialStateValue: any): void {\n    const value: PlainObject = this._stateStream.value;\n    const storeIsEmpty: boolean = !value || Object.keys(value).length === 0;\n    if (storeIsEmpty) {\n      const defaultStateNotEmpty: boolean = Object.keys(this._config.defaultsState).length > 0;\n      const storeValues: PlainObject = defaultStateNotEmpty\n        ? { ...this._config.defaultsState, ...initialStateValue }\n        : initialStateValue;\n\n      this._stateStream.next(storeValues);\n    }\n  }\n}\n","import { Injectable, OnDestroy } from '@angular/core';\n\nimport { Store } from '../../store';\nimport { NgxsConfig } from '../../symbols';\n\n/**\n * Allows the select decorator to get access to the DI store, this is used internally\n * in `@Select` decorator.\n */\n@Injectable({ providedIn: 'root' })\nexport class SelectFactory implements OnDestroy {\n  public static store: Store | null = null;\n  public static config: NgxsConfig | null = null;\n\n  constructor(store: Store, config: NgxsConfig) {\n    SelectFactory.store = store;\n    SelectFactory.config = config;\n  }\n\n  ngOnDestroy(): void {\n    SelectFactory.store = null;\n    SelectFactory.config = null;\n  }\n}\n","import { PlainObject } from '@ngxs/store/internals';\n\n/**\n * Init action\n */\nexport class InitState {\n  static get type() {\n    // NOTE: Not necessary to declare the type in this way in your code. See https://github.com/ngxs/store/pull/644#issuecomment-436003138\n    return '@@INIT';\n  }\n}\n\n/**\n * Update action\n */\nexport class UpdateState {\n  static get type() {\n    // NOTE: Not necessary to declare the type in this way in your code. See https://github.com/ngxs/store/pull/644#issuecomment-436003138\n    return '@@UPDATE_STATE';\n  }\n\n  constructor(public addedStates?: PlainObject) {}\n}\n","import { Inject, Injector, NgModule, Optional, ivyEnabled } from '@angular/core';\n\nimport { StateFactory } from '../internal/state-factory';\nimport { InternalStateOperations } from '../internal/state-operations';\nimport { Store } from '../store';\nimport { SelectFactory } from '../decorators/select/select-factory';\nimport { ROOT_STATE_TOKEN } from '../symbols';\nimport { StateClassInternal, StatesAndDefaults } from '../internal/internals';\nimport { LifecycleStateManager } from '../internal/lifecycle-state-manager';\nimport { InitState } from '../actions/actions';\n\n/**\n * Root module\n * @ignore\n */\n@NgModule()\nexport class NgxsRootModule {\n  constructor(\n    factory: StateFactory,\n    internalStateOperations: InternalStateOperations,\n    _store: Store,\n    injector: Injector,\n    @Optional()\n    @Inject(ROOT_STATE_TOKEN)\n    states: StateClassInternal[] = [],\n    lifecycleStateManager: LifecycleStateManager\n  ) {\n    // If the user is running View Engine then we create the `SelectFactory` instance,\n    // otherwise it'll be tree-shaken away in Ivy.\n    !ivyEnabled && injector.get(SelectFactory);\n\n    // Add stores to the state graph and return their defaults\n    const results: StatesAndDefaults = factory.addAndReturnDefaults(states);\n\n    internalStateOperations.setStateToTheCurrentWithNew(results);\n\n    // Connect our actions stream\n    factory.connectActionHandlers();\n\n    // Dispatch the init action and invoke init and bootstrap functions after\n    lifecycleStateManager.ngxsBootstrap(new InitState(), results);\n  }\n}\n","import { Inject, NgModule, Optional } from '@angular/core';\n\nimport { Store } from '../store';\nimport { InternalStateOperations } from '../internal/state-operations';\nimport { StateFactory } from '../internal/state-factory';\nimport { FEATURE_STATE_TOKEN } from '../symbols';\nimport { LifecycleStateManager } from '../internal/lifecycle-state-manager';\nimport { StateClassInternal, StatesAndDefaults } from '../internal/internals';\nimport { UpdateState } from '../actions/actions';\n\n/**\n * Feature module\n * @ignore\n */\n@NgModule()\nexport class NgxsFeatureModule {\n  constructor(\n    _store: Store,\n    internalStateOperations: InternalStateOperations,\n    factory: StateFactory,\n    @Optional()\n    @Inject(FEATURE_STATE_TOKEN)\n    states: StateClassInternal[][] = [],\n    lifecycleStateManager: LifecycleStateManager\n  ) {\n    // Since FEATURE_STATE_TOKEN is a multi token, we need to\n    // flatten it [[Feature1State, Feature2State], [Feature3State]]\n    const flattenedStates: StateClassInternal[] = NgxsFeatureModule.flattenStates(states);\n\n    // add stores to the state graph and return their defaults\n    const results: StatesAndDefaults = factory.addAndReturnDefaults(flattenedStates);\n\n    if (results.states.length) {\n      internalStateOperations.setStateToTheCurrentWithNew(results);\n\n      // dispatch the update action and invoke init and bootstrap functions after\n      lifecycleStateManager.ngxsBootstrap(new UpdateState(results.defaults), results);\n    }\n  }\n\n  private static flattenStates(states: StateClassInternal[][] = []): StateClassInternal[] {\n    return states.reduce(\n      (total: StateClassInternal[], values: StateClassInternal[]) => total.concat(values),\n      []\n    );\n  }\n}\n","import {\n  APP_BOOTSTRAP_LISTENER,\n  InjectionToken,\n  ModuleWithProviders,\n  NgModule,\n  Provider\n} from '@angular/core';\nimport {\n  INITIAL_STATE_TOKEN,\n  InitialState,\n  NGXS_STATE_CONTEXT_FACTORY,\n  NGXS_STATE_FACTORY,\n  NgxsBootstrapper,\n  StateClass\n} from '@ngxs/store/internals';\n\nimport {\n  FEATURE_STATE_TOKEN,\n  NgxsConfig,\n  NgxsModuleOptions,\n  ROOT_STATE_TOKEN\n} from './symbols';\nimport { NGXS_EXECUTION_STRATEGY } from './execution/symbols';\nimport { StateFactory } from './internal/state-factory';\nimport { StateContextFactory } from './internal/state-context-factory';\nimport { Actions, InternalActions } from './actions-stream';\nimport { LifecycleStateManager } from './internal/lifecycle-state-manager';\nimport { InternalDispatchedActionResults, InternalDispatcher } from './internal/dispatcher';\nimport { InternalStateOperations } from './internal/state-operations';\nimport { Store } from './store';\nimport { StateStream } from './internal/state-stream';\nimport { PluginManager } from './plugin-manager';\nimport { NgxsRootModule } from './modules/ngxs-root.module';\nimport { NgxsFeatureModule } from './modules/ngxs-feature.module';\nimport { DispatchOutsideZoneNgxsExecutionStrategy } from './execution/dispatch-outside-zone-ngxs-execution-strategy';\nimport { InternalNgxsExecutionStrategy } from './execution/internal-ngxs-execution-strategy';\nimport { mergeDeep } from './utils/utils';\n\n/**\n * Ngxs Module\n */\n@NgModule()\nexport class NgxsModule {\n  private static readonly ROOT_OPTIONS = new InjectionToken<NgxsModuleOptions>('ROOT_OPTIONS');\n\n  /**\n   * Root module factory\n   */\n  public static forRoot(\n    states: StateClass[] = [],\n    options: NgxsModuleOptions = {}\n  ): ModuleWithProviders<NgxsRootModule> {\n    return {\n      ngModule: NgxsRootModule,\n      providers: [\n        StateFactory,\n        StateContextFactory,\n        Actions,\n        InternalActions,\n        NgxsBootstrapper,\n        LifecycleStateManager,\n        InternalDispatcher,\n        InternalDispatchedActionResults,\n        InternalStateOperations,\n        InternalNgxsExecutionStrategy,\n        Store,\n        StateStream,\n        PluginManager,\n        ...states,\n        ...NgxsModule.ngxsTokenProviders(states, options)\n      ]\n    };\n  }\n\n  /**\n   * Feature module factory\n   */\n  public static forFeature(states: StateClass[] = []): ModuleWithProviders<NgxsFeatureModule> {\n    return {\n      ngModule: NgxsFeatureModule,\n      providers: [\n        StateFactory,\n        PluginManager,\n        ...states,\n        {\n          provide: FEATURE_STATE_TOKEN,\n          multi: true,\n          useValue: states\n        }\n      ]\n    };\n  }\n\n  private static ngxsTokenProviders(\n    states: StateClass[],\n    options: NgxsModuleOptions\n  ): Provider[] {\n    return [\n      {\n        provide: NGXS_EXECUTION_STRATEGY,\n        useClass: options.executionStrategy || DispatchOutsideZoneNgxsExecutionStrategy\n      },\n      {\n        provide: ROOT_STATE_TOKEN,\n        useValue: states\n      },\n      {\n        provide: NgxsModule.ROOT_OPTIONS,\n        useValue: options\n      },\n      {\n        provide: NgxsConfig,\n        useFactory: NgxsModule.ngxsConfigFactory,\n        deps: [NgxsModule.ROOT_OPTIONS]\n      },\n      {\n        provide: APP_BOOTSTRAP_LISTENER,\n        useFactory: NgxsModule.appBootstrapListenerFactory,\n        multi: true,\n        deps: [NgxsBootstrapper]\n      },\n      {\n        provide: INITIAL_STATE_TOKEN,\n        useFactory: NgxsModule.getInitialState\n      },\n      {\n        provide: NGXS_STATE_CONTEXT_FACTORY,\n        useExisting: StateContextFactory\n      },\n      {\n        provide: NGXS_STATE_FACTORY,\n        useExisting: StateFactory\n      }\n    ];\n  }\n\n  private static ngxsConfigFactory(options: NgxsModuleOptions): NgxsConfig {\n    return mergeDeep(new NgxsConfig(), options);\n  }\n\n  private static appBootstrapListenerFactory(bootstrapper: NgxsBootstrapper): Function {\n    return () => bootstrapper.bootstrap();\n  }\n\n  private static getInitialState() {\n    return InitialState.pop();\n  }\n}\n","import { ensureStoreMetadata } from '../internal/internals';\nimport { ActionType, ActionOptions } from '../actions/symbols';\nimport { throwActionDecoratorError } from '../configs/messages.config';\n\n/**\n * Decorates a method with a action information.\n */\nexport function Action(\n  actions: ActionType | ActionType[],\n  options?: ActionOptions\n): MethodDecorator {\n  return (target: any, name: string | symbol): void => {\n    // Caretaker note: we have still left the `typeof` condition in order to avoid\n    // creating a breaking change for projects that still use the View Engine.\n    if (typeof ngDevMode === 'undefined' || ngDevMode) {\n      const isStaticMethod = target.hasOwnProperty('prototype');\n\n      if (isStaticMethod) {\n        throwActionDecoratorError();\n      }\n    }\n\n    const meta = ensureStoreMetadata(target.constructor);\n\n    if (!Array.isArray(actions)) {\n      actions = [actions];\n    }\n\n    for (const action of actions) {\n      const type = action.type;\n\n      if (!meta.actions[type]) {\n        meta.actions[type] = [];\n      }\n\n      meta.actions[type].push({\n        fn: name,\n        options: options || {},\n        type\n      });\n    }\n  };\n}\n","import { ivyEnabled } from '@angular/core';\n\nimport { getUndecoratedStateInIvyWarningMessage } from '../configs/messages.config';\n\n/**\n * All provided or injected tokens must have `@Injectable` decorator\n * (previously, injected tokens without `@Injectable` were allowed\n * if another decorator was used, e.g. pipes).\n */\nexport function ensureStateClassIsInjectable(target: any): void {\n  // `prov` is a static property added by the NGCC compiler. It always exists in\n  // AOT mode because this property is added before runtime. If an application is running in\n  // JIT mode then this property can be added by the `@Injectable()` decorator. The `@Injectable()`\n  // decorator has to go after the `@State()` decorator, thus we prevent users from unwanted DI errors.\n  if (ivyEnabled) {\n    const ngInjectableDef = target.prov;\n    if (!ngInjectableDef) {\n      // Don't warn if Ivy is disabled or `prov` exists on the class\n      console.warn(getUndecoratedStateInIvyWarningMessage(target.name));\n    }\n  }\n}\n","import { StateClass } from '@ngxs/store/internals';\n\nimport { ensureStoreMetadata, MetaDataModel, StateClassInternal } from '../internal/internals';\nimport { META_KEY, META_OPTIONS_KEY, StoreOptions } from '../symbols';\nimport { StoreValidators } from '../utils/store-validators';\nimport { ensureStateClassIsInjectable } from '../ivy/ivy-enabled-in-dev-mode';\n\ninterface MutateMetaOptions<T> {\n  meta: MetaDataModel;\n  inheritedStateClass: StateClassInternal;\n  optionsWithInheritance: StoreOptions<T>;\n}\n\n/**\n * Decorates a class with ngxs state information.\n */\nexport function State<T>(options: StoreOptions<T>) {\n  function getStateOptions(inheritedStateClass: StateClassInternal): StoreOptions<T> {\n    const inheritanceOptions: Partial<StoreOptions<T>> =\n      inheritedStateClass[META_OPTIONS_KEY] || {};\n    return { ...inheritanceOptions, ...options } as StoreOptions<T>;\n  }\n\n  function mutateMetaData(params: MutateMetaOptions<T>): void {\n    const { meta, inheritedStateClass, optionsWithInheritance } = params;\n    const { children, defaults, name } = optionsWithInheritance;\n    const stateName: string | null =\n      typeof name === 'string' ? name : (name && name.getName()) || null;\n\n    // Caretaker note: we have still left the `typeof` condition in order to avoid\n    // creating a breaking change for projects that still use the View Engine.\n    if (typeof ngDevMode === 'undefined' || ngDevMode) {\n      StoreValidators.checkThatStateIsNamedCorrectly(stateName);\n    }\n\n    if (inheritedStateClass.hasOwnProperty(META_KEY)) {\n      const inheritedMeta: Partial<MetaDataModel> = inheritedStateClass[META_KEY] || {};\n      meta.actions = { ...meta.actions, ...inheritedMeta.actions };\n    }\n\n    meta.children = children;\n    meta.defaults = defaults;\n    meta.name = stateName;\n  }\n\n  return (target: StateClass): void => {\n    // Caretaker note: we have still left the `typeof` condition in order to avoid\n    // creating a breaking change for projects that still use the View Engine.\n    if (typeof ngDevMode === 'undefined' || ngDevMode) {\n      ensureStateClassIsInjectable(target);\n    }\n    const stateClass: StateClassInternal = target;\n    const meta: MetaDataModel = ensureStoreMetadata(stateClass);\n    const inheritedStateClass: StateClassInternal = Object.getPrototypeOf(stateClass);\n    const optionsWithInheritance: StoreOptions<T> = getStateOptions(inheritedStateClass);\n    mutateMetaData({ meta, inheritedStateClass, optionsWithInheritance });\n    stateClass[META_OPTIONS_KEY] = optionsWithInheritance;\n  };\n}\n","import { Type, ivyEnabled } from '@angular/core';\nimport { Observable } from 'rxjs';\n\nimport { Store } from '../../store';\nimport { NgxsConfig } from '../../symbols';\nimport { propGetter } from '../../internal/internals';\nimport { SelectFactory } from './select-factory';\nimport { StateToken } from '../../state-token/state-token';\nimport { ExtractTokenType } from '../../state-token/symbols';\nimport { throwSelectFactoryNotConnectedError } from '../../configs/messages.config';\n\nconst DOLLAR_CHAR_CODE = 36;\n\nexport function createSelectObservable<T = any>(\n  selector: any,\n  store: Store | null\n): Observable<T> {\n  // We're doing this stuff to tree-shake the `SelectFactory` when the user\n  // is running Ivy since NGXS will select the state from the provided `store` argument.\n  return ivyEnabled\n    ? createSelectObservableIvy(selector, store)\n    : createSelectObservableViewEngine(selector);\n}\n\nexport function createSelectorFn(\n  config: NgxsConfig | null,\n  name: string,\n  rawSelector?: any,\n  paths: string[] = []\n): SelectorFn {\n  rawSelector = rawSelector || removeDollarAtTheEnd(name);\n\n  if (typeof rawSelector !== 'string') {\n    return rawSelector;\n  } else {\n    const propsArray: string[] = paths.length\n      ? [rawSelector, ...paths]\n      : rawSelector.split('.');\n\n    return ivyEnabled\n      ? createSelectorFnIvy(propsArray, config)\n      : createSelectorFnViewEngine(propsArray);\n  }\n}\n\n/**\n * @example If `foo$` => make it just `foo`\n */\nexport function removeDollarAtTheEnd(name: string): string {\n  const lastCharIndex: number = name.length - 1;\n  const dollarAtTheEnd: boolean = name.charCodeAt(lastCharIndex) === DOLLAR_CHAR_CODE;\n  return dollarAtTheEnd ? name.slice(0, lastCharIndex) : name;\n}\n\nexport type SelectorFn =\n  | ((state: any, ...states: any[]) => any)\n  | string\n  | Type<any>\n  | StateToken<any>;\n\nexport type PropertyType<T> = T extends StateToken<any>\n  ? Observable<ExtractTokenType<T>>\n  : T extends (...args: any[]) => any\n  ? Observable<ReturnType<T>>\n  : any;\n\nfunction createSelectObservableIvy<T = any>(\n  selector: any,\n  store: Store | null\n): Observable<T> {\n  return ngDevMode && !store ? throwSelectFactoryNotConnectedError() : store!.select(selector);\n}\n\nfunction createSelectObservableViewEngine<T = any>(selector: any): Observable<T> {\n  return SelectFactory.store\n    ? SelectFactory.store.select(selector)\n    : throwSelectFactoryNotConnectedError();\n}\n\nfunction createSelectorFnIvy(propsArray: string[], config: NgxsConfig | null) {\n  return ngDevMode && !config\n    ? throwSelectFactoryNotConnectedError()\n    : propGetter(propsArray, config!);\n}\n\nfunction createSelectorFnViewEngine(propsArray: string[]) {\n  return propGetter(propsArray, SelectFactory.config!);\n}\n","import { ivyEnabled } from '@angular/core';\nimport { ReplaySubject } from 'rxjs';\nimport { mergeMap } from 'rxjs/operators';\nimport {\n  localInject,\n  ensureLocalInjectorCaptured,\n  ensureInjectorNotifierIsCaptured\n} from '@ngxs/store/internals';\n\nimport { Store } from '../../store';\nimport { NgxsConfig } from '../../symbols';\nimport { createSelectObservable, createSelectorFn, SelectorFn } from './symbols';\n\n/**\n * Decorator for selecting a slice of state from the store.\n */\nexport function Select<T>(rawSelector?: T, ...paths: string[]): PropertyDecorator {\n  return function(target, key): void {\n    const name: string = key.toString();\n    const selectorId = `__${name}__selector`;\n    let selector: SelectorFn | null = null;\n    let injectorNotifier$: ReplaySubject<boolean> | null = null;\n\n    if (ivyEnabled) {\n      injectorNotifier$ = ensureInjectorNotifierIsCaptured(target);\n    }\n\n    Object.defineProperties(target, {\n      [selectorId]: {\n        writable: true,\n        enumerable: false,\n        configurable: true\n      },\n      [name]: {\n        enumerable: true,\n        configurable: true,\n        get() {\n          if (this[selectorId]) {\n            return this[selectorId];\n          }\n          // The `localInject` will be tree-shaken away in apps that\n          // still use the View Engine.\n          if (ivyEnabled) {\n            this[selectorId] = injectorNotifier$!.pipe(\n              mergeMap(() => {\n                const store = localInject(this, Store);\n                const config = localInject(this, NgxsConfig);\n                selector = selector || createSelectorFn(config, name, rawSelector, paths);\n                return createSelectObservable(selector, store);\n              })\n            );\n          } else {\n            selector = selector || createSelectorFn(null, name, rawSelector, paths);\n            this[selectorId] = createSelectObservable(selector, null);\n          }\n          return this[selectorId];\n        }\n      }\n    });\n\n    // Keep this `if` guard here so the below stuff will be tree-shaken away in apps that still use the View Engine.\n    if (ivyEnabled) {\n      ensureLocalInjectorCaptured(target);\n    }\n  };\n}\n","import { SharedSelectorOptions } from '../internal/internals';\nimport { selectorOptionsMetaAccessor } from '../utils/selector-utils';\n\n/**\n * Decorator for setting selector options at a method or class level.\n */\nexport function SelectorOptions(options: SharedSelectorOptions) {\n  return <ClassDecorator & MethodDecorator>(\n    function decorate<T>(\n      target: any,\n      methodName: string,\n      descriptor: TypedPropertyDescriptor<T>\n    ) {\n      if (methodName) {\n        // Method Decorator\n        const originalFn = descriptor.value || (<any>descriptor).originalFn;\n        if (originalFn) {\n          selectorOptionsMetaAccessor.defineOptions(originalFn, options);\n        }\n      } else {\n        // Class Decorator\n        selectorOptionsMetaAccessor.defineOptions(target, options);\n      }\n    }\n  );\n}\n","import {\n  getSelectorMetadata as getSelectorMetadataInternal,\n  getStoreMetadata as getStoreMetadataInternal,\n  ensureStoreMetadata as ensureStoreMetadataInternal,\n  ensureSelectorMetadata as ensureSelectorMetadataInternal,\n  StateClassInternal,\n  SharedSelectorOptions\n} from './internal/internals';\nimport { PlainObjectOf } from '../internals/src/symbols';\nimport { ActionHandlerMetaData } from './actions/symbols';\n\ninterface MetaDataModel {\n  name: string | null;\n  actions: PlainObjectOf<ActionHandlerMetaData[]>;\n  defaults: any;\n  path: string | null;\n  // selectFromAppState: SelectFromState | null;\n  // makeRootSelector: SelectorFactory | null; // Don't expose new stuff\n  children?: StateClassInternal[];\n}\n\ninterface SelectorMetaDataModel {\n  // selectFromAppState: SelectFromState | null;\n  // makeRootSelector: SelectorFactory | null; // Don't expose new stuff\n  originalFn: Function | null;\n  containerClass: any;\n  selectorName: string | null;\n  getSelectorOptions: () => SharedSelectorOptions;\n}\n\nexport function ensureStoreMetadata(target: StateClassInternal<any, any>): MetaDataModel {\n  return ensureStoreMetadataInternal(target);\n}\n\nexport function getStoreMetadata(target: StateClassInternal<any, any>): MetaDataModel {\n  return getStoreMetadataInternal(target);\n}\n\nexport function ensureSelectorMetadata(target: Function): SelectorMetaDataModel {\n  return ensureSelectorMetadataInternal(target);\n}\n\nexport function getSelectorMetadata(target: any): SelectorMetaDataModel {\n  return getSelectorMetadataInternal(target);\n}\n","import { throwSelectorDecoratorError } from '../../configs/messages.config';\nimport { createSelector } from '../../utils/selector-utils';\nimport { SelectorSpec, SelectorType } from './symbols';\n\n/**\n * Decorator for memoizing a state selector.\n */\nexport function Selector<T>(selectors?: T[]): SelectorType<T> {\n  return <U>(\n    target: any,\n    key: string | symbol,\n    descriptor: TypedPropertyDescriptor<SelectorSpec<T, U>>\n  ): TypedPropertyDescriptor<SelectorSpec<T, U>> | void => {\n    // Caretaker note: we have still left the `typeof` condition in order to avoid\n    // creating a breaking change for projects that still use the View Engine.\n    if (typeof ngDevMode === 'undefined' || ngDevMode) {\n      const isNotMethod = !(descriptor && descriptor.value !== null);\n\n      if (isNotMethod) {\n        throwSelectorDecoratorError();\n      }\n    }\n\n    const originalFn = descriptor.value;\n    const memoizedFn = createSelector(selectors, originalFn as any, {\n      containerClass: target,\n      selectorName: key.toString(),\n      getSelectorOptions() {\n        return {};\n      }\n    });\n    const newDescriptor = {\n      configurable: true,\n      get() {\n        return memoizedFn;\n      }\n    };\n    // Add hidden property to descriptor\n    (<any>newDescriptor)['originalFn'] = originalFn;\n    return newDescriptor;\n  };\n}\n","import { Injectable } from '@angular/core';\n\nimport { NgxsExecutionStrategy } from './symbols';\n\n@Injectable()\nexport class NoopNgxsExecutionStrategy implements NgxsExecutionStrategy {\n  enter<T>(func: () => T): T {\n    return func();\n  }\n\n  leave<T>(func: () => T): T {\n    return func();\n  }\n}\n","import { TokenName } from './symbols';\nimport {\n  ensureSelectorMetadata,\n  RuntimeSelectorContext,\n  SelectFromRootState\n} from '../internal/internals';\n\nexport class StateToken<T = void> {\n  constructor(private readonly name: TokenName<T>) {\n    const selectorMetadata = ensureSelectorMetadata(<any>this);\n    selectorMetadata.makeRootSelector = (\n      runtimeContext: RuntimeSelectorContext\n    ): SelectFromRootState => {\n      return runtimeContext.getStateGetter(this.name);\n    };\n  }\n\n  getName(): string {\n    return this.name;\n  }\n\n  toString(): string {\n    return `StateToken[${this.name}]`;\n  }\n}\n"],"names":["isObject","MetaDataModel","SelectorMetaDataModel","ensureStoreMetadata","ensureStoreMetadataInternal","getStoreMetadata","getStoreMetadataInternal","ensureSelectorMetadata","ensureSelectorMetadataInternal","getSelectorMetadata","getSelectorMetadataInternal"],"mappings":";;;;;;;;;;;;;;AAAA,SAAgB,mBAAmB,CAAC,IAAY;IAC9C,MAAM,IAAI,KAAK,CACb,GAAG,IAAI,0EAA0E,CAClF,CAAC;CACH;;;;AAED,SAAgB,2BAA2B;IACzC,MAAM,IAAI,KAAK,CAAC,yCAAyC,CAAC,CAAC;CAC5D;;;;;;;AAED,SAAgB,qBAAqB,CACnC,OAAe,EACf,OAAe,EACf,OAAe;IAEf,MAAM,IAAI,KAAK,CAAC,eAAe,OAAO,UAAU,OAAO,sBAAsB,OAAO,GAAG,CAAC,CAAC;CAC1F;;;;;AAED,SAAgB,wBAAwB,CAAC,IAAY;IACnD,MAAM,IAAI,KAAK,CAAC,0DAA0D,IAAI,UAAU,CAAC,CAAC;CAC3F;;;;AAED,SAAgB,yBAAyB;IACvC,MAAM,IAAI,KAAK,CAAC,yDAAyD,CAAC,CAAC;CAC5E;;;;AAED,SAAgB,2BAA2B;IACzC,MAAM,IAAI,KAAK,CAAC,iCAAiC,CAAC,CAAC;CACpD;;;;AAED,SAAgB,qBAAqB;IACnC,QACE,6GAA6G;QAC7G,wFAAwF;QACxF,8EAA8E,EAC9E;CACH;;;;;AAED,SAAgB,sCAAsC,CAAC,IAAY;IACjE,OAAO,IAAI,IAAI,mFAAmF,CAAC;CACpG;;;;AAED,SAAgB,mCAAmC;IACjD,MAAM,IAAI,KAAK,CAAC,+CAA+C,CAAC,CAAC;CAClE;;;;AAED,SAAgB,uBAAuB;IACrC,MAAM,IAAI,KAAK,CAAC,mCAAmC,CAAC,CAAC;CACtD;;;;AAED,SAAgB,2BAA2B;IACzC,MAAM,IAAI,KAAK,CAAC,uCAAuC,CAAC,CAAC;CAC1D;;;;;;ACpDD,MAOa,wCAAwC;;;;;IACnD,YAAoB,OAAe,EAA+B,WAAmB;QAAjE,YAAO,GAAP,OAAO,CAAQ;QAA+B,gBAAW,GAAX,WAAW,CAAQ;;;QAGnF,IAAI,OAAO,SAAS,KAAK,WAAW,IAAI,SAAS,EAAE;YACjD,qBAAqB,CAAC,OAAO,CAAC,CAAC;SAChC;KACF;;;;;;IAED,KAAK,CAAI,IAAa;QACpB,IAAI,gBAAgB,CAAC,IAAI,CAAC,WAAW,CAAC,EAAE;YACtC,OAAO,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC;SACpC;QACD,OAAO,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;KACrC;;;;;;IAED,KAAK,CAAI,IAAa;QACpB,OAAO,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC;KACpC;;;;;;;IAEO,gBAAgB,CAAI,IAAa;QACvC,IAAI,MAAM,CAAC,eAAe,EAAE,EAAE;YAC5B,OAAO,IAAI,EAAE,CAAC;SACf;QACD,OAAO,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;KAC/B;;;;;;;IAEO,iBAAiB,CAAI,IAAa;QACxC,IAAI,MAAM,CAAC,eAAe,EAAE,EAAE;YAC5B,OAAO,IAAI,CAAC,OAAO,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;SAC7C;QACD,OAAO,IAAI,EAAE,CAAC;KACf;;;YAjCF,UAAU;;;;YANkB,MAAM;yCAQK,MAAM,SAAC,WAAW;;;;;;;IAA5C,2DAAuB;;;;;IAAE,+DAAgD;;;;;;;;AAoCvF,SAAS,qBAAqB,CAAC,MAAc;;;;IAI3C,IAAI,MAAM,YAAY,MAAM,EAAE;QAC5B,OAAO;KACR;IAED,OAAO,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC,CAAC;CACvC;;;;;;ACrDD;AASA,MAAa,gBAAgB,GAAG,IAAI,cAAc,CAAM,kBAAkB,CAAC;;AAC3E,MAAa,mBAAmB,GAAG,IAAI,cAAc,CAAM,qBAAqB,CAAC;;AACjF,MAAa,YAAY,GAAG,IAAI,cAAc,CAAC,cAAc,CAAC;;AAE9D,MAAa,QAAQ,GAAG,WAAW;;AACnC,MAAa,gBAAgB,GAAG,mBAAmB;;AACnD,MAAa,iBAAiB,GAAG,oBAAoB;;;;AAYrD,MAAa,UAAU;IA0CrB;;;;;;;QATA,kBAAa,GAAgB,EAAE,CAAC;;;;QAIhC,oBAAe,GAA0B;YACvC,oBAAoB,EAAE,IAAI;;YAC1B,cAAc,EAAE,IAAI;SACrB,CAAC;QAGA,IAAI,CAAC,aAAa,GAAG;YACnB,2BAA2B,EAAE,KAAK;SACnC,CAAC;QACF,IAAI,CAAC,iBAAiB,GAAG,wCAAwC,CAAC;KACnE;;;YAhDF,UAAU;;;;;;;;;;;IAOT,qCAAyB;;IACzB,mCAOE;;;;;;;;;;;;;IAYF,uCAA+C;;;;;;;;IAO/C,mCAAgC;;;;;IAIhC,qCAGE;;;;;;;AAeJ,2BAoBC;;;;;;IAhBC,kDAAc;;;;;;IAKd,qDAAuC;;;;;;IAKvC,uDAA+B;;;;;;IAK/B,yDAAiD;;;;;;AAQnD,yBAKC;;;;;;;;;IADC,iEAA6D;;;;;;;AAM/D,2BAeC;;;;;;IAXC,4BAA6B;;;;;IAK7B,gCAAa;;;;;IAKb,gCAAwB;;;;;;;AAO1B,MAAa,gBAAgB;;;;;;IAC3B,YACkB,aAAgB,EAChB,YAAe,EACf,WAAoB;QAFpB,kBAAa,GAAb,aAAa,CAAG;QAChB,iBAAY,GAAZ,YAAY,CAAG;QACf,gBAAW,GAAX,WAAW,CAAS;KAClC;CACL;;;IAJG,yCAAgC;;IAChC,wCAA+B;;IAC/B,uCAAoC;;;;;;AAOxC,yBAEC;;;;;;IADC,qDAAgD;;;;;;AAMlD,4BAEC;;;;;;IADC,8DAA8C;;;;;;AAMhD,iCAEC;;;;;;IADC,qEAAkD;;;;;;;ACtKpD;;;;AAKA,MAAa,uBAAuB,GAAG,IAAI,cAAc,CACvD,yBAAyB,CAC1B;;;;AAKD,oCAGC;;;;;;;IAFC,4DAA2B;;;;;;IAC3B,4DAA2B;;;;;;;;;;;;;ACV7B,SAAgB,yBAAyB,CAAC,MAAW;IACnD,IAAI,MAAM,CAAC,WAAW,IAAI,MAAM,CAAC,WAAW,CAAC,IAAI,EAAE;QACjD,OAAO,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC;KAChC;SAAM;QACL,OAAO,MAAM,CAAC,IAAI,CAAC;KACpB;CACF;;;;;;;AAMD,SAAgB,aAAa,CAAC,OAAY;;UAClC,KAAK,GAAG,yBAAyB,CAAC,OAAO,CAAC;IAEhD;;;;IAAO,UAAS,OAAY;QAC1B,OAAO,KAAK,KAAK,yBAAyB,CAAC,OAAO,CAAC,CAAC;KACrD,EAAC;CACH;;;;;;;;;;;;AAYD,MAAa,QAAQ;;;;;;AAAG,CAAC,GAAQ,EAAE,IAAY,EAAE,GAAQ;IACvD,GAAG,qBAAQ,GAAG,CAAE,CAAC;;UAEX,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC;;UACvB,SAAS,GAAG,KAAK,CAAC,MAAM,GAAG,CAAC;IAElC,KAAK,CAAC,MAAM;;;;;;IAAC,CAAC,GAAG,EAAE,IAAI,EAAE,KAAK;QAC5B,IAAI,KAAK,KAAK,SAAS,EAAE;YACvB,GAAG,CAAC,IAAI,CAAC,GAAG,GAAG,CAAC;SACjB;aAAM;YACL,GAAG,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,GAAG,GAAG,CAAC,IAAI,CAAC,CAAC,KAAK,EAAE,qBAAQ,GAAG,CAAC,IAAI,CAAC,CAAE,CAAC;SAC7E;QAED,OAAO,GAAG,IAAI,GAAG,CAAC,IAAI,CAAC,CAAC;KACzB,GAAE,GAAG,CAAC,CAAC;IAER,OAAO,GAAG,CAAC;CACZ,CAAA;;;;;;;;;AASD,MAAa,QAAQ;;;;;AAAG,CAAC,GAAQ,EAAE,IAAY,KAC7C,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,MAAM;;;;;AAAC,CAAC,GAAQ,EAAE,IAAY,KAAK,GAAG,IAAI,GAAG,CAAC,IAAI,CAAC,GAAE,GAAG,CAAC,CAAA;;;;;;;;;;AAU3E,MAAa,QAAQ;;;;AAAG,CAAC,IAAS;IAChC,OAAO,IAAI,IAAI,OAAO,IAAI,KAAK,QAAQ,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;CACjE,CAAA;;;;;;;;;AASD,MAAa,SAAS;;;;;AAAG,CAAC,IAAS,EAAE,GAAG,OAAc;IACpD,IAAI,CAAC,OAAO,CAAC,MAAM;QAAE,OAAO,IAAI,CAAC;;UAC3B,MAAM,GAAG,OAAO,CAAC,KAAK,EAAE;IAE9B,IAAI,QAAQ,CAAC,IAAI,CAAC,IAAI,QAAQ,CAAC,MAAM,CAAC,EAAE;QACtC,KAAK,MAAM,GAAG,IAAI,MAAM,EAAE;YACxB,IAAI,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,EAAE;gBACzB,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC;oBAAE,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE,EAAE,CAAC,GAAG,GAAG,EAAE,EAAE,CAAC,CAAC;gBACnD,SAAS,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC;aACnC;iBAAM;gBACL,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE,EAAE,CAAC,GAAG,GAAG,MAAM,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;aAC7C;SACF;KACF;IAED,OAAO,SAAS,CAAC,IAAI,EAAE,GAAG,OAAO,CAAC,CAAC;CACpC,CAAA;;;;;;AC/FD;;;;AAYA,iCAGC;;;;;;;;;;;AAKD,8BAMC;;;;;IALC,qDAAc;;;;;IAEd,wDAAoB;;;;;IAEpB,oEAAyD;;;;;AAG3D,4BAOC;;;IANC,6BAAoB;;IACpB,gCAAgD;;IAChD,iCAAc;;IACd,6BAAoB;;IACpB,yCAAyC;;IACzC,iCAAgC;;;;;AAGlC,qCAGC;;;;;;IAFC,qEAA8C;;;;;IAC9C,kFAAgF;;;;;AAMlF,oCAGC;;;IAFC,qDAA+B;;IAC/B,+CAAyB;;;;;AAG3B,oCAMC;;;IALC,iDAAyC;;IACzC,2CAA4B;;IAC5B,+CAAoB;;IACpB,6CAA4B;;IAC5B,mDAAgD;;;;;AAGlD,0BAOC;;;IANC,2BAAa;;IACb,oCAAuB;;IACvB,8BAAgD;;IAChD,+BAAc;;IACd,+BAAc;;IACd,2BAAa;;;;;AAGf,gCAGC;;;IAFC,qCAAc;;IACd,mCAAsB;;;;;;AAGxB,4BAGC;;;IAFC,wCAAmB;;IACnB,oCAAe;;;;;;;;;AAQjB,SAAgB,mBAAmB,CAAC,MAA0B;IAC5D,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,QAAQ,CAAC,EAAE;;cAC9B,eAAe,GAAkB;YACrC,IAAI,EAAE,IAAI;YACV,OAAO,EAAE,EAAE;YACX,QAAQ,EAAE,EAAE;YACZ,IAAI,EAAE,IAAI;;;;;YACV,gBAAgB,CAAC,OAA+B;gBAC9C,OAAO,OAAO,CAAC,cAAc,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;aACrD;YACD,QAAQ,EAAE,EAAE;SACb;QAED,MAAM,CAAC,cAAc,CAAC,MAAM,EAAE,QAAQ,EAAE,EAAE,KAAK,EAAE,eAAe,EAAE,CAAC,CAAC;KACrE;IACD,OAAO,gBAAgB,CAAC,MAAM,CAAC,CAAC;CACjC;;;;;;;;AAOD,SAAgB,gBAAgB,CAAC,MAA0B;IACzD,0BAAO,MAAM,CAAC,QAAQ,CAAC,GAAE;CAC1B;;;;;;;;AAOD,SAAgB,sBAAsB,CAAC,MAAgB;IACrD,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,iBAAiB,CAAC,EAAE;;cACvC,eAAe,GAA0B;YAC7C,gBAAgB,EAAE,IAAI;YACtB,UAAU,EAAE,IAAI;YAChB,cAAc,EAAE,IAAI;YACpB,YAAY,EAAE,IAAI;YAClB,kBAAkB;;;YAAE,OAAO,EAAE,CAAC,CAAA;SAC/B;QAED,MAAM,CAAC,cAAc,CAAC,MAAM,EAAE,iBAAiB,EAAE,EAAE,KAAK,EAAE,eAAe,EAAE,CAAC,CAAC;KAC9E;IAED,OAAO,mBAAmB,CAAC,MAAM,CAAC,CAAC;CACpC;;;;;;;;AAOD,SAAgB,mBAAmB,CAAC,MAAW;IAC7C,OAAO,MAAM,CAAC,iBAAiB,CAAC,CAAC;CAClC;;;;;;;;;;;;;AAYD,SAAS,mBAAmB,CAAC,KAAe;;UACpC,WAAW,GAAG,KAAK,CAAC,KAAK,EAAE;IACjC;;;;IAAO,GAAG,IAAI,WAAW,CAAC,MAAM;;;;;IAAC,CAAC,GAAQ,EAAE,IAAY,KAAK,GAAG,IAAI,GAAG,CAAC,IAAI,CAAC,GAAE,GAAG,CAAC,EAAC;CACrF;;;;;;;;;;AASD,SAAS,cAAc,CAAC,KAAe;;UAC/B,QAAQ,GAAG,KAAK;;QAClB,GAAG,GAAG,QAAQ,GAAG,QAAQ,CAAC,CAAC,CAAC;;QAC5B,CAAC,GAAG,CAAC;;UACH,CAAC,GAAG,QAAQ,CAAC,MAAM;;QAErB,IAAI,GAAG,GAAG;IACd,OAAO,EAAE,CAAC,GAAG,CAAC,EAAE;QACd,IAAI,GAAG,IAAI,GAAG,MAAM,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;KACxD;;UAEK,EAAE,GAAG,IAAI,QAAQ,CAAC,OAAO,EAAE,SAAS,GAAG,IAAI,GAAG,GAAG,CAAC;IAExD,0BAAwB,EAAE,GAAC;CAC5B;;;;;;;;;;;AASD,SAAgB,UAAU,CAAC,KAAe,EAAE,MAAkB;IAC5D,IAAI,MAAM,IAAI,MAAM,CAAC,aAAa,IAAI,MAAM,CAAC,aAAa,CAAC,2BAA2B,EAAE;QACtF,OAAO,mBAAmB,CAAC,KAAK,CAAC,CAAC;KACnC;SAAM;QACL,OAAO,cAAc,CAAC,KAAK,CAAC,CAAC;KAC9B;CACF;;;;;;;;;;;;;;;;;;;;;AAoBD,SAAgB,UAAU,CAAC,YAAkC;;UACrD,QAAQ;;;;IAAG,CAAC,UAA8B;;cACxC,IAAI,GAAG,YAAY,CAAC,IAAI;;;;QAAC,CAAC,IAAI,CAAC,KAAK,UAAU,EAAC;;;QAIrD,IAAI,CAAC,OAAO,SAAS,KAAK,WAAW,IAAI,SAAS,KAAK,CAAC,IAAI,EAAE;YAC5D,MAAM,IAAI,KAAK,CACb,0BAA0B,UAAU,sDAAsD,CAC3F,CAAC;SACH;QAED,0BAAO,mBAAA,mBAAA,IAAI,GAAE,QAAQ,CAAC,GAAE,IAAI,GAAE;KAC/B,CAAA;IAED,OAAO,YAAY,CAAC,MAAM;;;;;IACxB,CAAC,MAAqB,EAAE,UAA8B;cAC9C,EAAE,IAAI,EAAE,QAAQ,EAAE,sBAAG,UAAU,CAAC,QAAQ,CAAC,EAAC;QAChD,MAAM,oBAAC,IAAI,GAAE,GAAG,CAAC,QAAQ,IAAI,EAAE,EAAE,GAAG,CAAC,QAAQ,CAAC,CAAC;QAC/C,OAAO,MAAM,CAAC;KACf,GACD,EAAE,CACH,CAAC;CACH;;;;;;;;;;;;;AAYD,SAAgB,WAAW,CAAC,MAA4B;IACtD,OAAO,MAAM,CAAC,MAAM;;;;;IAClB,CAAC,MAAyC,EAAE,UAA8B;;cAClE,IAAI,sBAAG,UAAU,CAAC,QAAQ,CAAC,EAAC;QAClC,MAAM,oBAAC,IAAI,CAAC,IAAI,GAAE,GAAG,UAAU,CAAC;QAChC,OAAO,MAAM,CAAC;KACf,GACD,EAAE,CACH,CAAC;CACH;;;;;;;;;;;;;;;;;;;;;;;;AAsBD,SAAgB,kBAAkB,CAChC,GAAkB,EAClB,SAAgC,EAAE;;UAE5B,KAAK;;;;;IAAG,CAAC,KAAoB,EAAE,SAAiB;QACpD,KAAK,MAAM,GAAG,IAAI,KAAK,EAAE;YACvB,IAAI,KAAK,CAAC,cAAc,CAAC,GAAG,CAAC,IAAI,KAAK,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE;;sBAC7D,MAAM,GAAG,KAAK,CAAC,KAAK,EAAE,GAAG,CAAC;gBAChC,OAAO,MAAM,KAAK,IAAI,GAAG,GAAG,MAAM,IAAI,GAAG,EAAE,GAAG,GAAG,CAAC;aACnD;SACF;QACD,OAAO,IAAI,CAAC;KACb,CAAA;IAED,KAAK,MAAM,GAAG,IAAI,GAAG,EAAE;QACrB,IAAI,GAAG,CAAC,cAAc,CAAC,GAAG,CAAC,EAAE;;kBACrB,MAAM,GAAG,KAAK,CAAC,GAAG,EAAE,GAAG,CAAC;YAC9B,MAAM,CAAC,GAAG,CAAC,GAAG,MAAM,GAAG,GAAG,MAAM,IAAI,GAAG,EAAE,GAAG,GAAG,CAAC;SACjD;KACF;IAED,OAAO,MAAM,CAAC;CACf;;;;;;;;;;;;;;;;;;;;;;AAqBD,SAAgB,eAAe,CAAC,KAAoB;;UAC5C,MAAM,GAAa,EAAE;;UACrB,OAAO,GAA2B,EAAE;;UAEpC,KAAK;;;;;IAAG,CAAC,IAAY,EAAE,YAAsB,EAAE;QACnD,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,EAAE;YAC7B,SAAS,GAAG,EAAE,CAAC;SAChB;QAED,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACrB,OAAO,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC;QAErB,KAAK,CAAC,IAAI,CAAC,CAAC,OAAO;;;;QAAC,CAAC,GAAW;;;YAG9B,IAAI,CAAC,OAAO,SAAS,KAAK,WAAW,IAAI,SAAS,KAAK,SAAS,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;gBAClF,MAAM,IAAI,KAAK,CACb,wBAAwB,GAAG,qBAAqB,IAAI,MAAM,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,CACnF,CAAC;aACH;YAED,IAAI,OAAO,CAAC,GAAG,CAAC,EAAE;gBAChB,OAAO;aACR;YAED,KAAK,CAAC,GAAG,EAAE,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;SAChC,EAAC,CAAC;QAEH,IAAI,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;YAC5B,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SACnB;KACF,CAAA;IAED,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,OAAO;;;;IAAC,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC,EAAC,CAAC;IAE1C,OAAO,MAAM,CAAC,OAAO,EAAE,CAAC;CACzB;;;;;;;;AAOD,SAAgBA,UAAQ,CAAC,GAAQ;IAC/B,OAAO,CAAC,OAAO,GAAG,KAAK,QAAQ,IAAI,GAAG,KAAK,IAAI,KAAK,OAAO,GAAG,KAAK,UAAU,CAAC;CAC/E;;;;;;;AAED,SAAgB,mBAAmB,CACjC,WAAwB,EACxB,IAAsB;;UAEhB,aAAa,GAAM,QAAQ,CAAC,IAAI,CAAC,eAAe,EAAE,WAAW,CAAC,IAAI,CAAC;;UACnE,YAAY,GAAM,QAAQ,CAAC,IAAI,CAAC,WAAW,EAAE,WAAW,CAAC,IAAI,CAAC;IACpE,OAAO,IAAI,gBAAgB,CAAC,aAAa,EAAE,YAAY,EAAE,CAAC,WAAW,CAAC,aAAa,CAAC,CAAC;CACtF;;;;;;ACvXD;;;;AAMA,+BAOC;;;IANC,kCAAU;;IACV,kCAIE;;;;;;;;;AAaJ,SAAgB,QAAQ,CAAC,GAAG,YAA0B;IACpD,OAAO,gBAAgB,CAAC,YAAY,CAAC,CAAC;CACvC;;;;;;;;AAOD,SAAgB,kBAAkB,CAChC,GAAG,YAA0B;IAE7B,OAAO,gBAAgB,CAAC,YAAY,EAAE,+BAAyB,CAAC,CAAC;CAClE;;;;;;;;AAOD,SAAgB,kBAAkB,CAChC,GAAG,YAA0B;IAE7B,OAAO,gBAAgB,CAAC,YAAY,EAAE,+BAAyB,CAAC,CAAC;CAClE;;;;;;;;AAOD,SAAgB,gBAAgB,CAC9B,GAAG,YAA0B;IAE7B,OAAO,gBAAgB,CAAC,YAAY,EAAE,2BAAuB,CAAC,CAAC;CAChE;;;;;;;;AAOD,SAAgB,iBAAiB,CAC/B,GAAG,YAA0B;;UAEvB,eAAe,GAAG;;;;KAIvB;IACD,OAAO,gBAAgB,CAAC,YAAY,EAAE,eAAe,EAAE,eAAe,CAAC,CAAC;CACzE;;;;;;;;AAOD,SAAgB,eAAe,CAC7B,GAAG,YAA0B;IAE7B,OAAO,gBAAgB,CAAC,YAAY,EAAE,yBAAsB,CAAC,CAAC;CAC/D;;;;;;;AAED,SAAS,gBAAgB,CACvB,YAA0B,EAC1B,QAAyB;;;;AAIzB,cAA0D,SAAS;;UAE7D,UAAU,GAAG,2BAA2B,CAAC,YAAY,CAAC;;UACtD,gBAAgB,GAAG,QAAQ,IAAI,wBAAwB,CAAC,QAAQ,CAAC;IACvE;;;;IAAO,UAAS,CAA4B;QAC1C,OAAO,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,UAAU,EAAE,gBAAgB,CAAC,EAAE,WAAW,EAAE,CAAC,CAAC;KAC1E,EAAC;CACH;;;;;;AAED,SAAS,YAAY,CAAC,YAAuB,EAAE,eAA2B;IACxE,OAAO,MAAM;;;;IAAC,CAAC,GAAkB;;cACzB,UAAU,sBAAG,yBAAyB,CAAC,GAAG,CAAC,MAAM,CAAC,EAAC;;cACnD,SAAS,GAAG,YAAY,CAAC,UAAU,CAAC;;cACpC,WAAW,GAAG,eAAe,GAAG,eAAe,CAAC,GAAG,CAAC,MAAM,CAAC,GAAG,IAAI;QACxE,OAAO,SAAS,IAAI,WAAW,CAAC;KACjC,EAAC,CAAC;CACJ;;;;AAED,SAAS,eAAe;IACtB,OAAO,GAAG;;;;IAAC,CAAC,EAAE,MAAM,EAAE,MAAM,EAAE,KAAK,EAAiB;QAClD,0BAAyB;YACvB,MAAM;YACN,MAAM,EAAE;gBACN,UAAU,EAAE,kCAA4B,MAAM;gBAC9C,QAAQ,EAAE,8BAA0B,MAAM;gBAC1C,KAAK;aACN;SACF,GAAC;KACH,EAAC,CAAC;CACJ;;;;;AAED,SAAS,SAAS;IAChB,OAAO,GAAG;;;;IAAC,CAAC,GAAkB,wBAAQ,GAAG,CAAC,MAAM,EAAA,EAAC,CAAC;CACnD;;;;AAED,wBAEC;;;;;AAED,SAAS,2BAA2B,CAAC,KAAmB;IACtD,OAAO,KAAK,CAAC,MAAM;;;;;IAAC,CAAC,SAAoB,EAAE,KAAU;QACnD,SAAS,oBAAC,yBAAyB,CAAC,KAAK,CAAC,GAAE,GAAG,IAAI,CAAC;QACpD,OAAO,SAAS,CAAC;KAClB,sBAAa,EAAE,GAAC,CAAC;CACnB;;;;;AAED,SAAS,wBAAwB,CAAC,QAAwB;IACxD,OAAO,QAAQ,CAAC,MAAM;;;;;IAAC,CAAC,SAAoB,EAAE,MAAoB;QAChE,SAAS,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC;QACzB,OAAO,SAAS,CAAC;KAClB,sBAAa,EAAE,GAAC,CAAC;CACnB;;;;;;ACnJD;;;;;;;AAOA,SAAgB,SAAS,CACvB,qBAA4C;IAE5C;;;;IAAO,CAAC,MAAqB;QAC3B,OAAO,IAAI,UAAU;;;;QAAC,CAAC,IAAiB;YACtC,OAAO,MAAM,CAAC,SAAS,CAAC;;;;;gBACtB,IAAI,CAAC,KAAK;oBACR,qBAAqB,CAAC,KAAK;;;oBAAC,MAAM,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,EAAC,CAAC;iBACrD;;;;;gBACD,KAAK,CAAC,KAAK;oBACT,qBAAqB,CAAC,KAAK;;;oBAAC,MAAM,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,EAAC,CAAC;iBACtD;;;;gBACD,QAAQ;oBACN,qBAAqB,CAAC,KAAK;;;oBAAC,MAAM,IAAI,CAAC,QAAQ,EAAE,EAAC,CAAC;iBACpD;aACF,CAAC,CAAC;SACJ,EAAC,CAAC;KACJ,EAAC;CACH;;;;;;ACzBD,MAKa,6BAA6B;;;;IACxC,YAC2C,kBAAyC;QAAzC,uBAAkB,GAAlB,kBAAkB,CAAuB;KAChF;;;;;;IAEJ,KAAK,CAAI,IAAa;QACpB,OAAO,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;KAC5C;;;;;;IAED,KAAK,CAAI,IAAa;QACpB,OAAO,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;KAC5C;;;YAZF,UAAU;;;;4CAGN,MAAM,SAAC,uBAAuB;;;;;;;IAA/B,2DAAkF;;;;;;;ACPtF;;IAUE,YAAa,YAAY;IACzB,YAAa,YAAY;IACzB,UAAW,UAAU;IACrB,SAAU,SAAS;;;;;;AAGrB,4BAIC;;;IAHC,+BAAqB;;IACrB,+BAAU;;IACV,8BAAc;;;;;;;;;;;;;;;;;;AAkBhB,MAAa,cAAkB,SAAQ,OAAU;IAAjD;;QACU,eAAU,GAAQ,EAAE,CAAC;QACrB,qBAAgB,GAAG,KAAK,CAAC;KAelC;;;;;IAbC,IAAI,CAAC,KAAS;QACZ,IAAI,IAAI,CAAC,gBAAgB,EAAE;YACzB,IAAI,CAAC,UAAU,CAAC,OAAO,oBAAC,KAAK,GAAE,CAAC;YAChC,OAAO;SACR;QACD,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;QAC7B,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAClB,OAAO,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE;;kBAC3B,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC,GAAG,EAAE;YACvC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;SACvB;QACD,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;KAC/B;CACF;;;;;;IAhBC,oCAA6B;;;;;IAC7B,0CAAiC;;;;;AAqBnC,MAAa,eAAgB,SAAQ,cAA6B;;;YADjE,UAAU;;;;;;;AASX,MAAa,OAAQ,SAAQ,UAAyB;;;;;IACpD,YACE,gBAAiC,EACjC,yBAAwD;QAExD,KAAK;;;;QAAC,QAAQ;;kBACN,iBAAiB,GAAG,gBAAgB;iBACvC,IAAI,CAAC,SAAS,CAAC,yBAAyB,CAAC,CAAC;iBAC1C,SAAS,CAAC;gBACT,IAAI;;;;gBAAE,GAAG,IAAI,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;gBAC/B,KAAK;;;;gBAAE,KAAK,IAAI,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC,CAAA;gBACrC,QAAQ;;;gBAAE,MAAM,QAAQ,CAAC,QAAQ,EAAE,CAAA;aACpC,CAAC;YAEJ,QAAQ,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;SACjC,EAAC,CAAC;KACJ;;;YAjBF,UAAU;;;;YAGW,eAAe;YAlE5B,6BAA6B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACmBtC,MAAa,OAAO;;;;AAAG,CAAC,KAAgB;;;;AAAK,CAAC,GAAG,IAAW;;UACpD,IAAI,sBAAG,KAAK,CAAC,KAAK,EAAE,EAAC;IAC3B,OAAO,IAAI,CAAC,GAAG,IAAI;;;;IAAE,CAAC,GAAG,QAAe,KAAK,OAAO,CAAC,KAAK,CAAC,CAAC,GAAG,QAAQ,CAAC,EAAC,CAAC;CAC3E,CAAA,CAAA;;;;;;AC1BD;;;;AAUA,MAAa,WAAY,SAAQ,eAA4B;IAC3D;QACE,KAAK,CAAC,EAAE,CAAC,CAAC;KACX;;;YAJF,UAAU;;;;;;;;;ACTX,MAIa,aAAa;;;;;IAGxB,YAGU,cAA6B,EAG7B,eAA6B;QAH7B,mBAAc,GAAd,cAAc,CAAe;QAG7B,oBAAe,GAAf,eAAe,CAAc;QARhC,YAAO,GAAmB,EAAE,CAAC;QAUlC,IAAI,CAAC,gBAAgB,EAAE,CAAC;KACzB;;;;;IAED,IAAY,WAAW;QACrB,OAAO,CAAC,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,cAAc,CAAC,OAAO,KAAK,IAAI,CAAC,OAAO,CAAC;KAC7E;;;;;IAEO,gBAAgB;;cAChB,cAAc,GAAmB,IAAI,CAAC,iBAAiB,EAAE;QAC/D,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,GAAG,cAAc,CAAC,CAAC;KAC1C;;;;;IAEO,iBAAiB;;cACjB,QAAQ,GAAiB,IAAI,CAAC,eAAe,IAAI,EAAE;QACzD,OAAO,QAAQ,CAAC,GAAG;;;;QACjB,CAAC,MAAkB,yBAChB,MAAM,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,MAAM,GAAiB,EACxE,CAAC;KACH;;;YA9BF,UAAU;;;;YAOiB,aAAa,uBAFpC,QAAQ,YACR,QAAQ;wCAER,MAAM,SAAC,YAAY,cACnB,QAAQ;;;;IAPX,gCAAoC;;;;;IAGlC,uCAEqC;;;;;IACrC,wCAEqC;;;;;;;ACbzC;;;;;;AAmBA,MAAa,+BAAgC,SAAQ,OAAsB;;;YAD1E,UAAU;;AAIX,MAAa,kBAAkB;;;;;;;;;IAG7B,YACU,SAAmB,EACnB,QAAyB,EACzB,cAA+C,EAC/C,cAA6B,EAC7B,YAAyB,EACzB,sBAAqD;QALrD,cAAS,GAAT,SAAS,CAAU;QACnB,aAAQ,GAAR,QAAQ,CAAiB;QACzB,mBAAc,GAAd,cAAc,CAAiC;QAC/C,mBAAc,GAAd,cAAc,CAAe;QAC7B,iBAAY,GAAZ,YAAY,CAAa;QACzB,2BAAsB,GAAtB,sBAAsB,CAA+B;KAC3D;;;;;;IAKJ,QAAQ,CAAC,eAA4B;;cAC7B,MAAM,GAAG,IAAI,CAAC,sBAAsB,CAAC,KAAK;;;QAAC,MAC/C,IAAI,CAAC,gBAAgB,CAAC,eAAe,CAAC,EACvC;QAED,MAAM,CAAC,SAAS,CAAC;YACf,KAAK;;;;YAAE,KAAK,IACV,IAAI,CAAC,sBAAsB,CAAC,KAAK;;;YAAC;gBAChC,IAAI;;oBAEF,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,IAAI,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;oBAC5E,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;iBACvC;gBAAC,WAAM,GAAE;aACX,EAAC,CAAA;SACL,CAAC,CAAC;QAEH,OAAO,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC,CAAC;KAC5D;;;;;;IAEO,gBAAgB,CAAC,eAA4B;QACnD,IAAI,KAAK,CAAC,OAAO,CAAC,eAAe,CAAC,EAAE;YAClC,IAAI,eAAe,CAAC,MAAM,KAAK,CAAC;gBAAE,OAAO,EAAE,CAAC,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,CAAC,CAAC;YAC1E,OAAO,QAAQ,CAAC,eAAe,CAAC,GAAG;;;;YAAC,MAAM,IAAI,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,EAAC,CAAC,CAAC;SAC7E;aAAM;YACL,OAAO,IAAI,CAAC,cAAc,CAAC,eAAe,CAAC,CAAC;SAC7C;KACF;;;;;;IAEO,cAAc,CAAC,MAAW;;cAC1B,IAAI,GAAuB,yBAAyB,CAAC,MAAM,CAAC;QAClE,IAAI,CAAC,IAAI,EAAE;;kBACH,KAAK,GAAG,IAAI,KAAK,CACrB,6CAA6C,MAAM,CAAC,WAAW,CAAC,IAAI,EAAE,CACvE;YACD,OAAO,UAAU,CAAC,KAAK,CAAC,CAAC;SAC1B;;cAEK,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE;;cACxC,OAAO,GAAG,IAAI,CAAC,cAAc,CAAC,OAAO;QAE3C,OAAO,oBAAC,OAAO,CAAC;YACd,GAAG,OAAO;;;;;;YACV,CAAC,SAAc,EAAE,UAAe;gBAC9B,IAAI,SAAS,KAAK,SAAS,EAAE;oBAC3B,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;iBACnC;;sBACK,aAAa,GAAG,IAAI,CAAC,qBAAqB,CAAC,UAAU,CAAC;gBAC5D,aAAa,CAAC,SAAS;;;;gBAAC,GAAG,IAAI,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,EAAC,CAAC;gBACxD,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,UAAU,EAAE,MAAM,iCAA2B,CAAC,CAAC;gBAC5E,OAAO,IAAI,CAAC,wBAAwB,CAAC,aAAa,CAAC,CAAC;aACrD;SACF,CAAC,CAAC,SAAS,EAAE,MAAM,CAAC,IAAqB,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC;KAC/D;;;;;;IAEO,qBAAqB,CAAC,MAAW;QACvC,OAAO,IAAI,CAAC,cAAc,CAAC,IAAI,CAC7B,MAAM;;;;QACJ,CAAC,GAAkB,KAAK,GAAG,CAAC,MAAM,KAAK,MAAM,IAAI,GAAG,CAAC,MAAM,oCAC5D,EACD,IAAI,CAAC,CAAC,CAAC,EACP,WAAW,EAAE,CACd,CAAC;KACH;;;;;;IAEO,wBAAwB,CAAC,aAAwC;QACvE,OAAO,aAAa;aACjB,IAAI,CACH,UAAU;;;;QAAC,CAAC,GAAkB;YAC5B,QAAQ,GAAG,CAAC,MAAM;gBAChB;oBACE,OAAO,EAAE,CAAC,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,CAAC,CAAC;gBAC1C;oBACE,OAAO,UAAU,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;gBAC/B;oBACE,OAAO,KAAK,CAAC;aAChB;SACF,EAAC,CACH;aACA,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC;KACxB;;;YA/FF,UAAU;;;;YArBwB,QAAQ;YAKL,eAAe;YAuBzB,+BAA+B;YArBlD,aAAa;YADb,WAAW;YAEX,6BAA6B;;;;;;;IAepC,2CAAoC;;;;;IAGlC,uCAA2B;;;;;IAC3B,sCAAiC;;;;;IACjC,4CAAuD;;;;;IACvD,4CAAqC;;;;;IACrC,0CAAiC;;;;;IACjC,oDAA6D;;;;;;;;;;;;AC3BjE,MAAa,UAAU;;;;AAAG,CAAC,CAAM;IAC/B,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;;UAEX,WAAW,GAAG,OAAO,CAAC,KAAK,UAAU;;UACrC,UAAU,GAAG,MAAM,CAAC,SAAS,CAAC,cAAc;IAElD,MAAM,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC,OAAO;;;;IAAC,UAAS,IAAI;QACjD,IACE,UAAU,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC;aACvB,WAAW,GAAG,IAAI,KAAK,QAAQ,IAAI,IAAI,KAAK,QAAQ,IAAI,IAAI,KAAK,WAAW,GAAG,IAAI,CAAC;YACrF,CAAC,CAAC,IAAI,CAAC,KAAK,IAAI;aACf,OAAO,CAAC,CAAC,IAAI,CAAC,KAAK,QAAQ,IAAI,OAAO,CAAC,CAAC,IAAI,CAAC,KAAK,UAAU,CAAC;YAC9D,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,EACzB;YACA,UAAU,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;SACrB;KACF,EAAC,CAAC;IAEH,OAAO,CAAC,CAAC;CACV,CAAA;;;;;;ACvBD;;;;AAaA,MAAa,uBAAuB;;;;;;IAClC,YACU,YAAyB,EACzB,WAA+B,EAC/B,OAAmB;QAFnB,iBAAY,GAAZ,YAAY,CAAa;QACzB,gBAAW,GAAX,WAAW,CAAoB;QAC/B,YAAO,GAAP,OAAO,CAAY;KACzB;;;;;IAKJ,sBAAsB;;cACd,mBAAmB,GAAG;YAC1B,QAAQ;;;YAAE,MAAM,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,CAAA;YAC5C,QAAQ;;;;YAAE,CAAC,QAAa,KAAK,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAA;YAC7D,QAAQ;;;;YAAE,CAAC,eAA4B,KAAK,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAA;SACvF;QAED,OAAO,IAAI,CAAC,OAAO,CAAC,eAAe;cAC/B,iCAAiC,CAAC,mBAAmB,CAAC;cACtD,mBAAmB,CAAC;KACzB;;;;;IAED,2BAA2B,CAAC,OAA0B;;cAC9C,eAAe,GAAyB,IAAI,CAAC,sBAAsB,EAAE;;;cAGrE,YAAY,GAAG,eAAe,CAAC,QAAQ,EAAE;;QAE/C,eAAe,CAAC,QAAQ,mBAAM,YAAY,EAAK,OAAO,CAAC,QAAQ,EAAG,CAAC;KACpE;;;YA9BF,UAAU;;;;YARF,WAAW;YADX,kBAAkB;YAElB,UAAU;;;;;;;IAUf,+CAAiC;;;;;IACjC,8CAAuC;;;;;IACvC,0CAA2B;;;;;;;AA6B/B,SAAS,iCAAiC,CAAC,IAA0B;IACnE,OAAO;QACL,QAAQ;;;QAAE,MAAM,IAAI,CAAC,QAAQ,EAAE,CAAA;QAC/B,QAAQ;;;;QAAE,KAAK;;kBACP,WAAW,GAAG,UAAU,CAAC,KAAK,CAAC;YACrC,OAAO,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;SACnC,CAAA;QACD,QAAQ;;;;QAAE,OAAO;YACf,OAAO,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;SAC/B,CAAA;KACF,CAAC;CACH;;;;;;ACzDD;;;;;AAMA,SAAgB,WAAW,CAAI,GAAe;IAC5C;;;;IAAO,CAAC,aAA0B;QAChC,IAAI,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE;YACtB,uBAAuB,EAAE,CAAC;SAC3B;aAAM,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE;YAClC,2BAA2B,EAAE,CAAC;SAC/B;;cAEK,QAAQ,yCAAc,aAAa,IAAU;QACnD,KAAK,MAAM,GAAG,IAAI,GAAG,EAAE;;;YAGrB,QAAQ,CAAC,GAAG,CAAC,GAAG,oBAAC,GAAG,IAAS,GAAG,CAAC,CAAC;SACnC;QAED,0BAAO,QAAQ,GAAM;KACtB,EAAC;CACH;;;;;;ACvBD;;;;AAcA,MAAa,mBAAmB;;;;IAC9B,YAAoB,wBAAiD;QAAjD,6BAAwB,GAAxB,wBAAwB,CAAyB;KAAI;;;;;;;IAKzE,kBAAkB,CAAI,WAAwB;;cACtC,IAAI,GAAG,IAAI,CAAC,wBAAwB,CAAC,sBAAsB,EAAE;;;;;QAEnE,SAAS,QAAQ,CAAC,eAAoB;YACpC,OAAO,QAAQ,CAAC,eAAe,EAAE,WAAW,CAAC,IAAI,CAAC,CAAC;SACpD;;;;;;QAED,SAAS,aAAa,CAAC,eAAoB,EAAE,QAAW;;kBAChD,WAAW,GAAG,QAAQ,CAAC,eAAe,EAAE,WAAW,CAAC,IAAI,EAAE,QAAQ,CAAC;;kBACnE,QAAQ,GAAkB,WAAW,CAAC,QAAQ;YAEpD,IAAI,QAAQ,CAAC,aAAa,EAAE;;sBACpB,MAAM,GAAqB,mBAAmB,CAAI,WAAW,EAAE;oBACnE,eAAe;oBACf,WAAW;iBACZ,CAAC;gBAEF,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;aAChC;YAED,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;YAC3B,OAAO,WAAW,CAAC;;;;;;;SAOpB;;;;;;QAED,SAAS,oBAAoB,CAAC,eAAoB,EAAE,aAA+B;;kBAC3E,KAAK,GAAG,QAAQ,CAAC,eAAe,CAAC;;kBACjC,QAAQ,GAAG,aAAa,CAAC,KAAK,CAAC;YACrC,OAAO,aAAa,CAAC,eAAe,EAAE,QAAQ,CAAC,CAAC;SACjD;;;;;QAED,SAAS,eAAe,CAAC,KAA2B;YAClD,OAAO,OAAO,KAAK,KAAK,UAAU,CAAC;SACpC;QAED,OAAO;;;;YACL,QAAQ;;sBACA,eAAe,GAAG,IAAI,CAAC,QAAQ,EAAE;gBACvC,OAAO,QAAQ,CAAC,eAAe,CAAC,CAAC;aAClC;;;;;YACD,UAAU,CAAC,GAAe;;sBAClB,eAAe,GAAG,IAAI,CAAC,QAAQ,EAAE;;sBACjC,aAAa,GAAG,WAAW,CAAI,GAAG,CAAC;gBACzC,OAAO,oBAAoB,CAAC,eAAe,EAAE,aAAa,CAAC,CAAC;aAC7D;;;;;YACD,QAAQ,CAAC,GAAyB;;sBAC1B,eAAe,GAAG,IAAI,CAAC,QAAQ,EAAE;gBACvC,OAAO,eAAe,CAAC,GAAG,CAAC;sBACvB,oBAAoB,CAAC,eAAe,EAAE,GAAG,CAAC;sBAC1C,aAAa,CAAC,eAAe,EAAE,GAAG,CAAC,CAAC;aACzC;;;;;YACD,QAAQ,CAAC,OAAoB;gBAC3B,OAAO,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;aAC/B;SACF,CAAC;KACH;;;YAnEF,UAAU;;;;YAPF,uBAAuB;;;;;;;IASlB,uDAAyD;;;;;;;ACfvE;;;AAQA,MAAsB,eAAe;;;;;IAGnC,OAAO,8BAA8B,CAAC,IAAmB;QACvD,IAAI,CAAC,IAAI,EAAE;YACT,2BAA2B,EAAE,CAAC;SAC/B;aAAM,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;YAC1C,mBAAmB,CAAC,IAAI,CAAC,CAAC;SAC3B;KACF;;;;;;;IAED,OAAO,0BAA0B,CAC/B,SAAiB,EACjB,KAAyB,EACzB,YAA0B;;cAEpB,aAAa,GAAG,YAAY,CAAC,SAAS,CAAC;QAC7C,IAAI,aAAa,IAAI,aAAa,KAAK,KAAK,EAAE;YAC5C,qBAAqB,CAAC,SAAS,EAAE,KAAK,CAAC,IAAI,EAAE,aAAa,CAAC,IAAI,CAAC,CAAC;SAClE;KACF;;;;;IAED,OAAO,sCAAsC,CAC3C,YAAkC;QAElC,YAAY,CAAC,OAAO;;;;QAAC,CAAC,UAA8B;YAClD,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC,EAAE;gBACjC,wBAAwB,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;aAC3C;SACF,EAAC,CAAC;KACJ;;AA7Bc,8BAAc,GAAW,IAAI,MAAM,CAAC,iBAAiB,CAAC,CAAC;;;;;;IAAtE,+BAAsE;;;;;;;ACTxE;;;;AA2CA,MAAa,YAAY;;;;;;;;;;IAGvB,YACU,SAAmB,EACnB,OAAmB,EAGnB,cAA4B,EAC5B,QAAyB,EACzB,cAA+C,EAC/C,oBAAyC,EAGzC,aAAkB;QAVlB,cAAS,GAAT,SAAS,CAAU;QACnB,YAAO,GAAP,OAAO,CAAY;QAGnB,mBAAc,GAAd,cAAc,CAAc;QAC5B,aAAQ,GAAR,QAAQ,CAAiB;QACzB,mBAAc,GAAd,cAAc,CAAiC;QAC/C,yBAAoB,GAApB,oBAAoB,CAAqB;QAGzC,kBAAa,GAAb,aAAa,CAAK;QAbpB,yBAAoB,GAAwB,IAAI,CAAC;QAgBjD,YAAO,GAAkB,EAAE,CAAC;QAM5B,kBAAa,GAAiB,EAAE,CAAC;QAMjC,gBAAW,GAA0B,EAAE,CAAC;QAMhD,8BAAyB,GAAG,OAAO;;;QAAC;;kBAC5B,YAAY,GAAG,IAAI;;;;;YAEzB,SAAS,aAAa,CAAC,GAAW;;sBAC1B,IAAI,GAAG,YAAY,CAAC,UAAU,CAAC,GAAG,CAAC;gBACzC,OAAO,IAAI,GAAG,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE,YAAY,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC;aACxE;;kBAEK,OAAO,GAA2B,IAAI,CAAC,cAAc;kBACvD,IAAI,CAAC,cAAc,CAAC,yBAAyB,EAAE;kBAC/C;;;;;oBACE,cAAc,CAAC,GAAW;;4BACpB,MAAM,GAAG,aAAa,CAAC,GAAG,CAAC;wBAC/B,IAAI,MAAM,EAAE;4BACV,OAAO,MAAM,CAAC;yBACf;wBACD;;;;wBAAO,CAAC,GAAG,IAAI;;4BAEb,IAAI,CAAC,MAAM,EAAE;gCACX,MAAM,GAAG,aAAa,CAAC,GAAG,CAAC,CAAC;6BAC7B;4BACD,OAAO,MAAM,GAAG,MAAM,CAAC,GAAG,IAAI,CAAC,GAAG,SAAS,CAAC;yBAC7C,EAAC;qBACH;;;;;oBACD,kBAAkB,CAAC,YAAoC;;8BAC/C,qBAAqB,GAAG,YAAY,CAAC,OAAO,CAAC,eAAe;wBAClE,yBACK,qBAAqB,GACpB,YAAY,IAAI,EAAE,GACtB;qBACH;iBACF;YACL,OAAO,OAAO,CAAC;SAChB,EAAC,CAAC;KArDC;;;;IAIJ,IAAI,MAAM;QACR,OAAO,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC;KACxE;;;;IAID,IAAI,YAAY;QACd,OAAO,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,cAAc,CAAC,YAAY,GAAG,IAAI,CAAC,aAAa,CAAC;KACpF;;;;;IAID,IAAY,UAAU;QACpB,OAAO,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,cAAc,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC;KAChF;;;;;;IAqCO,OAAO,aAAa,CAAC,QAAa;;YACpC,KAAK,GAAG,EAAE;QAEd,IAAI,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE;YAC3B,KAAK,GAAG,QAAQ,CAAC,KAAK,EAAE,CAAC;SAC1B;aAAM,IAAIA,UAAQ,CAAC,QAAQ,CAAC,EAAE;YAC7B,KAAK,qBAAQ,QAAQ,CAAE,CAAC;SACzB;aAAM,IAAI,QAAQ,KAAK,SAAS,EAAE;YACjC,KAAK,GAAG,EAAE,CAAC;SACZ;aAAM;YACL,KAAK,GAAG,QAAQ,CAAC;SAClB;QAED,OAAO,KAAK,CAAC;KACd;;;;IAED,WAAW;;;;;QAKT,mBAAA,IAAI,CAAC,oBAAoB,GAAE,WAAW,EAAE,CAAC;KAC1C;;;;;;IAKD,GAAG,CAAC,YAAkC;;;QAGpC,IAAI,OAAO,SAAS,KAAK,WAAW,IAAI,SAAS,EAAE;YACjD,eAAe,CAAC,sCAAsC,CAAC,YAAY,CAAC,CAAC;SACtE;cAEK,EAAE,SAAS,EAAE,GAAG,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC;QACvD,IAAI,CAAC,SAAS,CAAC,MAAM;YAAE,OAAO,EAAE,CAAC;;cAE3B,UAAU,GAAkB,UAAU,CAAC,SAAS,CAAC;;cACjD,YAAY,GAAa,eAAe,CAAC,UAAU,CAAC;;cACpD,KAAK,GAA0B,kBAAkB,CAAC,UAAU,CAAC;;cAC7D,SAAS,GAAsC,WAAW,CAAC,SAAS,CAAC;;cACrE,kBAAkB,GAAkB,EAAE;QAE5C,KAAK,MAAM,IAAI,IAAI,YAAY,EAAE;;kBACzB,UAAU,GAAuB,SAAS,CAAC,IAAI,CAAC;;kBAChD,IAAI,GAAW,KAAK,CAAC,IAAI,CAAC;;kBAC1B,IAAI,sBAAkB,UAAU,CAAC,QAAQ,CAAC,EAAC;YAEjD,IAAI,CAAC,oBAAoB,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;;kBAEhC,QAAQ,GAAgB;gBAC5B,IAAI;gBACJ,IAAI;gBACJ,aAAa,EAAE,KAAK;gBACpB,OAAO,EAAE,IAAI,CAAC,OAAO;gBACrB,QAAQ,EAAE,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,UAAU,CAAC;gBACxC,QAAQ,EAAE,YAAY,CAAC,aAAa,CAAC,IAAI,CAAC,QAAQ,CAAC;aACpD;;;;YAKD,IAAI,CAAC,IAAI,CAAC,6BAA6B,CAAC,IAAI,EAAE,IAAI,CAAC,EAAE;gBACnD,kBAAkB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;aACnC;YAED,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;SAC5B;QAED,OAAO,kBAAkB,CAAC;KAC3B;;;;;;IAKD,oBAAoB,CAAC,YAAkC;;cAC/C,OAAO,GAAyB,YAAY,IAAI,EAAE;;cAElD,YAAY,GAAkB,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC;;cAC/C,QAAQ,GAAG,YAAY,CAAC,MAAM;;;;;QAClC,CAAC,MAAW,EAAE,WAAwB,KACpC,QAAQ,CAAC,MAAM,EAAE,WAAW,CAAC,IAAI,EAAE,WAAW,CAAC,QAAQ,CAAC,GAC1D,EAAE,CACH;QACD,OAAO,EAAE,QAAQ,EAAE,MAAM,EAAE,YAAY,EAAE,CAAC;KAC3C;;;;;IAKD,qBAAqB;QACnB,IAAI,IAAI,CAAC,oBAAoB,KAAK,IAAI;YAAE,OAAO;;cACzC,WAAW,GAAG,IAAI,OAAO,EAAiB;QAChD,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC,QAAQ;aACtC,IAAI,CACH,MAAM;;;;QAAC,CAAC,GAAkB,KAAK,GAAG,CAAC,MAAM,oCAA6B,EACtE,QAAQ;;;;QAAC,GAAG;YACV,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;;kBAChB,MAAM,GAAG,GAAG,CAAC,MAAM;YACzB,OAAO,IAAI,CAAC,aAAa,CAAC,WAAW,qBAAE,MAAM,GAAE,CAAC,IAAI,CAClD,GAAG;;;YAAC,yBAAqB,EAAE,MAAM,EAAE,MAAM,iCAA2B,EAAA,EAAC,EACrE,cAAc,oBAAgB,EAAE,MAAM,EAAE,MAAM,6BAAyB,GAAC,EACxE,UAAU;;;;YAAC,KAAK,IACd,EAAE,oBAAgB,EAAE,MAAM,EAAE,MAAM,2BAAwB,KAAK,EAAE,GAAC,EACnE,CACF,CAAC;SACH,EAAC,CACH;aACA,SAAS;;;;QAAC,GAAG,IAAI,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,GAAG,CAAC,EAAC,CAAC;KACpD;;;;;;;IAKD,aAAa,CAAC,WAAsC,EAAE,MAAW;;cACzD,IAAI,sBAAG,yBAAyB,CAAC,MAAM,CAAC,EAAC;;cACzC,OAAO,GAAG,EAAE;QAElB,KAAK,MAAM,QAAQ,IAAI,IAAI,CAAC,MAAM,EAAE;;kBAC5B,WAAW,GAAG,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC;YAE1C,IAAI,WAAW,EAAE;gBACf,KAAK,MAAM,UAAU,IAAI,WAAW,EAAE;;0BAC9B,YAAY,GAAG,IAAI,CAAC,oBAAoB,CAAC,kBAAkB,CAAC,QAAQ,CAAC;oBAC3E,IAAI;;4BACE,MAAM,GAAG,QAAQ,CAAC,QAAQ,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC,YAAY,EAAE,MAAM,CAAC;wBAEnE,IAAI,MAAM,YAAY,OAAO,EAAE;4BAC7B,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC;yBACvB;wBAED,IAAI,MAAM,YAAY,UAAU,EAAE;;;;;;;;;4BAShC,MAAM,GAAG,MAAM,CAAC,IAAI,CAClB,QAAQ;;;;4BAAC,CAAC,KAAU;gCAClB,IAAI,KAAK,YAAY,OAAO,EAAE;oCAC5B,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC;iCACpB;gCACD,IAAI,KAAK,YAAY,UAAU,EAAE;oCAC/B,OAAO,KAAK,CAAC;iCACd;gCACD,OAAO,EAAE,CAAC,KAAK,CAAC,CAAC;6BAClB,EAAC,EACF,cAAc,CAAC,EAAE,CAAC,CACnB,CAAC;4BAEF,IAAI,UAAU,CAAC,OAAO,CAAC,iBAAiB,EAAE;;gCAExC,MAAM,GAAG,MAAM,CAAC,IAAI,CAClB,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,kBAAkB,oBAAC,MAAM,GAAQ,CAAC,CAAC,CAC/D,CAAC;6BACH;yBACF;6BAAM;4BACL,MAAM,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC;yBACrC;wBAED,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;qBACtB;oBAAC,OAAO,CAAC,EAAE;wBACV,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;qBAC7B;iBACF;aACF;SACF;QAED,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE;YACnB,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;SACtB;QAED,OAAO,QAAQ,CAAC,OAAO,CAAC,CAAC;KAC1B;;;;;;IAEO,cAAc,CACpB,YAAkC;;cAE5B,SAAS,GAAyB,EAAE;;cACpC,SAAS,GAAiB,IAAI,CAAC,YAAY;QAEjD,KAAK,MAAM,UAAU,IAAI,YAAY,EAAE;;kBAC/B,SAAS,sBAAG,gBAAgB,CAAC,UAAU,CAAC,CAAC,IAAI,EAAC;;;YAGpD,IAAI,OAAO,SAAS,KAAK,WAAW,IAAI,SAAS,EAAE;gBACjD,eAAe,CAAC,0BAA0B,CAAC,SAAS,EAAE,UAAU,EAAE,SAAS,CAAC,CAAC;aAC9E;;kBACK,cAAc,GAAG,CAAC,SAAS,CAAC,SAAS,CAAC;YAC5C,IAAI,cAAc,EAAE;gBAClB,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;gBAC3B,SAAS,CAAC,SAAS,CAAC,GAAG,UAAU,CAAC;aACnC;SACF;QAED,OAAO,EAAE,SAAS,EAAE,CAAC;KACtB;;;;;;;IAEO,oBAAoB,CAAC,IAAmB,EAAE,IAAY;QAC5D,IAAI,CAAC,UAAU,oBAAC,IAAI,CAAC,IAAI,GAAE,GAAG,IAAI,CAAC;;;;QAInC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;KAClB;;;;;;;;;;IASO,6BAA6B,CAAC,IAAY,EAAE,IAAY;;cACxD,iCAAiC,GACrC,QAAQ,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,KAAK,SAAS;QAClD,OAAO,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,iCAAiC,CAAC;KACrE;;;YAnSF,UAAU;;;;YA1CU,QAAQ;YAYV,UAAU;YAuCD,YAAY,uBAFnC,QAAQ,YACR,QAAQ;YAlByB,eAAe;YAC5C,+BAA+B;YAC/B,mBAAmB;4CAqBvB,QAAQ,YACR,MAAM,SAAC,mBAAmB;;;;;;;IAZ7B,4CAAyD;;;;;IAgBzD,+BAAoC;;;;;IAMpC,qCAAyC;;;;;IAMzC,mCAAgD;;IAMhD,iDAiCG;;;;;IAhED,iCAA2B;;;;;IAC3B,+BAA2B;;;;;IAC3B,sCAEoC;;;;;IACpC,gCAAiC;;;;;IACjC,sCAAuD;;;;;IACvD,4CAAiD;;;;;IACjD,qCAE0B;;;;;;;ACzD9B,MAUa,qBAAqB;;;;;;IAChC,YACU,uBAAgD,EAChD,mBAAwC,EACxC,YAA8B;QAF9B,4BAAuB,GAAvB,uBAAuB,CAAyB;QAChD,wBAAmB,GAAnB,mBAAmB,CAAqB;QACxC,iBAAY,GAAZ,YAAY,CAAkB;KACpC;;;;;;;IAEJ,aAAa,CAAI,MAAS,EAAE,OAAsC;QAChE,IAAI,CAAC,uBAAuB;aACzB,sBAAsB,EAAE;aACxB,QAAQ,CAAC,MAAM,CAAC;aAChB,IAAI,CACH,MAAM;;;QAAC,MAAM,CAAC,CAAC,OAAO,EAAC,EACvB,GAAG;;;QAAC,MAAM,IAAI,CAAC,UAAU,CAAC,mBAAA,OAAO,GAAE,MAAM,CAAC,EAAC,EAC3C,QAAQ;;;QAAC,MAAM,IAAI,CAAC,YAAY,CAAC,gBAAgB,EAAC,EAClD,MAAM;;;;QAAC,eAAe,IAAI,CAAC,CAAC,eAAe,EAAC,CAC7C;aACA,SAAS;;;QAAC,MAAM,IAAI,CAAC,eAAe,CAAC,mBAAA,OAAO,GAAE,MAAM,CAAC,EAAC,CAAC;KAC3D;;;;;;IAKD,UAAU,CAAC,YAA2B;QACpC,KAAK,MAAM,WAAW,IAAI,YAAY,EAAE;;kBAChC,QAAQ,GAAkB,WAAW,CAAC,QAAQ;YAEpD,IAAI,QAAQ,CAAC,aAAa,EAAE;;sBACpB,eAAe,GAAgB,EAAE;;sBACjC,WAAW,GAAgB,IAAI,CAAC,uBAAuB;qBAC1D,sBAAsB,EAAE;qBACxB,QAAQ,EAAE;;sBAEP,eAAe,GAAqB,mBAAmB,CAAC,WAAW,EAAE;oBACzE,eAAe;oBACf,WAAW;iBACZ,CAAC;gBAEF,QAAQ,CAAC,aAAa,CAAC,eAAe,CAAC,CAAC;aACzC;YAED,IAAI,QAAQ,CAAC,UAAU,EAAE;gBACvB,QAAQ,CAAC,UAAU,CAAC,IAAI,CAAC,eAAe,CAAC,WAAW,CAAC,CAAC,CAAC;aACxD;YAED,WAAW,CAAC,aAAa,GAAG,IAAI,CAAC;SAClC;KACF;;;;;;IAKD,eAAe,CAAC,YAA2B;QACzC,KAAK,MAAM,WAAW,IAAI,YAAY,EAAE;;kBAChC,QAAQ,GAAkB,WAAW,CAAC,QAAQ;YACpD,IAAI,QAAQ,CAAC,kBAAkB,EAAE;gBAC/B,QAAQ,CAAC,kBAAkB,CAAC,IAAI,CAAC,eAAe,CAAC,WAAW,CAAC,CAAC,CAAC;aAChE;SACF;KACF;;;;;;IAEO,eAAe,CAAC,WAAwB;QAC9C,OAAO,IAAI,CAAC,mBAAmB,CAAC,kBAAkB,CAAC,WAAW,CAAC,CAAC;KACjE;;;YAhEF,UAAU;;;;YAJF,uBAAuB;YADvB,mBAAmB;YAHnB,gBAAgB;;;;;;;IAWrB,wDAAwD;;;;;IACxD,oDAAgD;;;;;IAChD,6CAAsC;;;;;;;ACd1C;MAaM,yBAAyB,GAAG,4BAA4B;;AAE9D,MAAa,2BAA2B,GAAG;IACzC,UAAU;;;;IAAE,CAAC,MAAW;QACtB,OAAO,CAAC,MAAM,IAAI,oBAAM,MAAM,IAAE,yBAAyB,CAAC,KAAK,EAAE,CAAC;KACnE,CAAA;IACD,aAAa;;;;;IAAE,CAAC,MAAW,EAAE,OAA8B;QACzD,IAAI,CAAC,MAAM;YAAE,OAAO;QACpB,oBAAM,MAAM,IAAE,yBAAyB,CAAC,GAAG,OAAO,CAAC;KACpD,CAAA;CACF;;;;AAED,+BAIC;;;IAHC,0CAAoB;;IACpB,wCAAqB;;IACrB,8CAAiD;;;;;AAGnD,kCAGC;;;IAFC,8CAAuC;;IACvC,wDAAiD;;;;;;;;;;AASnD,SAAgB,cAAc,CAC5B,SAA4B,EAC5B,UAAa,EACb,gBAAmC;;UAE7B,cAAc,GAAG,gBAAgB,IAAI,gBAAgB,CAAC,cAAc;;UACpE,SAAS;;;;IAAG,SAAS,iBAAiB,CAAC,GAAG,IAAW;;cACnD,WAAW,GAAG,UAAU,CAAC,KAAK,CAAC,cAAc,EAAE,IAAI,CAAC;QAC1D,IAAI,WAAW,YAAY,QAAQ,EAAE;;kBAC7B,eAAe,GAAG,OAAO,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,WAAW,CAAC,CAAC;YAC1D,OAAO,eAAe,CAAC;SACxB;QACD,OAAO,WAAW,CAAC;KACpB,GAAK;;UACA,UAAU,GAAG,OAAO,CAAC,SAAS,CAAC;IACrC,MAAM,CAAC,cAAc,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC;;UAExC,gBAAgB,GAAG,qBAAqB,CAAI,UAAU,EAAE,gBAAgB,CAAC;;UAEzE,gBAAgB;;;;IAAoB,CAAC,OAA+B;cAClE,EAAE,yBAAyB,EAAE,eAAe,EAAE,GAAG,sBAAsB,CAC3E,OAAO,EACP,gBAAgB,EAChB,SAAS,CACV;QAED;;;;QAAO,SAAS,cAAc,CAAC,SAAc;;;kBAErC,OAAO,GAAG,yBAAyB,CAAC,GAAG;;;;YAAC,KAAK,IAAI,KAAK,CAAC,SAAS,CAAC,EAAC;;;;YAKxE,IAAI;gBACF,OAAO,UAAU,CAAC,GAAG,OAAO,CAAC,CAAC;aAC/B;YAAC,OAAO,EAAE,EAAE;gBACX,IAAI,EAAE,YAAY,SAAS,IAAI,eAAe,CAAC,cAAc,EAAE;oBAC7D,OAAO,SAAS,CAAC;iBAClB;gBAED,MAAM,EAAE,CAAC;aACV;SACF,EAAC;KACH,CAAA;IAED,gBAAgB,CAAC,gBAAgB,GAAG,gBAAgB,CAAC;IAErD,OAAO,UAAU,CAAC;CACnB;;;;;;;AAED,SAAS,qBAAqB,CAC5B,UAAa,EACb,gBAA8C;;UAExC,gBAAgB,GAAG,sBAAsB,CAAC,UAAU,CAAC;IAC3D,gBAAgB,CAAC,UAAU,GAAG,UAAU,CAAC;;QACrC,0BAA0B;;;IAAG,OAAO,EAAE,CAAC,CAAA;IAC3C,IAAI,gBAAgB,EAAE;QACpB,gBAAgB,CAAC,cAAc,GAAG,gBAAgB,CAAC,cAAc,CAAC;QAClE,gBAAgB,CAAC,YAAY,GAAG,gBAAgB,CAAC,YAAY,CAAC;QAC9D,0BAA0B;YACxB,gBAAgB,CAAC,kBAAkB,IAAI,0BAA0B,CAAC;KACrE;;UACK,qBAAqB,qBAAQ,gBAAgB,CAAE;IACrD,gBAAgB,CAAC,kBAAkB;;;IAAG,MACpC,uBAAuB,CAAC,qBAAqB,EAAE,0BAA0B,EAAE,CAAC,CAAA,CAAC;IAC/E,OAAO,gBAAgB,CAAC;CACzB;;;;;;;AAED,SAAS,sBAAsB,CAC7B,OAA+B,EAC/B,gBAAuC,EACvC,YAA+B,EAAE;;UAE3B,oBAAoB,GAAG,gBAAgB,CAAC,kBAAkB,EAAE;;UAC5D,eAAe,GAAG,OAAO,CAAC,kBAAkB,CAAC,oBAAoB,CAAC;;UAClE,gBAAgB,GAAG,mBAAmB,CAC1C,SAAS,EACT,eAAe,EACf,gBAAgB,CAAC,cAAc,CAChC;;UAEK,yBAAyB,GAAG,gBAAgB,CAAC,GAAG;;;;IAAC,QAAQ;;cACvD,OAAO,GAAG,sBAAsB,CAAC,QAAQ,CAAC;QAChD,OAAO,OAAO,CAAC,OAAO,CAAC,CAAC;KACzB,EAAC;IACF,OAAO;QACL,eAAe;QACf,yBAAyB;KAC1B,CAAC;CACH;;;;;;AAED,SAAS,uBAAuB,CAC9B,gBAAuC,EACvC,eAAsC;IAEtC,0BACM,2BAA2B,CAAC,UAAU,CAAC,gBAAgB,CAAC,cAAc,CAAC,IAAI,EAAE,IAC7E,2BAA2B,CAAC,UAAU,CAAC,gBAAgB,CAAC,UAAU,CAAC,IAAI,EAAE,IACzE,gBAAgB,CAAC,kBAAkB,EAAE,IAAI,EAAE,GAC5C,eAAe,EAClB;CACH;;;;;;;AAED,SAAS,mBAAmB,CAC1B,YAA+B,EAAE,EACjC,eAAsC,EACtC,cAAmB;;UAEb,gBAAgB,GAAG,EAAE;;UACrB,uBAAuB,GAC3B,SAAS,CAAC,MAAM,KAAK,CAAC,IAAI,eAAe,CAAC,oBAAoB;IAChE,IAAI,cAAc,IAAI,uBAAuB,EAAE;;;cAEvC,QAAQ,GAAG,gBAAgB,CAAC,cAAc,CAAC;QACjD,IAAI,QAAQ,EAAE;YACZ,gBAAgB,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;SACvC;KACF;IACD,IAAI,SAAS,EAAE;QACb,gBAAgB,CAAC,IAAI,CAAC,GAAG,SAAS,CAAC,CAAC;KACrC;IACD,OAAO,gBAAgB,CAAC;CACzB;;;;;;;AAMD,SAAgB,sBAAsB,CAAC,QAAa;;UAC5C,QAAQ,GAAG,mBAAmB,CAAC,QAAQ,CAAC,IAAI,gBAAgB,CAAC,QAAQ,CAAC;IAC5E,OAAO,CAAC,QAAQ,IAAI,QAAQ,CAAC,gBAAgB;;;IAAM,MAAM,QAAQ,EAAC,CAAC;CACpE;;;;;;MC9JY,KAAK;;;;;;;;;IAChB,YACU,YAAyB,EACzB,wBAAiD,EACjD,OAAmB,EACnB,0BAAyD,EACzD,aAA2B,EAGnC,iBAAsB;QAPd,iBAAY,GAAZ,YAAY,CAAa;QACzB,6BAAwB,GAAxB,wBAAwB,CAAyB;QACjD,YAAO,GAAP,OAAO,CAAY;QACnB,+BAA0B,GAA1B,0BAA0B,CAA+B;QACzD,kBAAa,GAAb,aAAa,CAAc;QAKnC,IAAI,CAAC,eAAe,CAAC,iBAAiB,CAAC,CAAC;KACzC;;;;;;IAKD,QAAQ,CAAC,eAA4B;QACnC,OAAO,IAAI,CAAC,wBAAwB,CAAC,sBAAsB,EAAE,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC;KACzF;;;;;IAQD,MAAM,CAAC,QAAa;;cACZ,UAAU,GAAG,IAAI,CAAC,uBAAuB,CAAC,QAAQ,CAAC;QACzD,OAAO,IAAI,CAAC,YAAY,CAAC,IAAI,CAC3B,GAAG,CAAC,UAAU,CAAC,EACf,UAAU;;;;QAAC,CAAC,GAAU;;kBAEd,EAAE,cAAc,EAAE,GAAG,IAAI,CAAC,OAAO,CAAC,eAAe;YAEvD,IAAI,GAAG,YAAY,SAAS,IAAI,cAAc,EAAE;gBAC9C,OAAO,EAAE,CAAC,SAAS,CAAC,CAAC;aACtB;;YAGD,OAAO,UAAU,CAAC,GAAG,CAAC,CAAC;SACxB,EAAC,EACF,oBAAoB,EAAE,EACtB,SAAS,CAAC,IAAI,CAAC,0BAA0B,CAAC,CAC3C,CAAC;KACH;;;;;IASD,UAAU,CAAC,QAAa;QACtB,OAAO,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;KAC5C;;;;;IAQD,cAAc,CAAC,QAAa;;cACpB,UAAU,GAAG,IAAI,CAAC,uBAAuB,CAAC,QAAQ,CAAC;QACzD,OAAO,UAAU,CAAC,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,CAAC,CAAC;KACjD;;;;;;IAKD,SAAS,CAAC,EAAyB;QACjC,OAAO,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,0BAA0B,CAAC,CAAC,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;KACzF;;;;;IAKD,QAAQ;QACN,OAAO,IAAI,CAAC,wBAAwB,CAAC,sBAAsB,EAAE,CAAC,QAAQ,EAAE,CAAC;KAC1E;;;;;;;IAMD,KAAK,CAAC,KAAU;QACd,OAAO,IAAI,CAAC,wBAAwB,CAAC,sBAAsB,EAAE,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;KAC/E;;;;;;IAEO,uBAAuB,CAAC,QAAa;;cACrC,cAAc,GAAG,sBAAsB,CAAC,QAAQ,CAAC;;cACjD,cAAc,GAAG,IAAI,CAAC,aAAa,CAAC,yBAAyB,EAAE;QACrE,OAAO,cAAc,CAAC,cAAc,CAAC,CAAC;KACvC;;;;;;IAEO,eAAe,CAAC,iBAAsB;;cACtC,KAAK,GAAgB,IAAI,CAAC,YAAY,CAAC,KAAK;;cAC5C,YAAY,GAAY,CAAC,KAAK,IAAI,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,MAAM,KAAK,CAAC;QACvE,IAAI,YAAY,EAAE;;kBACV,oBAAoB,GAAY,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,MAAM,GAAG,CAAC;;kBAClF,WAAW,GAAgB,oBAAoB;oCAC5C,IAAI,CAAC,OAAO,CAAC,aAAa,EAAK,iBAAiB,IACrD,iBAAiB;YAErB,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;SACrC;KACF;;;YA7GF,UAAU;;;;YANF,WAAW;YAFX,uBAAuB;YAIvB,UAAU;YALV,6BAA6B;YAO7B,YAAY;4CAUhB,QAAQ,YACR,MAAM,SAAC,mBAAmB;;;;;;;IAN3B,6BAAiC;;;;;IACjC,yCAAyD;;;;;IACzD,wBAA2B;;;;;IAC3B,2CAAiE;;;;;IACjE,8BAAmC;;;;;;;ACtBvC;;;;AAUA,MAAa,aAAa;;;;;IAIxB,YAAY,KAAY,EAAE,MAAkB;QAC1C,aAAa,CAAC,KAAK,GAAG,KAAK,CAAC;QAC5B,aAAa,CAAC,MAAM,GAAG,MAAM,CAAC;KAC/B;;;;IAED,WAAW;QACT,aAAa,CAAC,KAAK,GAAG,IAAI,CAAC;QAC3B,aAAa,CAAC,MAAM,GAAG,IAAI,CAAC;KAC7B;;AAXa,mBAAK,GAAiB,IAAI,CAAC;AAC3B,oBAAM,GAAsB,IAAI,CAAC;;YAHhD,UAAU,SAAC,EAAE,UAAU,EAAE,MAAM,EAAE;;;;YAPzB,KAAK;YACL,UAAU;;;;;IAQjB,oBAAyC;;IACzC,qBAA+C;;;;;;;;;;ACPjD,MAAa,SAAS;;;;IACpB,WAAW,IAAI;;QAEb,OAAO,QAAQ,CAAC;KACjB;CACF;;;;AAKD,MAAa,WAAW;;;;IAMtB,YAAmB,WAAyB;QAAzB,gBAAW,GAAX,WAAW,CAAc;KAAI;;;;IALhD,WAAW,IAAI;;QAEb,OAAO,gBAAgB,CAAC;KACzB;CAGF;;;IADa,kCAAgC;;;;;;;ACrB9C;;;;AAgBA,MAAa,cAAc;;;;;;;;;IACzB,YACE,OAAqB,EACrB,uBAAgD,EAChD,MAAa,EACb,QAAkB,EAGlB,SAA+B,EAAE,EACjC,qBAA4C;;;QAI5C,CAAC,WAAW,IAAI,QAAQ,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;;;cAGtC,OAAO,GAAsB,OAAO,CAAC,oBAAoB,CAAC,MAAM,CAAC;QAEvE,uBAAuB,CAAC,2BAA2B,CAAC,OAAO,CAAC,CAAC;;QAG7D,OAAO,CAAC,qBAAqB,EAAE,CAAC;;QAGhC,qBAAqB,CAAC,aAAa,CAAC,IAAI,SAAS,EAAE,EAAE,OAAO,CAAC,CAAC;KAC/D;;;YA1BF,QAAQ;;;;YAbA,YAAY;YACZ,uBAAuB;YACvB,KAAK;YAJG,QAAQ;wCAsBpB,QAAQ,YACR,MAAM,SAAC,gBAAgB;YAfnB,qBAAqB;;;;;;;ACR9B;;;;AAeA,MAAa,iBAAiB;;;;;;;;IAC5B,YACE,MAAa,EACb,uBAAgD,EAChD,OAAqB,EAGrB,SAAiC,EAAE,EACnC,qBAA4C;;;;cAItC,eAAe,GAAyB,iBAAiB,CAAC,aAAa,CAAC,MAAM,CAAC;;;cAG/E,OAAO,GAAsB,OAAO,CAAC,oBAAoB,CAAC,eAAe,CAAC;QAEhF,IAAI,OAAO,CAAC,MAAM,CAAC,MAAM,EAAE;YACzB,uBAAuB,CAAC,2BAA2B,CAAC,OAAO,CAAC,CAAC;;YAG7D,qBAAqB,CAAC,aAAa,CAAC,IAAI,WAAW,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE,OAAO,CAAC,CAAC;SACjF;KACF;;;;;;IAEO,OAAO,aAAa,CAAC,SAAiC,EAAE;QAC9D,OAAO,MAAM,CAAC,MAAM;;;;;QAClB,CAAC,KAA2B,EAAE,MAA4B,KAAK,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,GACnF,EAAE,CACH,CAAC;KACH;;;YA/BF,QAAQ;;;;YAZA,KAAK;YACL,uBAAuB;YACvB,YAAY;wCAgBhB,QAAQ,YACR,MAAM,SAAC,mBAAmB;YAftB,qBAAqB;;;;;;;ACN9B;;;AA0CA,MAAa,UAAU;;;;;;;IAMd,OAAO,OAAO,CACnB,SAAuB,EAAE,EACzB,UAA6B,EAAE;QAE/B,OAAO;YACL,QAAQ,EAAE,cAAc;YACxB,SAAS,EAAE;gBACT,YAAY;gBACZ,mBAAmB;gBACnB,OAAO;gBACP,eAAe;gBACf,gBAAgB;gBAChB,qBAAqB;gBACrB,kBAAkB;gBAClB,+BAA+B;gBAC/B,uBAAuB;gBACvB,6BAA6B;gBAC7B,KAAK;gBACL,WAAW;gBACX,aAAa;gBACb,GAAG,MAAM;gBACT,GAAG,UAAU,CAAC,kBAAkB,CAAC,MAAM,EAAE,OAAO,CAAC;aAClD;SACF,CAAC;KACH;;;;;;IAKM,OAAO,UAAU,CAAC,SAAuB,EAAE;QAChD,OAAO;YACL,QAAQ,EAAE,iBAAiB;YAC3B,SAAS,EAAE;gBACT,YAAY;gBACZ,aAAa;gBACb,GAAG,MAAM;gBACT;oBACE,OAAO,EAAE,mBAAmB;oBAC5B,KAAK,EAAE,IAAI;oBACX,QAAQ,EAAE,MAAM;iBACjB;aACF;SACF,CAAC;KACH;;;;;;;IAEO,OAAO,kBAAkB,CAC/B,MAAoB,EACpB,OAA0B;QAE1B,OAAO;YACL;gBACE,OAAO,EAAE,uBAAuB;gBAChC,QAAQ,EAAE,OAAO,CAAC,iBAAiB,IAAI,wCAAwC;aAChF;YACD;gBACE,OAAO,EAAE,gBAAgB;gBACzB,QAAQ,EAAE,MAAM;aACjB;YACD;gBACE,OAAO,EAAE,UAAU,CAAC,YAAY;gBAChC,QAAQ,EAAE,OAAO;aAClB;YACD;gBACE,OAAO,EAAE,UAAU;gBACnB,UAAU,EAAE,UAAU,CAAC,iBAAiB;gBACxC,IAAI,EAAE,CAAC,UAAU,CAAC,YAAY,CAAC;aAChC;YACD;gBACE,OAAO,EAAE,sBAAsB;gBAC/B,UAAU,EAAE,UAAU,CAAC,2BAA2B;gBAClD,KAAK,EAAE,IAAI;gBACX,IAAI,EAAE,CAAC,gBAAgB,CAAC;aACzB;YACD;gBACE,OAAO,EAAE,mBAAmB;gBAC5B,UAAU,EAAE,UAAU,CAAC,eAAe;aACvC;YACD;gBACE,OAAO,EAAE,0BAA0B;gBACnC,WAAW,EAAE,mBAAmB;aACjC;YACD;gBACE,OAAO,EAAE,kBAAkB;gBAC3B,WAAW,EAAE,YAAY;aAC1B;SACF,CAAC;KACH;;;;;;IAEO,OAAO,iBAAiB,CAAC,OAA0B;QACzD,OAAO,SAAS,CAAC,IAAI,UAAU,EAAE,EAAE,OAAO,CAAC,CAAC;KAC7C;;;;;;IAEO,OAAO,2BAA2B,CAAC,YAA8B;QACvE;;;QAAO,MAAM,YAAY,CAAC,SAAS,EAAE,EAAC;KACvC;;;;;IAEO,OAAO,eAAe;QAC5B,OAAO,YAAY,CAAC,GAAG,EAAE,CAAC;KAC3B;;AAvGuB,uBAAY,GAAG,IAAI,cAAc,CAAoB,cAAc,CAAC,CAAC;;YAF9F,QAAQ;;;;;;;IAEP,wBAA6F;;;;;;;AC3C/F;;;;;;AAOA,SAAgB,MAAM,CACpB,OAAkC,EAClC,OAAuB;IAEvB;;;;;IAAO,CAAC,MAAW,EAAE,IAAqB;;;QAGxC,IAAI,OAAO,SAAS,KAAK,WAAW,IAAI,SAAS,EAAE;;kBAC3C,cAAc,GAAG,MAAM,CAAC,cAAc,CAAC,WAAW,CAAC;YAEzD,IAAI,cAAc,EAAE;gBAClB,yBAAyB,EAAE,CAAC;aAC7B;SACF;;cAEK,IAAI,GAAG,mBAAmB,CAAC,MAAM,CAAC,WAAW,CAAC;QAEpD,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE;YAC3B,OAAO,GAAG,CAAC,OAAO,CAAC,CAAC;SACrB;QAED,KAAK,MAAM,MAAM,IAAI,OAAO,EAAE;;kBACtB,IAAI,GAAG,MAAM,CAAC,IAAI;YAExB,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;gBACvB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC;aACzB;YAED,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC;gBACtB,EAAE,EAAE,IAAI;gBACR,OAAO,EAAE,OAAO,IAAI,EAAE;gBACtB,IAAI;aACL,CAAC,CAAC;SACJ;KACF,EAAC;CACH;;;;;;AC1CD;;;;;;;AASA,SAAgB,4BAA4B,CAAC,MAAW;;;;;IAKtD,IAAI,WAAW,EAAE;;;QAEf,IAAI,CAAC,eAAe,EAAE;;YAEpB,OAAO,CAAC,IAAI,CAAC,sCAAsC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;SACnE;KACF;CACF;;;;;;ACnBD;;;;AAKA,gCAIC;;;IAHC,iCAAoB;;IACpB,gDAAwC;;IACxC,mDAAwC;;;;;;;;AAM1C,SAAgB,KAAK,CAAI,OAAwB;;;;;IAC/C,SAAS,eAAe,CAAC,mBAAuC;;cACxD,kBAAkB,GACtB,mBAAmB,CAAC,gBAAgB,CAAC,IAAI,EAAE;QAC7C,4CAAY,kBAAkB,EAAK,OAAO,IAAsB;KACjE;;;;;IAED,SAAS,cAAc,CAAC,MAA4B;cAC5C,EAAE,IAAI,EAAE,mBAAmB,EAAE,sBAAsB,EAAE,GAAG,MAAM;cAC9D,EAAE,QAAQ,EAAE,QAAQ,EAAE,IAAI,EAAE,GAAG,sBAAsB;;cACrD,SAAS,GACb,OAAO,IAAI,KAAK,QAAQ,GAAG,IAAI,GAAG,CAAC,IAAI,IAAI,IAAI,CAAC,OAAO,EAAE,KAAK,IAAI;;;QAIpE,IAAI,OAAO,SAAS,KAAK,WAAW,IAAI,SAAS,EAAE;YACjD,eAAe,CAAC,8BAA8B,CAAC,SAAS,CAAC,CAAC;SAC3D;QAED,IAAI,mBAAmB,CAAC,cAAc,CAAC,QAAQ,CAAC,EAAE;;kBAC1C,aAAa,GAA2B,mBAAmB,CAAC,QAAQ,CAAC,IAAI,EAAE;YACjF,IAAI,CAAC,OAAO,qBAAQ,IAAI,CAAC,OAAO,EAAK,aAAa,CAAC,OAAO,CAAE,CAAC;SAC9D;QAED,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACzB,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACzB,IAAI,CAAC,IAAI,GAAG,SAAS,CAAC;KACvB;IAED;;;;IAAO,CAAC,MAAkB;;;QAGxB,IAAI,OAAO,SAAS,KAAK,WAAW,IAAI,SAAS,EAAE;YACjD,4BAA4B,CAAC,MAAM,CAAC,CAAC;SACtC;;cACK,UAAU,GAAuB,MAAM;;cACvC,IAAI,GAAkB,mBAAmB,CAAC,UAAU,CAAC;;cACrD,mBAAmB,GAAuB,MAAM,CAAC,cAAc,CAAC,UAAU,CAAC;;cAC3E,sBAAsB,GAAoB,eAAe,CAAC,mBAAmB,CAAC;QACpF,cAAc,CAAC,EAAE,IAAI,EAAE,mBAAmB,EAAE,sBAAsB,EAAE,CAAC,CAAC;QACtE,UAAU,CAAC,gBAAgB,CAAC,GAAG,sBAAsB,CAAC;KACvD,EAAC;CACH;;;;;;AC1DD;MAWM,gBAAgB,GAAG,EAAE;;;;;;;AAE3B,SAAgB,sBAAsB,CACpC,QAAa,EACb,KAAmB;;;IAInB,OAAO,WAAW;UACd,yBAAyB,CAAC,QAAQ,EAAE,KAAK,CAAC;UAC1C,gCAAgC,CAAC,QAAQ,CAAC,CAAC;CAChD;;;;;;;;AAED,SAAgB,gBAAgB,CAC9B,MAAyB,EACzB,IAAY,EACZ,WAAiB,EACjB,QAAkB,EAAE;IAEpB,WAAW,GAAG,WAAW,IAAI,oBAAoB,CAAC,IAAI,CAAC,CAAC;IAExD,IAAI,OAAO,WAAW,KAAK,QAAQ,EAAE;QACnC,OAAO,WAAW,CAAC;KACpB;SAAM;;cACC,UAAU,GAAa,KAAK,CAAC,MAAM;cACrC,CAAC,WAAW,EAAE,GAAG,KAAK,CAAC;cACvB,WAAW,CAAC,KAAK,CAAC,GAAG,CAAC;QAE1B,OAAO,WAAW;cACd,mBAAmB,CAAC,UAAU,EAAE,MAAM,CAAC;cACvC,0BAA0B,CAAC,UAAU,CAAC,CAAC;KAC5C;CACF;;;;;;AAKD,SAAgB,oBAAoB,CAAC,IAAY;;UACzC,aAAa,GAAW,IAAI,CAAC,MAAM,GAAG,CAAC;;UACvC,cAAc,GAAY,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,KAAK,gBAAgB;IACnF,OAAO,cAAc,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,aAAa,CAAC,GAAG,IAAI,CAAC;CAC7D;;;;;;;AAcD,SAAS,yBAAyB,CAChC,QAAa,EACb,KAAmB;IAEnB,OAAO,SAAS,IAAI,CAAC,KAAK,GAAG,mCAAmC,EAAE,GAAG,mBAAA,KAAK,GAAE,MAAM,CAAC,QAAQ,CAAC,CAAC;CAC9F;;;;;;AAED,SAAS,gCAAgC,CAAU,QAAa;IAC9D,OAAO,aAAa,CAAC,KAAK;UACtB,aAAa,CAAC,KAAK,CAAC,MAAM,CAAC,QAAQ,CAAC;UACpC,mCAAmC,EAAE,CAAC;CAC3C;;;;;;AAED,SAAS,mBAAmB,CAAC,UAAoB,EAAE,MAAyB;IAC1E,OAAO,SAAS,IAAI,CAAC,MAAM;UACvB,mCAAmC,EAAE;UACrC,UAAU,CAAC,UAAU,qBAAE,MAAM,GAAE,CAAC;CACrC;;;;;AAED,SAAS,0BAA0B,CAAC,UAAoB;IACtD,OAAO,UAAU,CAAC,UAAU,qBAAE,aAAa,CAAC,MAAM,GAAE,CAAC;CACtD;;;;;;ACvFD;;;;;;;AAgBA,SAAgB,MAAM,CAAI,WAAe,EAAE,GAAG,KAAe;IAC3D;;;;;IAAO,UAAS,MAAM,EAAE,GAAG;;cACnB,IAAI,GAAW,GAAG,CAAC,QAAQ,EAAE;;cAC7B,UAAU,GAAG,KAAK,IAAI,YAAY;;YACpC,QAAQ,GAAsB,IAAI;;YAClC,iBAAiB,GAAkC,IAAI;QAE3D,IAAI,WAAW,EAAE;YACf,iBAAiB,GAAG,gCAAgC,CAAC,MAAM,CAAC,CAAC;SAC9D;QAED,MAAM,CAAC,gBAAgB,CAAC,MAAM,EAAE;YAC9B,CAAC,UAAU,GAAG;gBACZ,QAAQ,EAAE,IAAI;gBACd,UAAU,EAAE,KAAK;gBACjB,YAAY,EAAE,IAAI;aACnB;YACD,CAAC,IAAI,GAAG;gBACN,UAAU,EAAE,IAAI;gBAChB,YAAY,EAAE,IAAI;;;;gBAClB,GAAG;oBACD,IAAI,IAAI,CAAC,UAAU,CAAC,EAAE;wBACpB,OAAO,IAAI,CAAC,UAAU,CAAC,CAAC;qBACzB;;;oBAGD,IAAI,WAAW,EAAE;wBACf,IAAI,CAAC,UAAU,CAAC,GAAG,mBAAA,iBAAiB,GAAE,IAAI,CACxC,QAAQ;;;wBAAC;;kCACD,KAAK,GAAG,WAAW,CAAC,IAAI,EAAE,KAAK,CAAC;;kCAChC,MAAM,GAAG,WAAW,CAAC,IAAI,EAAE,UAAU,CAAC;4BAC5C,QAAQ,GAAG,QAAQ,IAAI,gBAAgB,CAAC,MAAM,EAAE,IAAI,EAAE,WAAW,EAAE,KAAK,CAAC,CAAC;4BAC1E,OAAO,sBAAsB,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;yBAChD,EAAC,CACH,CAAC;qBACH;yBAAM;wBACL,QAAQ,GAAG,QAAQ,IAAI,gBAAgB,CAAC,IAAI,EAAE,IAAI,EAAE,WAAW,EAAE,KAAK,CAAC,CAAC;wBACxE,IAAI,CAAC,UAAU,CAAC,GAAG,sBAAsB,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;qBAC3D;oBACD,OAAO,IAAI,CAAC,UAAU,CAAC,CAAC;iBACzB;aACF;SACF,CAAC,CAAC;;QAGH,IAAI,WAAW,EAAE;YACf,2BAA2B,CAAC,MAAM,CAAC,CAAC;SACrC;KACF,EAAC;CACH;;;;;;AChED;;;;;AAKA,SAAgB,eAAe,CAAC,OAA8B;IAC5D;;;;;;;IACE,SAAS,QAAQ,CACf,MAAW,EACX,UAAkB,EAClB,UAAsC;QAEtC,IAAI,UAAU,EAAE;;;kBAER,UAAU,GAAG,UAAU,CAAC,KAAK,IAAI,oBAAM,UAAU,IAAE,UAAU;YACnE,IAAI,UAAU,EAAE;gBACd,2BAA2B,CAAC,aAAa,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC;aAChE;SACF;aAAM;;YAEL,2BAA2B,CAAC,aAAa,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;SAC5D;KACF,KACD;CACH;;;;;;ACzBD;;;AAWA,8BAQC;;;IAPCC,+BAAoB;;IACpBA,kCAAgD;;IAChDA,mCAAc;;IACdA,+BAAoB;;IAGpBA,mCAAgC;;;;;AAGlC,sCAOC;;;IAJCC,6CAA4B;;IAC5BA,iDAAoB;;IACpBA,+CAA4B;;IAC5BA,qDAAgD;;;;;;AAGlD,SAAgBC,qBAAmB,CAAC,MAAoC;IACtE,OAAOC,mBAA2B,CAAC,MAAM,CAAC,CAAC;CAC5C;;;;;AAED,SAAgBC,kBAAgB,CAAC,MAAoC;IACnE,OAAOC,gBAAwB,CAAC,MAAM,CAAC,CAAC;CACzC;;;;;AAED,SAAgBC,wBAAsB,CAAC,MAAgB;IACrD,OAAOC,sBAA8B,CAAC,MAAM,CAAC,CAAC;CAC/C;;;;;AAED,SAAgBC,qBAAmB,CAAC,MAAW;IAC7C,OAAOC,mBAA2B,CAAC,MAAM,CAAC,CAAC;CAC5C;;;;;;AC5CD;;;;;;AAOA,SAAgB,QAAQ,CAAI,SAAe;IACzC;;;;;;;IAAO,CACL,MAAW,EACX,GAAoB,EACpB,UAAuD;;;QAIvD,IAAI,OAAO,SAAS,KAAK,WAAW,IAAI,SAAS,EAAE;;kBAC3C,WAAW,GAAG,EAAE,UAAU,IAAI,UAAU,CAAC,KAAK,KAAK,IAAI,CAAC;YAE9D,IAAI,WAAW,EAAE;gBACf,2BAA2B,EAAE,CAAC;aAC/B;SACF;;cAEK,UAAU,GAAG,UAAU,CAAC,KAAK;;cAC7B,UAAU,GAAG,cAAc,CAAC,SAAS,qBAAE,UAAU,IAAS;YAC9D,cAAc,EAAE,MAAM;YACtB,YAAY,EAAE,GAAG,CAAC,QAAQ,EAAE;;;;YAC5B,kBAAkB;gBAChB,OAAO,EAAE,CAAC;aACX;SACF,CAAC;;cACI,aAAa,GAAG;YACpB,YAAY,EAAE,IAAI;;;;YAClB,GAAG;gBACD,OAAO,UAAU,CAAC;aACnB;SACF;;QAED,oBAAM,aAAa,IAAE,YAAY,CAAC,GAAG,UAAU,CAAC;QAChD,OAAO,aAAa,CAAC;KACtB,EAAC;CACH;;;;;;ACzCD,MAKa,yBAAyB;;;;;;IACpC,KAAK,CAAI,IAAa;QACpB,OAAO,IAAI,EAAE,CAAC;KACf;;;;;;IAED,KAAK,CAAI,IAAa;QACpB,OAAO,IAAI,EAAE,CAAC;KACf;;;YARF,UAAU;;;;;;;ACHX;;;AAMA,MAAa,UAAU;;;;IACrB,YAA6B,IAAkB;QAAlB,SAAI,GAAJ,IAAI,CAAc;;cACvC,gBAAgB,GAAG,sBAAsB,oBAAM,IAAI,GAAC;QAC1D,gBAAgB,CAAC,gBAAgB;;;;QAAG,CAClC,cAAsC;YAEtC,OAAO,cAAc,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SACjD,CAAA,CAAC;KACH;;;;IAED,OAAO;QACL,OAAO,IAAI,CAAC,IAAI,CAAC;KAClB;;;;IAED,QAAQ;QACN,OAAO,cAAc,IAAI,CAAC,IAAI,GAAG,CAAC;KACnC;CACF;;;;;;IAhBa,0BAAmC;;;;;;;;;;;;;;;;;;;;;;;;;"}