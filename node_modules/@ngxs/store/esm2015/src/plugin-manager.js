/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Inject, Injectable, Optional, SkipSelf } from '@angular/core';
import { NGXS_PLUGINS } from './symbols';
export class PluginManager {
    /**
     * @param {?} _parentManager
     * @param {?} _pluginHandlers
     */
    constructor(_parentManager, _pluginHandlers) {
        this._parentManager = _parentManager;
        this._pluginHandlers = _pluginHandlers;
        this.plugins = [];
        this.registerHandlers();
    }
    /**
     * @private
     * @return {?}
     */
    get rootPlugins() {
        return (this._parentManager && this._parentManager.plugins) || this.plugins;
    }
    /**
     * @private
     * @return {?}
     */
    registerHandlers() {
        /** @type {?} */
        const pluginHandlers = this.getPluginHandlers();
        this.rootPlugins.push(...pluginHandlers);
    }
    /**
     * @private
     * @return {?}
     */
    getPluginHandlers() {
        /** @type {?} */
        const handlers = this._pluginHandlers || [];
        return handlers.map((/**
         * @param {?} plugin
         * @return {?}
         */
        (plugin) => (/** @type {?} */ ((plugin.handle ? plugin.handle.bind(plugin) : plugin)))));
    }
}
PluginManager.decorators = [
    { type: Injectable }
];
/** @nocollapse */
PluginManager.ctorParameters = () => [
    { type: PluginManager, decorators: [{ type: Optional }, { type: SkipSelf }] },
    { type: Array, decorators: [{ type: Inject, args: [NGXS_PLUGINS,] }, { type: Optional }] }
];
if (false) {
    /** @type {?} */
    PluginManager.prototype.plugins;
    /**
     * @type {?}
     * @private
     */
    PluginManager.prototype._parentManager;
    /**
     * @type {?}
     * @private
     */
    PluginManager.prototype._pluginHandlers;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGx1Z2luLW1hbmFnZXIuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9Abmd4cy9zdG9yZS8iLCJzb3VyY2VzIjpbInNyYy9wbHVnaW4tbWFuYWdlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLE1BQU0sRUFBRSxVQUFVLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUN2RSxPQUFPLEVBQUUsWUFBWSxFQUE0QixNQUFNLFdBQVcsQ0FBQztBQUduRSxNQUFNLE9BQU8sYUFBYTs7Ozs7SUFHeEIsWUFHVSxjQUE2QixFQUc3QixlQUE2QjtRQUg3QixtQkFBYyxHQUFkLGNBQWMsQ0FBZTtRQUc3QixvQkFBZSxHQUFmLGVBQWUsQ0FBYztRQVJoQyxZQUFPLEdBQW1CLEVBQUUsQ0FBQztRQVVsQyxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztJQUMxQixDQUFDOzs7OztJQUVELElBQVksV0FBVztRQUNyQixPQUFPLENBQUMsSUFBSSxDQUFDLGNBQWMsSUFBSSxJQUFJLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBQyxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUM7SUFDOUUsQ0FBQzs7Ozs7SUFFTyxnQkFBZ0I7O2NBQ2hCLGNBQWMsR0FBbUIsSUFBSSxDQUFDLGlCQUFpQixFQUFFO1FBQy9ELElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLEdBQUcsY0FBYyxDQUFDLENBQUM7SUFDM0MsQ0FBQzs7Ozs7SUFFTyxpQkFBaUI7O2NBQ2pCLFFBQVEsR0FBaUIsSUFBSSxDQUFDLGVBQWUsSUFBSSxFQUFFO1FBQ3pELE9BQU8sUUFBUSxDQUFDLEdBQUc7Ozs7UUFDakIsQ0FBQyxNQUFrQixFQUFFLEVBQUUsQ0FDckIsbUJBQUEsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLEVBQWdCLEVBQ3hFLENBQUM7SUFDSixDQUFDOzs7WUE5QkYsVUFBVTs7OztZQU9pQixhQUFhLHVCQUZwQyxRQUFRLFlBQ1IsUUFBUTt3Q0FFUixNQUFNLFNBQUMsWUFBWSxjQUNuQixRQUFROzs7O0lBUFgsZ0NBQW9DOzs7OztJQUdsQyx1Q0FFcUM7Ozs7O0lBQ3JDLHdDQUVxQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdCwgSW5qZWN0YWJsZSwgT3B0aW9uYWwsIFNraXBTZWxmIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBOR1hTX1BMVUdJTlMsIE5neHNQbHVnaW4sIE5neHNQbHVnaW5GbiB9IGZyb20gJy4vc3ltYm9scyc7XG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBQbHVnaW5NYW5hZ2VyIHtcbiAgcHVibGljIHBsdWdpbnM6IE5neHNQbHVnaW5GbltdID0gW107XG5cbiAgY29uc3RydWN0b3IoXG4gICAgQE9wdGlvbmFsKClcbiAgICBAU2tpcFNlbGYoKVxuICAgIHByaXZhdGUgX3BhcmVudE1hbmFnZXI6IFBsdWdpbk1hbmFnZXIsXG4gICAgQEluamVjdChOR1hTX1BMVUdJTlMpXG4gICAgQE9wdGlvbmFsKClcbiAgICBwcml2YXRlIF9wbHVnaW5IYW5kbGVyczogTmd4c1BsdWdpbltdXG4gICkge1xuICAgIHRoaXMucmVnaXN0ZXJIYW5kbGVycygpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXQgcm9vdFBsdWdpbnMoKTogTmd4c1BsdWdpbkZuW10ge1xuICAgIHJldHVybiAodGhpcy5fcGFyZW50TWFuYWdlciAmJiB0aGlzLl9wYXJlbnRNYW5hZ2VyLnBsdWdpbnMpIHx8IHRoaXMucGx1Z2lucztcbiAgfVxuXG4gIHByaXZhdGUgcmVnaXN0ZXJIYW5kbGVycygpOiB2b2lkIHtcbiAgICBjb25zdCBwbHVnaW5IYW5kbGVyczogTmd4c1BsdWdpbkZuW10gPSB0aGlzLmdldFBsdWdpbkhhbmRsZXJzKCk7XG4gICAgdGhpcy5yb290UGx1Z2lucy5wdXNoKC4uLnBsdWdpbkhhbmRsZXJzKTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0UGx1Z2luSGFuZGxlcnMoKTogTmd4c1BsdWdpbkZuW10ge1xuICAgIGNvbnN0IGhhbmRsZXJzOiBOZ3hzUGx1Z2luW10gPSB0aGlzLl9wbHVnaW5IYW5kbGVycyB8fCBbXTtcbiAgICByZXR1cm4gaGFuZGxlcnMubWFwKFxuICAgICAgKHBsdWdpbjogTmd4c1BsdWdpbikgPT5cbiAgICAgICAgKHBsdWdpbi5oYW5kbGUgPyBwbHVnaW4uaGFuZGxlLmJpbmQocGx1Z2luKSA6IHBsdWdpbikgYXMgTmd4c1BsdWdpbkZuXG4gICAgKTtcbiAgfVxufVxuIl19